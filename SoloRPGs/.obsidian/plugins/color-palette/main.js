/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// node_modules/validate-color/lib/index.js
var require_lib = __commonJS({
  "node_modules/validate-color/lib/index.js"(exports, module2) {
    module2.exports = function(e2) {
      var r2 = {};
      function t2(n2) {
        if (r2[n2])
          return r2[n2].exports;
        var a2 = r2[n2] = { i: n2, l: false, exports: {} };
        return e2[n2].call(a2.exports, a2, a2.exports, t2), a2.l = true, a2.exports;
      }
      return t2.m = e2, t2.c = r2, t2.d = function(e3, r3, n2) {
        t2.o(e3, r3) || Object.defineProperty(e3, r3, { enumerable: true, get: n2 });
      }, t2.r = function(e3) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e3, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e3, "__esModule", { value: true });
      }, t2.t = function(e3, r3) {
        if (1 & r3 && (e3 = t2(e3)), 8 & r3)
          return e3;
        if (4 & r3 && "object" == typeof e3 && e3 && e3.__esModule)
          return e3;
        var n2 = /* @__PURE__ */ Object.create(null);
        if (t2.r(n2), Object.defineProperty(n2, "default", { enumerable: true, value: e3 }), 2 & r3 && "string" != typeof e3)
          for (var a2 in e3)
            t2.d(n2, a2, function(r4) {
              return e3[r4];
            }.bind(null, a2));
        return n2;
      }, t2.n = function(e3) {
        var r3 = e3 && e3.__esModule ? function() {
          return e3.default;
        } : function() {
          return e3;
        };
        return t2.d(r3, "a", r3), r3;
      }, t2.o = function(e3, r3) {
        return Object.prototype.hasOwnProperty.call(e3, r3);
      }, t2.p = "", t2(t2.s = 0);
    }([function(e2, r2, t2) {
      "use strict";
      t2.r(r2), t2.d(r2, "validateHTMLColorName", function() {
        return l2;
      }), t2.d(r2, "validateHTMLColorSpecialName", function() {
        return i2;
      }), t2.d(r2, "validateHTMLColorHex", function() {
        return u2;
      }), t2.d(r2, "validateHTMLColorRgb", function() {
        return g2;
      }), t2.d(r2, "validateHTMLColorHsl", function() {
        return y2;
      }), t2.d(r2, "validateHTMLColorHwb", function() {
        return L2;
      }), t2.d(r2, "validateHTMLColorLab", function() {
        return S2;
      }), t2.d(r2, "validateHTMLColorLch", function() {
        return m2;
      }), t2.d(r2, "validateHTMLColor", function() {
        return G2;
      });
      const n2 = (e3) => e3 && "string" == typeof e3, a2 = ["AliceBlue", "AntiqueWhite", "Aqua", "Aquamarine", "Azure", "Beige", "Bisque", "Black", "BlanchedAlmond", "Blue", "BlueViolet", "Brown", "BurlyWood", "CadetBlue", "Chartreuse", "Chocolate", "Coral", "CornflowerBlue", "Cornsilk", "Crimson", "Cyan", "DarkBlue", "DarkCyan", "DarkGoldenrod", "DarkGray", "DarkGrey", "DarkGreen", "DarkKhaki", "DarkMagenta", "DarkOliveGreen", "DarkOrange", "DarkOrchid", "DarkRed", "DarkSalmon", "DarkSeaGreen", "DarkSlateBlue", "DarkSlateGray", "DarkSlateGrey", "DarkTurquoise", "DarkViolet", "DeepPink", "DeepSkyBlue", "DimGray", "DimGrey", "DodgerBlue", "FireBrick", "FloralWhite", "ForestGreen", "Fuchsia", "Gainsboro", "GhostWhite", "Gold", "Goldenrod", "Gray", "Grey", "Green", "GreenYellow", "HoneyDew", "HotPink", "IndianRed", "Indigo", "Ivory", "Khaki", "Lavender", "LavenderBlush", "LawnGreen", "LemonChiffon", "LightBlue", "LightCoral", "LightCyan", "LightGoldenrodYellow", "LightGray", "LightGrey", "LightGreen", "LightPink", "LightSalmon", "LightSalmon", "LightSeaGreen", "LightSkyBlue", "LightSlateGray", "LightSlateGrey", "LightSteelBlue", "LightYellow", "Lime", "LimeGreen", "Linen", "Magenta", "Maroon", "MediumAquamarine", "MediumBlue", "MediumOrchid", "MediumPurple", "MediumSeaGreen", "MediumSlateBlue", "MediumSlateBlue", "MediumSpringGreen", "MediumTurquoise", "MediumVioletRed", "MidnightBlue", "MintCream", "MistyRose", "Moccasin", "NavajoWhite", "Navy", "OldLace", "Olive", "OliveDrab", "Orange", "OrangeRed", "Orchid", "PaleGoldenrod", "PaleGreen", "PaleTurquoise", "PaleVioletRed", "PapayaWhip", "PeachPuff", "Peru", "Pink", "Plum", "PowderBlue", "Purple", "RebeccaPurple", "Red", "RosyBrown", "RoyalBlue", "SaddleBrown", "Salmon", "SandyBrown", "SeaGreen", "SeaShell", "Sienna", "Silver", "SkyBlue", "SlateBlue", "SlateGray", "SlateGrey", "Snow", "SpringGreen", "SteelBlue", "Tan", "Teal", "Thistle", "Tomato", "Turquoise", "Violet", "Wheat", "White", "WhiteSmoke", "Yellow", "YellowGreen"], o2 = ["currentColor", "inherit", "transparent"], l2 = (e3) => {
        let r3 = false;
        return n2(e3) && a2.map((t3) => (e3.toLowerCase() === t3.toLowerCase() && (r3 = true), null)), r3;
      }, i2 = (e3) => {
        let r3 = false;
        return n2(e3) && o2.map((t3) => (e3.toLowerCase() === t3.toLowerCase() && (r3 = true), null)), r3;
      }, u2 = (e3) => {
        if (n2(e3)) {
          const r3 = /^#([\da-f]{3}){1,2}$|^#([\da-f]{4}){1,2}$/i;
          return e3 && r3.test(e3);
        }
        return false;
      }, d2 = "(([\\d]{0,5})((\\.([\\d]{1,5}))?))", s2 = `(${d2}%)`, c2 = "(([0-9]|[1-9][0-9]|100)%)", f2 = `(${c2}|(0?((\\.([\\d]{1,5}))?))|1)`, h2 = `([\\s]{0,5})\\)?)(([\\s]{0,5})(\\/?)([\\s]{1,5})${`(((${c2}))|(0?((\\.([\\d]{1,5}))?))|1))?`}([\\s]{0,5})\\)`, $2 = "(-?(([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-9][0-9]|3[0-5][0-9])((\\.([\\d]{1,5}))?)|360)(deg)?)", g2 = (e3) => {
        if (n2(e3)) {
          const r3 = "([\\s]{0,5})([\\d]{1,5})%?([\\s]{0,5}),?", t3 = "((([\\s]{0,5}),?([\\s]{0,5}))|(([\\s]{1,5})))", n3 = new RegExp(`^(rgb)a?\\(${`${r3}${t3}`}${`${r3}${t3}`}${`${r3}${t3}`}(${"(\\/?([\\s]{0,5})(0?\\.?([\\d]{1,5})%?([\\s]{0,5}))?|1|0)"})?\\)$`);
          return e3 && n3.test(e3);
        }
        return false;
      }, y2 = (e3) => {
        if (n2(e3)) {
          const r3 = new RegExp(`^(hsl)a?\\((([\\s]{0,5})(${$2}|${"(([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-9][0-9]|3[0-9][0-9]|400)grad)"}|${"((([0-5])?\\.([\\d]{1,5})|6\\.([0-9]|1[0-9]|2[0-8])|[0-6])rad)"}|${"((0?((\\.([\\d]{1,5}))?)|1)turn)"})((([\\s]{0,5}),([\\s]{0,5}))|(([\\s]{1,5}))))(([\\s]{0,5})(0|${c2})((([\\s]{0,5}),([\\s]{0,5}))|(([\\s]{1,5}))))(([\\s]{0,5})(0|${c2})([\\s]{0,5})\\)?)(([\\s]{0,5})(\\/?|,?)([\\s]{0,5})(((${c2}))|(0?((\\.([\\d]{1,5}))?))|1))?\\)$`);
          return e3 && r3.test(e3);
        }
        return false;
      }, L2 = (e3) => {
        if (n2(e3)) {
          const r3 = new RegExp(`^(hwb\\(([\\s]{0,5})${$2}([\\s]{1,5}))((0|${c2})([\\s]{1,5}))((0|${c2})${h2}$`);
          return e3 && r3.test(e3);
        }
        return false;
      }, S2 = (e3) => {
        if (n2(e3)) {
          const r3 = "(-?(([0-9]|[1-9][0-9]|1[0-5][0-9])((\\.([\\d]{1,5}))?)?|160))", t3 = new RegExp(`^(lab\\(([\\s]{0,5})${s2}([\\s]{1,5})${r3}([\\s]{1,5})${r3}${h2}$`);
          return e3 && t3.test(e3);
        }
        return false;
      }, m2 = (e3) => {
        if (n2(e3)) {
          const r3 = "((([0-9]|[1-9][0-9])?((\\.([\\d]{1,5}))?)|100)(%)?)", t3 = "" + d2, n3 = `((${$2})|(0|${f2})|(([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-9][0-9]|3[0-5][0-9])((\\.([\\d]{1,5}))?)|360))`, a3 = `(\\/([\\s]{0,5})${f2})`, o3 = new RegExp(`^lch\\(${`(([\\s]{0,5})${r3}([\\s]{1,5})${t3}([\\s]{1,5})${n3}([\\s]{0,5})(${a3})?)`}\\)$`);
          return e3 && o3.test(e3);
        }
        return false;
      }, G2 = (e3) => !!(e3 && u2(e3) || g2(e3) || y2(e3) || L2(e3) || S2(e3) || m2(e3));
      r2.default = (e3) => !!(e3 && u2(e3) || l2(e3) || i2(e3) || g2(e3) || y2(e3) || L2(e3) || S2(e3) || m2(e3));
    }]);
  }
});

// node_modules/quantize/quantize.js
var require_quantize = __commonJS({
  "node_modules/quantize/quantize.js"(exports, module2) {
    if (!pv) {
      pv = {
        map: function(array, f2) {
          var o2 = {};
          return f2 ? array.map(function(d2, i2) {
            o2.index = i2;
            return f2.call(o2, d2);
          }) : array.slice();
        },
        naturalOrder: function(a2, b2) {
          return a2 < b2 ? -1 : a2 > b2 ? 1 : 0;
        },
        sum: function(array, f2) {
          var o2 = {};
          return array.reduce(f2 ? function(p2, d2, i2) {
            o2.index = i2;
            return p2 + f2.call(o2, d2);
          } : function(p2, d2) {
            return p2 + d2;
          }, 0);
        },
        max: function(array, f2) {
          return Math.max.apply(null, f2 ? pv.map(array, f2) : array);
        }
      };
    }
    var pv;
    var MMCQ = function() {
      var sigbits = 5, rshift = 8 - sigbits, maxIterations = 1e3, fractByPopulations = 0.75;
      function getColorIndex(r2, g2, b2) {
        return (r2 << 2 * sigbits) + (g2 << sigbits) + b2;
      }
      function PQueue(comparator) {
        var contents = [], sorted = false;
        function sort() {
          contents.sort(comparator);
          sorted = true;
        }
        return {
          push: function(o2) {
            contents.push(o2);
            sorted = false;
          },
          peek: function(index) {
            if (!sorted)
              sort();
            if (index === void 0)
              index = contents.length - 1;
            return contents[index];
          },
          pop: function() {
            if (!sorted)
              sort();
            return contents.pop();
          },
          size: function() {
            return contents.length;
          },
          map: function(f2) {
            return contents.map(f2);
          },
          debug: function() {
            if (!sorted)
              sort();
            return contents;
          }
        };
      }
      function VBox(r1, r2, g1, g2, b1, b2, histo) {
        var vbox = this;
        vbox.r1 = r1;
        vbox.r2 = r2;
        vbox.g1 = g1;
        vbox.g2 = g2;
        vbox.b1 = b1;
        vbox.b2 = b2;
        vbox.histo = histo;
      }
      VBox.prototype = {
        volume: function(force) {
          var vbox = this;
          if (!vbox._volume || force) {
            vbox._volume = (vbox.r2 - vbox.r1 + 1) * (vbox.g2 - vbox.g1 + 1) * (vbox.b2 - vbox.b1 + 1);
          }
          return vbox._volume;
        },
        count: function(force) {
          var vbox = this, histo = vbox.histo;
          if (!vbox._count_set || force) {
            var npix = 0, i2, j2, k2, index;
            for (i2 = vbox.r1; i2 <= vbox.r2; i2++) {
              for (j2 = vbox.g1; j2 <= vbox.g2; j2++) {
                for (k2 = vbox.b1; k2 <= vbox.b2; k2++) {
                  index = getColorIndex(i2, j2, k2);
                  npix += histo[index] || 0;
                }
              }
            }
            vbox._count = npix;
            vbox._count_set = true;
          }
          return vbox._count;
        },
        copy: function() {
          var vbox = this;
          return new VBox(vbox.r1, vbox.r2, vbox.g1, vbox.g2, vbox.b1, vbox.b2, vbox.histo);
        },
        avg: function(force) {
          var vbox = this, histo = vbox.histo;
          if (!vbox._avg || force) {
            var ntot = 0, mult = 1 << 8 - sigbits, rsum = 0, gsum = 0, bsum = 0, hval, i2, j2, k2, histoindex;
            for (i2 = vbox.r1; i2 <= vbox.r2; i2++) {
              for (j2 = vbox.g1; j2 <= vbox.g2; j2++) {
                for (k2 = vbox.b1; k2 <= vbox.b2; k2++) {
                  histoindex = getColorIndex(i2, j2, k2);
                  hval = histo[histoindex] || 0;
                  ntot += hval;
                  rsum += hval * (i2 + 0.5) * mult;
                  gsum += hval * (j2 + 0.5) * mult;
                  bsum += hval * (k2 + 0.5) * mult;
                }
              }
            }
            if (ntot) {
              vbox._avg = [~~(rsum / ntot), ~~(gsum / ntot), ~~(bsum / ntot)];
            } else {
              vbox._avg = [~~(mult * (vbox.r1 + vbox.r2 + 1) / 2), ~~(mult * (vbox.g1 + vbox.g2 + 1) / 2), ~~(mult * (vbox.b1 + vbox.b2 + 1) / 2)];
            }
          }
          return vbox._avg;
        },
        contains: function(pixel) {
          var vbox = this, rval = pixel[0] >> rshift;
          gval = pixel[1] >> rshift;
          bval = pixel[2] >> rshift;
          return rval >= vbox.r1 && rval <= vbox.r2 && gval >= vbox.g1 && gval <= vbox.g2 && bval >= vbox.b1 && bval <= vbox.b2;
        }
      };
      function CMap() {
        this.vboxes = new PQueue(function(a2, b2) {
          return pv.naturalOrder(
            a2.vbox.count() * a2.vbox.volume(),
            b2.vbox.count() * b2.vbox.volume()
          );
        });
        ;
      }
      CMap.prototype = {
        push: function(vbox) {
          this.vboxes.push({
            vbox,
            color: vbox.avg()
          });
        },
        palette: function() {
          return this.vboxes.map(function(vb) {
            return vb.color;
          });
        },
        size: function() {
          return this.vboxes.size();
        },
        map: function(color) {
          var vboxes = this.vboxes;
          for (var i2 = 0; i2 < vboxes.size(); i2++) {
            if (vboxes.peek(i2).vbox.contains(color)) {
              return vboxes.peek(i2).color;
            }
          }
          return this.nearest(color);
        },
        nearest: function(color) {
          var vboxes = this.vboxes, d1, d2, pColor;
          for (var i2 = 0; i2 < vboxes.size(); i2++) {
            d2 = Math.sqrt(
              Math.pow(color[0] - vboxes.peek(i2).color[0], 2) + Math.pow(color[1] - vboxes.peek(i2).color[1], 2) + Math.pow(color[2] - vboxes.peek(i2).color[2], 2)
            );
            if (d2 < d1 || d1 === void 0) {
              d1 = d2;
              pColor = vboxes.peek(i2).color;
            }
          }
          return pColor;
        },
        forcebw: function() {
          var vboxes = this.vboxes;
          vboxes.sort(function(a2, b2) {
            return pv.naturalOrder(pv.sum(a2.color), pv.sum(b2.color));
          });
          var lowest = vboxes[0].color;
          if (lowest[0] < 5 && lowest[1] < 5 && lowest[2] < 5)
            vboxes[0].color = [0, 0, 0];
          var idx = vboxes.length - 1, highest = vboxes[idx].color;
          if (highest[0] > 251 && highest[1] > 251 && highest[2] > 251)
            vboxes[idx].color = [255, 255, 255];
        }
      };
      function getHisto(pixels) {
        var histosize = 1 << 3 * sigbits, histo = new Array(histosize), index, rval, gval2, bval2;
        pixels.forEach(function(pixel) {
          rval = pixel[0] >> rshift;
          gval2 = pixel[1] >> rshift;
          bval2 = pixel[2] >> rshift;
          index = getColorIndex(rval, gval2, bval2);
          histo[index] = (histo[index] || 0) + 1;
        });
        return histo;
      }
      function vboxFromPixels(pixels, histo) {
        var rmin = 1e6, rmax = 0, gmin = 1e6, gmax = 0, bmin = 1e6, bmax = 0, rval, gval2, bval2;
        pixels.forEach(function(pixel) {
          rval = pixel[0] >> rshift;
          gval2 = pixel[1] >> rshift;
          bval2 = pixel[2] >> rshift;
          if (rval < rmin)
            rmin = rval;
          else if (rval > rmax)
            rmax = rval;
          if (gval2 < gmin)
            gmin = gval2;
          else if (gval2 > gmax)
            gmax = gval2;
          if (bval2 < bmin)
            bmin = bval2;
          else if (bval2 > bmax)
            bmax = bval2;
        });
        return new VBox(rmin, rmax, gmin, gmax, bmin, bmax, histo);
      }
      function medianCutApply(histo, vbox) {
        if (!vbox.count())
          return;
        var rw = vbox.r2 - vbox.r1 + 1, gw = vbox.g2 - vbox.g1 + 1, bw = vbox.b2 - vbox.b1 + 1, maxw = pv.max([rw, gw, bw]);
        if (vbox.count() == 1) {
          return [vbox.copy()];
        }
        var total = 0, partialsum = [], lookaheadsum = [], i2, j2, k2, sum, index;
        if (maxw == rw) {
          for (i2 = vbox.r1; i2 <= vbox.r2; i2++) {
            sum = 0;
            for (j2 = vbox.g1; j2 <= vbox.g2; j2++) {
              for (k2 = vbox.b1; k2 <= vbox.b2; k2++) {
                index = getColorIndex(i2, j2, k2);
                sum += histo[index] || 0;
              }
            }
            total += sum;
            partialsum[i2] = total;
          }
        } else if (maxw == gw) {
          for (i2 = vbox.g1; i2 <= vbox.g2; i2++) {
            sum = 0;
            for (j2 = vbox.r1; j2 <= vbox.r2; j2++) {
              for (k2 = vbox.b1; k2 <= vbox.b2; k2++) {
                index = getColorIndex(j2, i2, k2);
                sum += histo[index] || 0;
              }
            }
            total += sum;
            partialsum[i2] = total;
          }
        } else {
          for (i2 = vbox.b1; i2 <= vbox.b2; i2++) {
            sum = 0;
            for (j2 = vbox.r1; j2 <= vbox.r2; j2++) {
              for (k2 = vbox.g1; k2 <= vbox.g2; k2++) {
                index = getColorIndex(j2, k2, i2);
                sum += histo[index] || 0;
              }
            }
            total += sum;
            partialsum[i2] = total;
          }
        }
        partialsum.forEach(function(d2, i3) {
          lookaheadsum[i3] = total - d2;
        });
        function doCut(color) {
          var dim1 = color + "1", dim2 = color + "2", left, right, vbox1, vbox2, d2, count2 = 0;
          for (i2 = vbox[dim1]; i2 <= vbox[dim2]; i2++) {
            if (partialsum[i2] > total / 2) {
              vbox1 = vbox.copy();
              vbox2 = vbox.copy();
              left = i2 - vbox[dim1];
              right = vbox[dim2] - i2;
              if (left <= right)
                d2 = Math.min(vbox[dim2] - 1, ~~(i2 + right / 2));
              else
                d2 = Math.max(vbox[dim1], ~~(i2 - 1 - left / 2));
              while (!partialsum[d2])
                d2++;
              count2 = lookaheadsum[d2];
              while (!count2 && partialsum[d2 - 1])
                count2 = lookaheadsum[--d2];
              vbox1[dim2] = d2;
              vbox2[dim1] = vbox1[dim2] + 1;
              return [vbox1, vbox2];
            }
          }
        }
        return maxw == rw ? doCut("r") : maxw == gw ? doCut("g") : doCut("b");
      }
      function quantize2(pixels, maxcolors) {
        if (!pixels.length || maxcolors < 2 || maxcolors > 256) {
          return false;
        }
        var histo = getHisto(pixels), histosize = 1 << 3 * sigbits;
        var nColors = 0;
        histo.forEach(function() {
          nColors++;
        });
        if (nColors <= maxcolors) {
        }
        var vbox = vboxFromPixels(pixels, histo), pq = new PQueue(function(a2, b2) {
          return pv.naturalOrder(a2.count(), b2.count());
        });
        pq.push(vbox);
        function iter(lh, target) {
          var ncolors = 1, niters = 0, vbox2;
          while (niters < maxIterations) {
            vbox2 = lh.pop();
            if (!vbox2.count()) {
              lh.push(vbox2);
              niters++;
              continue;
            }
            var vboxes = medianCutApply(histo, vbox2), vbox1 = vboxes[0], vbox22 = vboxes[1];
            if (!vbox1) {
              return;
            }
            lh.push(vbox1);
            if (vbox22) {
              lh.push(vbox22);
              ncolors++;
            }
            if (ncolors >= target)
              return;
            if (niters++ > maxIterations) {
              return;
            }
          }
        }
        iter(pq, fractByPopulations * maxcolors);
        var pq2 = new PQueue(function(a2, b2) {
          return pv.naturalOrder(a2.count() * a2.volume(), b2.count() * b2.volume());
        });
        while (pq.size()) {
          pq2.push(pq.pop());
        }
        iter(pq2, maxcolors - pq2.size());
        var cmap = new CMap();
        while (pq2.size()) {
          cmap.push(pq2.pop());
        }
        return cmap;
      }
      return {
        quantize: quantize2
      };
    }();
    module2.exports = MMCQ.quantize;
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ColorPalette2,
  urlRegex: () => urlRegex
});
module.exports = __toCommonJS(main_exports);
var import_obsidian10 = require("obsidian");

// src/components/EditorModal.ts
var import_obsidian5 = require("obsidian");

// src/components/Palette.ts
var import_obsidian4 = require("obsidian");

// src/settings.ts
var import_obsidian2 = require("obsidian");

// src/utils/basicUtils.ts
var import_obsidian = require("obsidian");
function getModifiedSettings(settings) {
  let newSettings = {};
  for (const [key, value] of Object.entries(settings)) {
    const defaultVal = defaultSettings[key];
    if (key in defaultSettings) {
      if (value !== defaultVal)
        newSettings = { ...newSettings, [key]: value };
    } else {
      if (value instanceof Array && value.length === 0)
        break;
      else
        newSettings = { ...newSettings, [key]: value };
    }
  }
  return Object.keys(newSettings).length !== 0 ? newSettings : void 0;
}
function parseUrl(url) {
  var _a;
  if (url.includes("-")) {
    return url.substring(url.lastIndexOf("/") + 1).split("-").map((i2) => "#" + i2);
  } else
    return ((_a = url.substring(url.lastIndexOf("/") + 1).match(/.{1,6}/g)) == null ? void 0 : _a.map((i2) => "#" + i2)) || [];
}
function pluginToPaletteSettings(pluginSettings) {
  return {
    height: pluginSettings.height,
    width: pluginSettings.width,
    direction: pluginSettings.direction,
    gradient: pluginSettings.gradient,
    hover: pluginSettings.hover,
    hideText: pluginSettings.hideText,
    override: pluginSettings.override,
    aliases: []
  };
}
function createPaletteBlock(input) {
  if (typeof input === "string")
    return `\`\`\`palette
${input}
\`\`\`
`;
  else
    return input.settings ? `\`\`\`palette
${toNString(input.colors)}
${JSON.stringify(input.settings)}
\`\`\`
` : `\`\`\`palette
${toNString(input.colors)}
\`\`\`
`;
}
function getForegroundColor(color) {
  return color.rgb()[0] * 0.299 + color.rgb()[1] * 0.587 + color.rgb()[2] * 0.114 > 186 ? "#000000" : "#ffffff";
}
function toNString(array) {
  let result = "";
  for (const string of array) {
    result += string + "\n";
  }
  return result.trim();
}
async function copyToClipboard(text, copyFormat) {
  let copiedText = text;
  if (copyFormat === "Value" /* Value */ && !text.includes("`")) {
    if (copiedText.includes("#"))
      copiedText = copiedText.split("#")[1];
    else if (copiedText.includes("("))
      copiedText = copiedText.split("(")[1].split(")")[0];
  }
  new import_obsidian.Notice(`Copied ${copiedText}`);
  await navigator.clipboard.writeText(copiedText);
}

// src/settings.ts
var defaultSettings = {
  noticeDuration: 1e4,
  errorPulse: true,
  aliasMode: "Both" /* Both */,
  corners: true,
  stabilityWhileEditing: true,
  reloadDelay: 5,
  copyFormat: "Raw" /* Raw */,
  height: 150,
  width: 700,
  direction: "column" /* Column */,
  gradient: false,
  hover: true,
  hideText: false,
  override: false
};
var SettingsTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    let { settings } = this.plugin;
    this.settings = pluginToPaletteSettings(settings);
    this.reloadDelay = settings.reloadDelay;
    containerEl.empty();
    containerEl.createEl("h2").setText("General");
    containerEl.addClass("color-palette-settings");
    new import_obsidian2.Setting(containerEl).setName("Alias Mode").setDesc("What will be shown when aliases option is set in local palette options. Defaults to showing both color and alias.").addDropdown((dropdown) => {
      dropdown.addOption("Both" /* Both */, "Both" /* Both */).addOption("Prefer Alias" /* Alias */, "Prefer Alias" /* Alias */).setValue(this.plugin.settings.aliasMode).onChange(async (value) => {
        settings.aliasMode = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Palette Corners").setDesc("Minor aesthetic change which toggles whether the corners on palettes are rounded.").addToggle((toggle) => {
      toggle.setValue(settings.corners).onChange(async (value) => {
        settings.corners = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Stability While Editing").setDesc("Keeps the palette from moving while in edit mode.").addToggle((toggle) => {
      toggle.setValue(settings.stabilityWhileEditing).onChange(async (value) => {
        settings.stabilityWhileEditing = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Reload Delay").setDesc("How long it takes in milliseconds for palettes to be updated after changes have been made (Larger values are less responsive).").addText((text) => {
      text.setValue(settings.reloadDelay.toString()).onChange(async (value) => {
        try {
          if (!Number.isNaN(Number(value))) {
            settings.reloadDelay = Number(value);
            await this.plugin.saveSettings();
          } else
            throw new Error("Please enter a number.");
        } catch (e2) {
          new import_obsidian2.Notice(e2);
        }
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Copy Format").setDesc("Choice of format when copying colors.").addDropdown((dropdown) => {
      dropdown.addOption("Raw" /* Raw */, "Raw" /* Raw */).addOption("Value" /* Value */, "Value" /* Value */).setValue(this.plugin.settings.copyFormat).onChange(async (value) => {
        settings.copyFormat = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h2").setText("Defaults");
    new import_obsidian2.Setting(containerEl).setName("Height").addText((text) => {
      text.setValue(settings.height.toString()).onChange(async (value) => {
        try {
          if (!Number.isNaN(Number(value))) {
            settings.height = Number(value);
            await this.plugin.saveSettings();
          } else
            throw new Error("Please enter a number.");
        } catch (e2) {
          new import_obsidian2.Notice(e2);
        }
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Width").setDesc("Caution - Might cause palettes to display incorrectly.").addText((text) => {
      text.setValue(settings.width.toString()).onChange(async (value) => {
        try {
          if (!Number.isNaN(Number(value))) {
            settings.width = Number(value);
            await this.plugin.saveSettings();
          } else
            throw new Error("Please enter a number.");
        } catch (e2) {
          new import_obsidian2.Notice(e2);
        }
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Direction").addDropdown((dropdown) => {
      dropdown.addOption("column" /* Column */, "column" /* Column */).addOption("row" /* Row */, "row" /* Row */).setValue(this.plugin.settings.direction).onChange(async (value) => {
        settings.direction = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Gradient").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.gradient).onChange(async (value) => {
        settings.gradient = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Hover").setDesc("Toggles whether palettes can be hovered").addToggle((toggle) => {
      toggle.setValue(settings.hover).onChange(async (value) => {
        settings.hover = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Hide Text").setDesc("Disables color and alias visibility").addToggle((toggle) => {
      toggle.setValue(settings.hideText).onChange(async (value) => {
        settings.hideText = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Override").setDesc("Disables color validation for full control (advanced)").addToggle((toggle) => {
      toggle.setValue(settings.override).onChange(async (value) => {
        settings.override = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h2").setText("Other");
    new import_obsidian2.Setting(containerEl).setName("Palette Error Pulse").setDesc("Whether the affected palette should pulse when encountering an error.").addToggle((toggle) => {
      toggle.setValue(settings.errorPulse).onChange(async (value) => {
        settings.errorPulse = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Notice Duration").setDesc("How long palette error messages are show for in seconds (0 for indefinite).").addText((text) => {
      text.setValue((settings.noticeDuration / 1e3).toString()).onChange(async (value) => {
        try {
          if (!Number.isNaN(Number(value))) {
            settings.noticeDuration = Number(value) * 1e3;
            await this.plugin.saveSettings();
          } else
            throw new Error("Please enter a number.");
        } catch (e2) {
          new import_obsidian2.Notice(e2);
        }
      });
    });
    new import_obsidian2.Setting(containerEl).setName("Donate").setDesc("If you like this plugin, consider donating to support continued development.").addButton((button) => {
      button.onClick(() => open("https://github.com/sponsors/ALegendsTale")).setClass("color-palette-donate");
      const image = button.buttonEl.appendChild(createEl("img"));
      image.src = "https://img.shields.io/badge/Sponsor-%E2%9D%A4-%23EA4AAA?style=flat&logo=Github";
    }).addButton((button) => {
      button.onClick(() => open("https://www.paypal.com/donate/?hosted_button_id=BHHFMGX822K4S")).setClass("color-palette-donate");
      const image = button.buttonEl.appendChild(createEl("img"));
      image.src = "https://img.shields.io/badge/Paypal-%23003087?style=flat&logo=Paypal";
    });
  }
  // Called when settings are exited
  hide() {
    var _a;
    const settingsChanged = JSON.stringify(this.settings) !== JSON.stringify(pluginToPaletteSettings(this.plugin.settings));
    const reloadDelayChanged = this.reloadDelay !== this.plugin.settings.reloadDelay;
    if (((_a = this.plugin) == null ? void 0 : _a.palettes) && (settingsChanged || reloadDelayChanged)) {
      for (let paletteMRC of this.plugin.palettes) {
        paletteMRC.update();
      }
    }
  }
};

// node_modules/colorsea/dist/index.esm.js
function t(t2, r2, n2, e2) {
  var o2, i2 = arguments.length, a2 = i2 < 3 ? r2 : null === e2 ? e2 = Object.getOwnPropertyDescriptor(r2, n2) : e2;
  if ("object" == typeof Reflect && "function" == typeof Reflect.decorate)
    a2 = Reflect.decorate(t2, r2, n2, e2);
  else
    for (var u2 = t2.length - 1; u2 >= 0; u2--)
      (o2 = t2[u2]) && (a2 = (i2 < 3 ? o2(a2) : i2 > 3 ? o2(r2, n2, a2) : o2(r2, n2)) || a2);
  return i2 > 3 && a2 && Object.defineProperty(r2, n2, a2), a2;
}
function r(t2, r2, n2) {
  if (n2 || 2 === arguments.length)
    for (var e2, o2 = 0, i2 = r2.length; o2 < i2; o2++)
      !e2 && o2 in r2 || (e2 || (e2 = Array.prototype.slice.call(r2, 0, o2)), e2[o2] = r2[o2]);
  return t2.concat(e2 || Array.prototype.slice.call(r2));
}
var n = function(t2, r2, n2) {
  return [t2, r2, n2].map(function(t3) {
    return (t3 /= 255) > 0.04045 ? Math.pow((t3 + 0.055) / 1.055, 2.4) : t3 / 12.92;
  });
};
var e = function(t2, r2, n2) {
  return [t2, r2, n2].map(function(t3) {
    return 255 * (t3 <= 304e-5 ? 12.92 * t3 : 1.055 * Math.pow(t3, 1 / 2.4) - 0.055);
  });
};
var o = function(t2, r2, n2) {
  return Math.min(Math.max(t2, r2), n2);
};
var i = function(t2, r2) {
  return Math.round((t2 + Number.EPSILON) * Math.pow(10, r2)) / Math.pow(10, r2);
};
var a = function(t2, r2) {
  return Math.floor(Math.random() * (r2 - t2 + 1) - t2);
};
var u = function(t2, r2, n2, e2) {
  for (var i2, a2 = [t2, r2, n2], u2 = "#", h2 = 0; h2 < a2.length; h2++)
    u2 += (i2 = a2[h2], Math.round(o(i2, 0, 255)).toString(16).padStart(2, "0"));
  return null != e2 && (u2 += Math.round(o(e2, 0, 100) / 100 * 255).toString(16).padStart(2, "0")), u2;
};
var h = function(t2) {
  var n2 = t2.length, e2 = (t2 = function(t3) {
    var r2 = (t3 = /^#/.test(t3) ? t3.slice(1) : t3).length;
    if (![3, 4, 6, 8].includes(r2))
      return "000000";
    if (6 === r2 || 8 === r2)
      return t3;
    if (3 === r2 || 4 === r2) {
      for (var n3 = "", e3 = 0; e3 < r2; e3++) {
        var o3 = t3[e3];
        n3 += "" + o3 + o3;
      }
      return n3;
    }
    return "000000";
  }(t2).padEnd(8, "ff")).match(/.{2}/g);
  if (!e2)
    return [0, 0, 0, 1];
  var o2 = [0, 0, 0], i2 = false;
  return e2.forEach(function(t3, r2) {
    r2 < 3 ? o2[r2] = parseInt(t3, 16) : i2 = 100 * parseInt(t3, 16) / 255;
  }), false === i2 || n2 < 8 ? o2 : r(r([], o2, true), [i2], false);
};
var c = function(t2, r2, n2) {
  var e2;
  e2 = [t2, r2, n2].map(function(t3) {
    return t3 / 255;
  }), t2 = e2[0], r2 = e2[1], n2 = e2[2];
  var o2 = 1 - Math.max(t2, r2, n2), i2 = o2 < 1 ? 1 / (1 - o2) : 0;
  return [(1 - t2 - o2) * i2 * 100, (1 - r2 - o2) * i2 * 100, (1 - n2 - o2) * i2 * 100, 100 * o2];
};
var l = function(t2, r2, n2, e2) {
  return 100 === e2 ? [0, 0, 0] : (e2 /= 100, [t2, r2, n2].map(function(t3) {
    return (t3 /= 100) >= 1 ? 0 : 255 * (1 - t3) * (1 - e2);
  }));
};
function p(t2, r2, n2, e2) {
  var o2;
  void 0 === e2 && (e2 = "l"), o2 = [t2, r2, n2].map(function(t3) {
    return t3 / 255;
  }), t2 = o2[0], r2 = o2[1], n2 = o2[2];
  var i2 = Math.max(t2, r2, n2), a2 = Math.min(t2, r2, n2), u2 = function(t3, r3, n3, e3) {
    var o3;
    void 0 === e3 && (e3 = false), o3 = [t3, r3, n3].map(function(t4) {
      return t4 / 255;
    }), t3 = o3[0], r3 = o3[1], n3 = o3[2];
    var i3 = Math.max(t3, r3, n3), a3 = Math.min(t3, r3, n3), u3 = 0;
    if (i3 !== a3)
      if (e3)
        u3 = (t3 - r3 + (t3 - n3)) / 2, u3 /= Math.sqrt((t3 - r3) * (t3 - r3) + (t3 - n3) * (r3 - n3)), u3 = Math.acos(u3), n3 > r3 && (u3 = 2 * Math.PI - u3), u3 /= 2 * Math.PI;
      else {
        var h3 = i3 - a3;
        u3 = i3 === t3 ? (r3 - n3) / h3 + (r3 < n3 ? 6 : 0) : i3 === r3 ? (n3 - t3) / h3 + 2 : (t3 - r3) / h3 + 4, u3 /= 6;
      }
    else
      u3 = NaN;
    return 360 * u3;
  }(t2, r2, n2, "i" === e2), h2 = 0, c2 = (i2 + a2) / 2, l2 = i2 - a2, p2 = i2, f2 = (t2 + r2 + n2) / 3;
  return "v" === e2 && (h2 = 0 === i2 ? 0 : l2 / i2), i2 !== a2 && "l" === e2 && (h2 = c2 > 0.5 ? l2 / (2 - i2 - a2) : l2 / (i2 + a2)), "i" === e2 && (h2 = f2 > 0 ? 1 - a2 / f2 : 0), h2 *= 100, c2 *= 100, f2 *= 100, "l" === e2 ? [u2, h2, c2] : "v" === e2 ? [u2, h2, p2 *= 100] : [u2, h2, f2];
}
var f = function(t2, r2, n2) {
  return p(t2, r2, n2, "l");
};
var s = function(t2, r2, n2) {
  var e2, i2, a2 = function(t3) {
    return 6 * (t3 = t3 < 0 ? t3 + 1 : t3 > 1 ? t3 - 1 : t3) < 1 ? e2 + (i2 - e2) * t3 * 6 : 2 * t3 < 1 ? i2 : 3 * t3 < 2 ? e2 + (i2 - e2) * (2 / 3 - t3) * 6 : e2;
  };
  return t2 = t2 % 360 / 360, r2 = o(r2 / 100, 0, 1), n2 = o(n2 / 100, 0, 1), e2 = 2 * n2 - (i2 = n2 <= 0.5 ? n2 * (r2 + 1) : n2 + r2 - n2 * r2), [255 * a2(t2 + 1 / 3), 255 * a2(t2), 255 * a2(t2 - 1 / 3)];
};
var v = function(t2, r2, n2) {
  return p(t2, r2, n2, "v");
};
var b = function(t2, r2, n2) {
  var e2, o2, i2 = [n2 /= 100, n2 * (1 - (r2 /= 100)), n2 * (1 - (o2 = (t2 = t2 % 360 / 360 * 360) / 60 - (e2 = Math.floor(t2 / 60 % 6))) * r2), n2 * (1 - (1 - o2) * r2)], a2 = [[0, 3, 1], [2, 0, 1], [1, 0, 3], [1, 2, 0], [3, 1, 0], [0, 1, 2]];
  return [255 * i2[a2[e2][0]], 255 * i2[a2[e2][1]], 255 * i2[a2[e2][2]]];
};
var y = function(t2, r2, n2) {
  return p(t2, r2, n2, "i");
};
var d = function(t2, r2, n2) {
  var e2, i2, a2, u2;
  r2 /= 100, n2 /= 100, isNaN(t2) && (t2 = 0), isNaN(r2) && (r2 = 0);
  var h2 = function(t3) {
    return (1 + r2 * Math.cos(2 * Math.PI * t3) / Math.cos(Math.PI / 3 - 2 * Math.PI * t3)) / 3;
  };
  return (t2 = (360 + t2) % 360 / 360) < 1 / 3 ? a2 = 1 - ((u2 = (1 - r2) / 3) + (i2 = h2(t2))) : t2 < 2 / 3 ? u2 = 1 - ((i2 = (1 - r2) / 3) + (a2 = h2(t2 -= 1 / 3))) : i2 = 1 - ((a2 = (1 - r2) / 3) + (u2 = h2(t2 -= 2 / 3))), e2 = [i2, a2, u2].map(function(t3) {
    return 255 * o(n2 * t3 * 3, 0, 1);
  }), [i2 = e2[0], a2 = e2[1], u2 = e2[2]];
};
var g = function(t2, r2, n2) {
  return [f(t2, r2, n2)[0], 100 * (Math.min(t2, r2, n2) / 255), 100 * (1 - Math.max(t2, r2, n2) / 255)];
};
function w(t2, r2, n2) {
  return r2 /= 100, n2 /= 100, s(t2, 100, 50).map(function(t3) {
    return 255 * (t3 / 255 * (1 - r2 - n2) + r2);
  });
}
var m = { x: [0.4124564, 0.3575761, 0.1804375], y: [0.2126729, 0.7151522, 0.072175], z: [0.0193339, 0.119192, 0.9503041] };
var M = { r: [3.2404542, -1.5371385, -0.4985314], g: [-0.969266, 1.8760108, 0.041556], b: [0.0556434, -0.2040259, 1.0572252] };
var x = 0.95047;
var _ = 1;
var C = 1.08883;
var I = 0.206896552;
var k = 8856452e-9;
var E = 24389 / 27;
var z = function(t2, r2, e2) {
  var o2 = n(t2, r2, e2);
  return [100 * m.x.reduce(function(t3, r3, n2) {
    return t3 + r3 * o2[n2];
  }, 0), 100 * m.y.reduce(function(t3, r3, n2) {
    return t3 + r3 * o2[n2];
  }, 0), 100 * m.z.reduce(function(t3, r3, n2) {
    return t3 + r3 * o2[n2];
  }, 0)];
};
var N = function(t2, r2, n2) {
  var o2 = [t2, r2, n2], i2 = M.r.reduce(function(t3, r3, n3) {
    return t3 + r3 * o2[n3];
  }, 0) / 100, a2 = M.g.reduce(function(t3, r3, n3) {
    return t3 + r3 * o2[n3];
  }, 0) / 100, u2 = M.b.reduce(function(t3, r3, n3) {
    return t3 + r3 * o2[n3];
  }, 0) / 100;
  return e(i2, a2, u2);
};
var O = function(t2, r2, n2) {
  var e2;
  return e2 = [t2 = t2 / x / 100, r2 = r2 / _ / 100, n2 = n2 / C / 100].map(function(t3) {
    return t3 > k ? Math.pow(t3, 1 / 3) : (E * t3 + 16) / 116;
  }), t2 = e2[0], r2 = e2[1], n2 = e2[2], [Math.max(0, 116 * r2 - 16), 500 * (t2 - r2), 200 * (r2 - n2)];
};
var P = function(t2, r2, n2) {
  var e2, o2 = (t2 + 16) / 116, i2 = isNaN(r2) ? o2 : o2 + r2 / 500, a2 = isNaN(n2) ? o2 : o2 - n2 / 200;
  return e2 = [i2, o2, a2].map(function(t3) {
    return t3 > I ? Math.pow(t3, 3) : (116 * t3 - 16) / E;
  }), i2 = e2[0], o2 = e2[1], a2 = e2[2], [i2 * x * 100, o2 * _ * 100, a2 * C * 100];
};
var j = function(t2, r2, n2) {
  return N.apply(void 0, P(t2, r2, n2));
};
var S = function(t2, r2, n2) {
  r2 = o(r2, -100, 100), n2 = o(n2, -100, 100);
  var e2 = Math.sqrt(r2 * r2 + n2 * n2), i2 = (180 * Math.atan2(n2, r2) / Math.PI + 360) % 360;
  return 0 === Math.round(1e4 * e2) && (i2 = Number.NaN), [t2, e2, i2];
};
var A = function(t2, r2, n2) {
  return isNaN(n2) && (n2 = 0), n2 *= Math.PI / 180, [t2, Math.cos(n2) * r2, Math.sin(n2) * r2];
};
var L = function(t2, r2, n2) {
  return P.apply(void 0, A(t2, r2, n2));
};
var H = function(t2, r2, n2) {
  var e2 = t2 + r2 + n2, o2 = 0, i2 = 0;
  return e2 > 0 && (o2 = t2 / e2, i2 = r2 / e2), [o2, i2, r2];
};
var Y = Object.freeze({ __proto__: null, linear2rgb: e, rgb2linear: n, rgb2hex: u, hex2rgb: h, rgb2cmyk: c, cmyk2rgb: l, rgb2hsl: f, hsl2rgb: s, rgb2hsv: v, hsv2rgb: b, rgb2hsi: y, hsi2rgb: d, rgb2hwb: g, hwb2rgb: w, rgb2xyz: z, xyz2rgb: N, xyz2lab: O, lab2xyz: P, rgb2lab: function(t2, r2, n2) {
  return O.apply(void 0, z(t2, r2, n2));
}, lab2rgb: j, lch2lab: A, lab2lch: S, xyz2lch: function(t2, r2, n2) {
  return S.apply(void 0, O(t2, r2, n2));
}, lch2xyz: L, xyY2xyz: function(t2, r2, n2) {
  return 0 === r2 ? [0, 0, 0] : [t2 * (n2 / r2), n2, n2 / r2 * (1 - t2 - r2)];
}, xyz2xyY: H });
function R(t2, n2) {
  return void 0 === n2 && (n2 = false), function(e2, o2, i2) {
    var a2 = i2.value;
    i2.value = function() {
      for (var e3 = [], o3 = 0; o3 < arguments.length; o3++)
        e3[o3] = arguments[o3];
      if (e3.length > 0 && n2) {
        var i3 = JSON.stringify(e3);
        t2 += i3;
      }
      if (this.cache.has(t2))
        return this.cache.get(t2);
      var u2 = a2.call.apply(a2, r([this], e3, false));
      return this.cache.set(t2, u2), u2;
    };
  };
}
function q(t2, n2, e2, o2) {
  return void 0 === t2 && (t2 = [0, 2, 2]), void 0 === n2 && (n2 = 0), void 0 === e2 && (e2 = true), void 0 === o2 && (o2 = 0), function(a2, u2, h2) {
    var c2 = h2.value;
    h2.value = function() {
      for (var a3 = [], u3 = 0; u3 < arguments.length; u3++)
        a3[u3] = arguments[u3];
      var h3 = void 0 === a3[o2] ? e2 : a3[o2], l2 = c2.call.apply(c2, r([this], a3, false));
      if (false === h3)
        return l2;
      var p2 = "number" == typeof h3 ? Math.round(h3) : 0, f2 = "number" == typeof t2 ? new Array(l2.length).fill(t2) : t2, s2 = f2.map(function(t3) {
        return 1 === n2 ? "number" == typeof h3 ? p2 : t3 : t3 + p2;
      });
      return l2.map(function(t3, r2) {
        return i(t3, s2[r2]);
      });
    };
  };
}
var D = function(t2, r2, n2) {
  var e2 = t2 instanceof ft ? t2 : new ft(t2), i2 = r2 instanceof ft ? r2 : new ft(r2), a2 = o(n2, 0, 100) / 100, u2 = 2 * a2 - 1, h2 = e2.alpha() - i2.alpha(), c2 = ((u2 * h2 == -1 ? u2 : (u2 + h2) / (1 + u2 * h2)) + 1) / 2, l2 = 1 - c2, p2 = [Math.round(o(e2.red() * c2 + i2.red() * l2, 0, 255)), Math.round(o(e2.green() * c2 + i2.green() * l2, 0, 255)), Math.round(o(e2.blue() * c2 + i2.blue() * l2, 0, 255))], f2 = e2.alpha() * a2 + i2.alpha() * (1 - a2);
  return new ft(p2, f2);
};
var F = Math.sqrt;
var U = Math.pow;
var $ = Math.cos;
var J = Math.abs;
var Z = Math.sin;
var B = Math.exp;
var G = Math.atan2;
var K = Math.PI;
var Q = function(t2) {
  return K * t2 / 180;
};
var T = function(t2, r2, n2) {
  void 0 === n2 && (n2 = true);
  var e2 = G(r2, t2);
  return n2 && (e2 = (e2 = (e2 = 180 * e2 / K) > 0 ? e2 : e2 + 360) > 360 ? e2 - 360 : e2), e2;
};
var V = function(t2, r2) {
  void 0 === r2 && (r2 = true);
  var n2 = t2.lab(false), e2 = n2[0], o2 = n2[1], i2 = n2[2];
  return [e2, F(U(o2, 2) + U(i2, 2)), T(o2, i2, r2), o2, i2];
};
var W = ["CMC", "CIE", "CIE2000", "CIE1994", "CIE1976"];
var X = "CMC";
var tt = "CIE2000";
var rt = "CIE1994";
var nt = "CIE1976";
var et = function(t2, r2, n2, e2) {
  void 0 === n2 && (n2 = "CIE");
  var o2 = function(t3) {
    var r3 = t3.toUpperCase();
    return W.includes(r3) && "CIE" !== r3 ? r3 : tt;
  }(n2);
  if (e2 = e2 || {}, o2 === X) {
    var i2 = Object.assign({}, { l: 1, c: 1 }, e2);
    return function(t3, r3, n3, e3) {
      void 0 === n3 && (n3 = 1), void 0 === e3 && (e3 = 1);
      var o3 = V(t3, true), i3 = o3[0], a3 = o3[1], u3 = o3[2], h3 = o3[3], c3 = o3[4], l2 = V(r3), p2 = l2[0], f2 = l2[1], s2 = l2[3], v2 = a3 - f2, b2 = i3 - p2, y2 = c3 - l2[4], d2 = F(U(h3 - s2, 2) + U(y2, 2) - U(v2, 2)), g2 = i3 < 16 ? 0.511 : 0.040975 * i3 / (1 + 0.01765 * i3), w2 = 0.0638 * a3 / (1 + 0.0131 * a3) + 0.638, m2 = 164 <= u3 && u3 <= 345 ? 0.56 + J(0.2 * $(Q(u3 + 168))) : 0.36 + J(0.4 * $(Q(u3 + 35))), M2 = F(U(a3, 4) / (U(a3, 4) + 1900)), x2 = w2 * (M2 * m2 + 1 - M2);
      return F(U(b2 / (n3 * g2), 2) + U(v2 / (e3 * w2), 2) + U(d2 / x2, 2));
    }(t2, r2, i2.l, i2.c);
  }
  if (o2 === rt) {
    var a2 = { kL: 1, kC: 1, kH: 1, cate: "graphic" }, u2 = Object.assign({}, a2, e2);
    return function(t3, r3, n3, e3, o3, i3) {
      void 0 === n3 && (n3 = 1), void 0 === e3 && (e3 = 1), void 0 === o3 && (o3 = 1), void 0 === i3 && (i3 = "graphic");
      var a3 = "textiles" === i3 ? 0.048 : 0.045, u3 = "textiles" === i3 ? 0.014 : 0.015;
      n3 = "textiles" === i3 ? 2 : n3;
      var h3 = V(t3), c3 = h3[0], l2 = h3[1], p2 = h3[3], f2 = h3[4], s2 = V(r3), v2 = s2[0], b2 = s2[1], y2 = s2[3], d2 = c3 - v2, g2 = l2 - b2, w2 = f2 - s2[4], m2 = 1 + a3 * l2, M2 = 1 + u3 * l2, x2 = F(U(p2 - y2, 2) + U(w2, 2) - U(g2, 2));
      return F(U(d2 / (1 * n3), 2) + U(g2 / (e3 * m2), 2) + U(x2 / (o3 * M2), 2));
    }(t2, r2, u2.kL, u2.kC, u2.kH, u2.cate);
  }
  if (o2 === nt)
    return function(t3, r3) {
      var n3 = t3.lab(false), e3 = n3[0], o3 = n3[1], i3 = n3[2], a3 = r3.lab(false), u3 = a3[0], h3 = a3[1], c3 = a3[2];
      return F(U(e3 - u3, 2) + U(o3 - h3, 2) + U(i3 - c3, 2));
    }(t2, r2);
  var h2 = { kL: 1, kC: 1, kH: 1 }, c2 = Object.assign({}, h2, e2);
  return function(t3, r3, n3, e3, o3) {
    void 0 === n3 && (n3 = 1), void 0 === e3 && (e3 = 1), void 0 === o3 && (o3 = 1);
    var i3 = V(t3), a3 = i3[0], u3 = i3[1], h3 = i3[3], c3 = i3[4], l2 = V(r3), p2 = l2[0], f2 = l2[1], s2 = l2[3], v2 = l2[4], b2 = (a3 + p2) / 2, y2 = (u3 + f2) / 2, d2 = (1 - F(U(y2, 7) / (U(y2, 7) + U(25, 7)))) / 2, g2 = h3 * (1 + d2), w2 = s2 * (1 + d2), m2 = F(U(g2, 2) + U(c3, 2)), M2 = F(U(w2, 2) + U(v2, 2)), x2 = T(g2, c3, true), _2 = T(w2, v2, true), C2 = (m2 + M2) / 2, I2 = J(x2 - _2) > 180 ? (x2 + _2 + 360) / 2 : (x2 + _2) / 2, k2 = 1 - 0.17 * $(Q(I2 - 30)) + 0.24 * $(Q(2 * I2)) + 0.32 * $(Q(3 * I2 + 6)) - 0.2 * $(Q(4 * I2 - 63)), E2 = J(_2 - x2) <= 180 ? _2 - x2 : J(_2 - x2) > 180 && _2 <= x2 ? _2 - x2 + 360 : _2 - x2 - 360, z2 = p2 - a3, N2 = f2 - u3, O2 = 2 * F(m2 * M2) * Z(Q(E2) / 2), P2 = 1 + 0.015 * U(b2 - 50, 2) / F(20 + U(b2 - 50, 2)), j2 = 1 + 0.045 * C2, S2 = 1 + 0.015 * C2 * k2, A2 = 30 * B(-U((I2 - 275) / 25, 2)), L2 = -2 * F(U(C2, 7) / (U(C2, 7) + U(25, 7))) * Z(2 * Q(A2));
    return F(U(z2 / (n3 * P2), 2) + U(N2 / (e3 * j2), 2) + U(O2 / (o3 * S2), 2) + L2 * (N2 / (e3 * j2)) * (O2 / (o3 * S2)));
  }(t2, r2, c2.kL, c2.kC, c2.kH);
};
var ot = function(t2, r2, n2) {
  var e2 = Math.abs, o2 = Math.max, i2 = Math.min, a2 = t2 instanceof ft ? t2 : new ft(t2), u2 = r2 instanceof ft ? r2 : new ft(r2), h2 = Object.assign({}, { b: 125, c: 500 }, n2);
  return !(e2(255 * a2.brightness() / 100 - 255 * u2.brightness() / 100) <= h2.b) && !(o2(a2.red(), u2.red()) - i2(a2.red(), u2.red()) + (o2(a2.green(), u2.green()) - i2(a2.green(), u2.green())) + (o2(a2.blue(), u2.blue()) - i2(a2.blue(), u2.blue())) <= h2.c);
};
var it = function(t2, r2, n2) {
  var e2, i2 = function(t3) {
    return o(t3, 0, 100);
  }, a2 = function(t3) {
    return o(t3, 0, 255);
  }, u2 = { h: [0, function(t3) {
    return t3 % 360;
  }], s: [1, i2], l: [2, i2], r: [0, a2], g: [1, a2], b: [2, a2] }, h2 = u2[r2][0];
  if (["h", "s", "l"].includes(r2)) {
    var c2 = t2.hsl();
    if (void 0 === n2)
      return c2[h2];
    n2 = u2[r2][1](n2), c2[h2] = n2, e2 = s.apply(void 0, c2);
  } else {
    if (e2 = t2.rgb(), void 0 === n2)
      return e2[h2];
    n2 = u2[r2][1](n2), e2[h2] = n2;
  }
  return new ft(e2, t2.alpha());
};
var at = {};
var ut = /* @__PURE__ */ new Set(["rgb", "rgba", "cmyk", "lab", "hsl", "hsla", "hsv", "hsva", "hsi", "hsia", "xyz", "lch", "hwb", "hwba"]);
var ht = /^([a-zA-Z]+)\(([\s\S]+)\)$/;
var ct = function(t2) {
  return "string" == typeof t2 ? -1 === t2.indexOf("%") ? ct(Number(t2.trim())) : (t2 = t2.split("%")[0], (t2 = Number(t2.trim())) || 0) : Math.abs(t2) < 1 ? 100 * t2 : t2;
};
var lt = function(t2, r2) {
  void 0 === r2 && (r2 = /* @__PURE__ */ new Set());
  var n2 = "string" == typeof t2 ? t2 : t2.join(",");
  if (r2.has(n2))
    throw new Error("Invalid Color");
  r2.add(n2);
  var e2 = "rgb", o2 = [0, 0, 0], i2 = 100;
  if (Array.isArray(t2)) {
    if (t2.length < 3)
      throw new Error("Invalid Color");
    for (var a2 = 0; a2 < t2.length; a2++)
      if (a2 < 3)
        o2[a2] = t2[a2];
      else {
        if (3 !== a2 || void 0 === t2[3])
          break;
        i2 = t2[3];
      }
  } else {
    var u2 = false, c2 = t2.trim().match(ht);
    if (c2 || (u2 = true), c2) {
      var l2 = c2[1].toLocaleLowerCase();
      if (e2 = l2, ut.has(l2) || (u2 = true), c2[2] && !u2) {
        var p2 = c2[2], f2 = -1 !== p2.indexOf(",") ? "," : " ", s2 = p2.split(f2);
        for (a2 = 0; a2 < 3; a2++)
          void 0 !== s2[a2] && (["lch", "lab"].includes(e2) && 0 === a2 || ["hsl", "hsla", "hsv", "hsva", "hwb", "hwba", "hsi", "hsia"].includes(e2) && a2 > 0 ? o2[a2] = ct(s2[a2]) : o2[a2] = Number(s2[a2].trim()));
        ["rgba", "hsla", "hsva", "hwba", "hsia"].includes(e2) ? (e2 = e2.slice(0, -1), void 0 !== s2[3] && (i2 = ct(s2[3]))) : "cmyk" === e2 && o2.push(void 0 !== s2[3] ? ct(s2[3]) : 0);
      }
    }
    if (u2) {
      if (!/^#(([a-fA-F\d]{3}){1,2}|[a-fA-F\d]{8})$/.test(t2))
        try {
          return t2 = function(t3, r3) {
            if (void 0 === r3 && (r3 = false), t3 = t3.toLowerCase(), void 0 === at[t3]) {
              if (r3)
                throw new Error("Unknown color name: ".concat(t3, ")"));
              return t3;
            }
            return at[t3];
          }(t2, true), lt(t2, r2);
        } catch (t3) {
          throw new Error("Invalid Color");
        }
      o2 = h(t2);
    }
  }
  return [e2, o2, i2];
};
var pt = { thowParseError: false };
var ft = function() {
  function n2(t2, r2, n3) {
    this.cache = /* @__PURE__ */ new Map(), this._rgb = [0, 0, 0], this._alpha = 100;
    var e2 = { thowParseError: pt.thowParseError }, i2 = Object.assign({}, e2, null != n3 ? n3 : {});
    try {
      var a2 = function(t3) {
        var r3, n4 = { lab2rgb: j, hsl2rgb: s, hsv2rgb: b, xyz2rgb: N, hwb2rgb: w, hsi2rgb: d }, e3 = lt(t3), i3 = e3[0], a3 = e3[1], u3 = e3[2];
        if ("rgb" === i3)
          return [a3, u3];
        "lch" === i3 && (i3 = (r3 = ["xyz", L(a3[0], a3[1], a3[2])])[0], a3 = r3[1]);
        var h3 = a3[0], c2 = a3[1], p2 = a3[2], f2 = a3[3];
        if ("cmyk" === i3)
          return [l(h3, c2, p2, f2).map(function(t4) {
            return o(t4, 0, 255);
          }), u3];
        var v2 = "".concat(i3, "2rgb");
        if ("function" == typeof n4[v2])
          return [n4[v2](h3, c2, p2).map(function(t4) {
            return o(t4, 0, 255);
          }), u3];
        throw new Error("Invalid color");
      }(t2), u2 = a2[0], h2 = a2[1];
      this._alpha = h2, this._rgb = u2;
    } catch (t3) {
      if (i2.thowParseError)
        throw t3;
    }
    void 0 !== r2 && (this._alpha = o(r2, 0, 100));
  }
  return n2.prototype.red = function(t2) {
    return it(this, "r", t2);
  }, n2.prototype.green = function(t2) {
    return it(this, "g", t2);
  }, n2.prototype.blue = function(t2) {
    return it(this, "b", t2);
  }, n2.prototype.alpha = function(t2) {
    return void 0 === t2 ? this._alpha : (t2 = o(t2, 0, 100), new n2(this.rgb(), t2));
  }, n2.prototype.fadeIn = function(t2, r2) {
    return void 0 === t2 && (t2 = 10), t2 = r2 && "relative" === r2 ? this._alpha * t2 / 100 : t2, new n2(this.rgb(), o(this._alpha + t2, 0, 100));
  }, n2.prototype.fadeOut = function(t2, r2) {
    return void 0 === t2 && (t2 = 10), t2 = r2 && "relative" === r2 ? this._alpha * t2 / 100 : t2, new n2(this.rgb(), o(this._alpha - t2, 0, 100));
  }, n2.prototype.opacify = function(t2, r2) {
    return void 0 === t2 && (t2 = 10), this.fadeIn(t2, r2);
  }, n2.prototype.transparentize = function(t2, r2) {
    return void 0 === t2 && (t2 = 10), this.fadeOut(t2, r2);
  }, n2.prototype.hue = function(t2) {
    return it(this, "h", t2);
  }, n2.prototype.saturation = function(t2) {
    return it(this, "s", t2);
  }, n2.prototype.lightness = function(t2) {
    return it(this, "l", t2);
  }, n2.prototype.rgb = function(t2) {
    return r([], this._rgb, true);
  }, n2.prototype.rgba = function(t2) {
    return r(r([], this.rgb(false), true), [this._alpha], false);
  }, n2.prototype.cmyk = function(t2) {
    return c.apply(void 0, this._rgb);
  }, n2.prototype.hsl = function(t2) {
    return f.apply(void 0, this._rgb);
  }, n2.prototype.hsla = function(t2) {
    return r(r([], this.hsl(false), true), [this._alpha], false);
  }, n2.prototype.hsv = function(t2) {
    return v.apply(void 0, this._rgb);
  }, n2.prototype.hsi = function(t2) {
    return y.apply(void 0, this._rgb);
  }, n2.prototype.hwb = function(t2) {
    return g.apply(void 0, this._rgb);
  }, n2.prototype.xyz = function(t2) {
    return z.apply(void 0, this._rgb);
  }, n2.prototype.lab = function(t2) {
    return O.apply(void 0, this.xyz(false));
  }, n2.prototype.lch = function(t2) {
    return S.apply(void 0, this.lab(false));
  }, n2.prototype.xyY = function(t2) {
    return H.apply(void 0, this.xyz(false));
  }, n2.prototype.hex = function(t2) {
    void 0 === t2 && (t2 = 2);
    var n3 = 0 === t2 ? void 0 : 1 === t2 ? this._alpha : 100 === this._alpha ? void 0 : this._alpha, e2 = "color:hex:param_".concat(t2);
    if (this.cache.has(e2))
      return this.cache.get(e2);
    var o2 = u.apply(void 0, r(r([], this._rgb, false), [n3], false));
    return this.cache.set(e2, o2), o2;
  }, n2.prototype.lighten = function(t2, r2) {
    void 0 === t2 && (t2 = 5);
    var e2 = this.hsl(false), i2 = e2[0], a2 = e2[1], u2 = e2[2];
    return u2 = o(u2 += void 0 !== r2 && "relative" === r2 ? u2 * (t2 / 100) : t2, 0, 100), new n2(s(i2, a2, u2), this._alpha);
  }, n2.prototype.darken = function(t2, r2) {
    return void 0 === t2 && (t2 = 5), this.lighten(-t2, r2);
  }, n2.prototype.saturate = function(t2, r2) {
    void 0 === t2 && (t2 = 5);
    var e2 = this.hsl(false), i2 = e2[0], a2 = e2[1], u2 = e2[2];
    return a2 = o(a2 += void 0 !== r2 && "relative" === r2 ? a2 * (t2 / 100) : t2, 0, 100), new n2(s(i2, a2, u2), this._alpha);
  }, n2.prototype.desaturate = function(t2, r2) {
    return void 0 === t2 && (t2 = 5), this.saturate(-t2, r2);
  }, n2.prototype.spin = function(t2) {
    var r2 = this.hsl(false), e2 = r2[0], o2 = r2[1], i2 = r2[2];
    return new n2(s(e2 = (e2 + t2 % 360 + 360) % 360, o2, i2), this._alpha);
  }, n2.prototype.adjustHue = function(t2) {
    return this.spin(t2);
  }, n2.prototype.complement = function() {
    return this.spin(180);
  }, n2.prototype.invert = function() {
    var t2 = this._rgb.map(function(t3) {
      return 255 - t3;
    });
    return new n2([t2[0], t2[1], t2[2]], this._alpha);
  }, n2.prototype.mix = function(t2, r2) {
    return void 0 === r2 && (r2 = 50), D(this, t2, 100 - o(r2, 0, 100));
  }, n2.prototype.luma = function() {
    var t2 = this._rgb.map(function(t3) {
      return (t3 /= 255) <= 0.03928 ? t3 / 12.92 : Math.pow((t3 + 0.055) / 1.055, 2.4);
    });
    return 0.2126 * t2[0] + 0.7152 * t2[1] + 0.0722 * t2[2];
  }, n2.prototype.brightness = function() {
    var t2 = this._rgb;
    return function(t3, r2, n3) {
      return (299 * t3 + 587 * r2 + 114 * n3) / 1e3 / 255 * 100;
    }(t2[0], t2[1], t2[2]);
  }, n2.prototype.deltaE = function(t2, r2, n3) {
    return void 0 === r2 && (r2 = "CMC"), et(this, t2, r2, n3);
  }, n2.prototype.visibility = function(t2, r2) {
    return ot(this, t2, r2);
  }, t([q(0, 1, true, 0), R("color:rgb")], n2.prototype, "rgb", null), t([q(0, 1, true, 0)], n2.prototype, "rgba", null), t([q(0, 1, true, 0), R("color:cmyk")], n2.prototype, "cmyk", null), t([q(0, 1, true, 0), R("color:hsl")], n2.prototype, "hsl", null), t([q(0, 1, true, 0)], n2.prototype, "hsla", null), t([q(0, 1, true, 0), R("color:hsv")], n2.prototype, "hsv", null), t([q(0, 1, true, 0), R("color:hsi")], n2.prototype, "hsi", null), t([q(0, 1, true, 0), R("color: hwb")], n2.prototype, "hwb", null), t([q(2, 1, true, 0), R("color:xyz")], n2.prototype, "xyz", null), t([q(2, 1, true, 0), R("color:lab")], n2.prototype, "lab", null), t([q(2, 1, true, 0), R("color:lch")], n2.prototype, "lch", null), t([q(2, 1, true, 0), R("color:xyY")], n2.prototype, "xyY", null), t([R("color:luma")], n2.prototype, "luma", null), n2;
}();
var st = function(t2, r2, n2, e2) {
  return new ft([t2, r2, n2], e2);
};
var vt = function(t2, r2, n2, e2) {
  return new ft(s(t2, r2, n2), e2);
};
var bt = function(t2, r2, n2, e2) {
  return new ft(b(t2, r2, n2), e2);
};
var yt = function(t2, r2, n2, e2) {
  return new ft(d(t2, r2, n2), e2);
};
var dt = function(t2, r2, n2, e2) {
  return new ft(w(t2, r2, n2), e2);
};
var gt = function(t2, r2, n2, e2) {
  return new ft(N(t2, r2, n2), e2);
};
var wt = function(t2, r2, n2, e2) {
  return new ft(j(t2, r2, n2), e2);
};
var mt = function(t2, r2, n2, e2) {
  return new ft(N.apply(void 0, L(t2, r2, n2)), e2);
};
function Mt(t2, r2, n2) {
  return new ft(t2, r2, n2);
}
Mt.config = function(t2) {
  Object.assign(pt, t2);
}, Mt.random = function() {
  var t2 = a(0, 255), r2 = a(0, 255), n2 = a(0, 255);
  return new ft([t2, r2, n2]);
}, Mt.convertor = Y, Mt.Color = ft, Mt.rgb = st, Mt.hsl = vt, Mt.hsv = bt, Mt.hsi = yt, Mt.hwb = dt, Mt.xyz = gt, Mt.lab = wt, Mt.lch = mt, Mt.mix = D, Mt.deltaE = et, Mt.utils = { roundDecimal: i, randomRange: a }, Mt.useNames = function(t2, r2) {
  return function(t3, r3) {
    if (void 0 !== r3 && "function" == typeof r3) {
      var n2 = {};
      for (var e2 in t3) {
        var o2 = r3(e2, t3[e2]), i2 = o2[0], a2 = o2[1];
        n2[i2] = a2;
      }
      Object.assign(at, n2);
    } else
      Object.assign(at, t3);
  }(t2, r2), Mt;
};

// src/components/PaletteItem.ts
var import_obsidian3 = require("obsidian");

// src/utils/EventEmitter.ts
var EventEmitter = class {
  constructor() {
    this.eventListeners = {};
  }
  on(eventName, listener) {
    var _a;
    const listeners = (_a = this.eventListeners[eventName]) != null ? _a : /* @__PURE__ */ new Set();
    listeners.add(listener);
    this.eventListeners[eventName] = listeners;
  }
  off(eventName, listener) {
    var _a;
    const listeners = (_a = this.eventListeners[eventName]) != null ? _a : /* @__PURE__ */ new Set();
    listeners.delete(listener);
    this.eventListeners[eventName] = listeners;
  }
  emit(eventName, ...args) {
    var _a;
    const listeners = (_a = this.eventListeners[eventName]) != null ? _a : /* @__PURE__ */ new Set();
    for (const listener of listeners) {
      listener(...args);
    }
  }
  clear() {
    this.eventListeners = {};
  }
};

// src/components/PaletteItem.ts
var PaletteItem = class {
  constructor(container, color, settings) {
    this.container = container.createEl("div");
    this.color = color.trim();
    this.settings = settings;
    this.emitter = new EventEmitter();
    this.load();
  }
  load() {
    const csColor = Mt(this.color);
    this.container.style.setProperty("--palette-background-color", this.color);
    this.container.style.setProperty("--palette-column-flex-basis", (this.settings.height / this.settings.colorCount / 2).toString() + "px");
    const incompatibleSettings = this.settings.direction === "row" /* Row */;
    if (this.settings.editMode && !incompatibleSettings) {
      new EditMode(this.container, this.color, this.settings, (e2) => this.emitter.emit("trash", e2), (alias) => this.emitter.emit("alias", alias));
    } else {
      if (this.settings.aliasMode === "Both" /* Both */ || this.settings.alias == null || this.settings.alias.trim() === "") {
        let childText = this.container.createEl("span", { text: this.color.toUpperCase() });
        childText.style.setProperty("--palette-color", getForegroundColor(csColor));
      }
      let childAlias = this.container.createEl("span", { text: this.settings.alias });
      childAlias.style.setProperty("--palette-color", getForegroundColor(csColor));
    }
    this.container.addEventListener("click", (e2) => this.emitter.emit("click", e2));
  }
  /**
   * Removes listeners
   */
  unload() {
    this.emitter.clear();
  }
};
var EditMode = class {
  constructor(colorContainer, color, settings, onTrash, onAlias) {
    this.color = color;
    this.settings = settings;
    this.onTrash = onTrash;
    this.onAlias = onAlias;
    const csColor = Mt(color);
    const contrastColor = getForegroundColor(csColor);
    this.container = colorContainer.appendChild(createEl("div"));
    this.container.addClass("edit-container");
    this.container.style.setProperty("--edit-background-color", color);
    this.container.style.setProperty("--edit-color", contrastColor);
    this.span = this.container.createEl("span");
    this.span.setText(settings.alias || color.toUpperCase());
    this.span.style.setProperty("--edit-font-size", `${this.getAdjustedFontSize(settings.colorCount)}px`);
    this.trash = new import_obsidian3.ButtonComponent(this.container).setIcon("trash-2").setTooltip("Remove").onClick((e2) => this.onTrash(e2));
    this.trash.buttonEl.addEventListener("mouseover", (e2) => {
      this.trash.setCta();
    });
    this.trash.buttonEl.addEventListener("mouseout", (e2) => {
      this.trash.removeCta();
    });
    this.span.addEventListener("click", (e2) => {
      e2.stopPropagation();
      this.setEditable(true);
      this.span.focus();
    });
    this.span.addEventListener("contextmenu", (e2) => {
      e2.stopPropagation();
      this.span.setText(this.color.toUpperCase());
      this.settings.alias = "";
      this.onAlias(this.settings.alias);
    });
    this.span.addEventListener("keypress", (e2) => {
      if (e2.key === "Enter") {
        this.setAlias();
        this.setEditable(false);
      }
    });
    this.span.addEventListener("focusout", (e2) => {
      this.setAlias();
      this.setEditable(false);
    });
    this.storedAlias = this.span.getText();
  }
  setAlias() {
    if (this.span.getText().trim() === "")
      this.span.setText(this.storedAlias);
    else if (this.span.getText() !== this.color) {
      this.settings.alias = this.span.getText();
      this.onAlias(this.settings.alias);
    }
  }
  setEditable(editable) {
    if (editable === true) {
      this.storedAlias = this.span.getText();
      this.span.setText("");
    }
    this.span.contentEditable = `${editable}`;
    this.span.toggleClass("color-span-editable", editable);
  }
  /**
   * Calculate font size based on number of colors
   */
  getAdjustedFontSize(colorsCount) {
    const minFontSize = 10;
    const baseFontSize = 16;
    return Math.max(minFontSize, baseFontSize - colorsCount);
  }
};

// src/utils/dragDropUtils.ts
var DragDrop = class {
  constructor(dropzones, draggables, onDrop) {
    this.dropzones = dropzones;
    this.draggables = draggables;
    this.result = { beforeElement: null, insertedElement: null, afterElement: null, order: this.draggables };
    this.onDrop = onDrop;
    this.load();
  }
  dragStart(draggable, e2) {
    draggable.toggleClass("is-dragging", true);
  }
  dragOver(dropzone, e2) {
    if (e2.dataTransfer) {
      const hasElement = Array.from(e2.dataTransfer.items).some((item) => {
        return item.kind !== "element";
      });
      if (hasElement)
        return;
    }
    e2.preventDefault();
    this.result.beforeElement = this.getDragBeforeElement(e2.clientX);
    this.result.insertedElement = this.getDraggingElement();
    this.result.afterElement = this.getDragAfterElement(e2.clientX);
    const insertedIndex = this.draggables.indexOf(this.result.insertedElement);
    if (this.result.afterElement === null) {
      dropzone.appendChild(this.result.insertedElement);
      this.result.order.splice(insertedIndex, 1);
      this.result.order.push(this.result.insertedElement);
    } else {
      dropzone.insertBefore(this.result.insertedElement, this.result.afterElement);
      this.result.order.splice(insertedIndex, 1);
      const afterIndex = this.draggables.indexOf(this.result.afterElement);
      this.result.order.splice(afterIndex, 0, this.result.insertedElement);
    }
  }
  dragEnd(draggable, e2) {
    draggable.toggleClass("is-dragging", false);
    this.onDrop(e2, this.result);
    this.result = { beforeElement: null, insertedElement: null, afterElement: null, order: this.draggables };
  }
  load() {
    for (let draggable of this.draggables) {
      draggable.setAttribute("draggable", "true");
      draggable.addEventListener("dragstart", (e2) => this.dragStart(draggable, e2));
      draggable.addEventListener("dragend", (e2) => this.dragEnd(draggable, e2));
    }
    for (let dropzone of this.dropzones) {
      dropzone.addEventListener("dragover", (e2) => this.dragOver(dropzone, e2));
    }
  }
  unload() {
    for (let draggable of this.draggables) {
      draggable.removeEventListener("dragstart", (e2) => this.dragStart(draggable, e2));
      draggable.removeEventListener("dragend", (e2) => this.dragEnd(draggable, e2));
    }
    for (let dropzone of this.dropzones) {
      dropzone.removeEventListener("dragover", (e2) => this.dragOver(dropzone, e2));
    }
  }
  /**
   * @returns The element which is being dragged
   */
  getDraggingElement() {
    return this.draggables.filter((draggable) => draggable.hasClass("is-dragging"))[0];
  }
  /**
   * @returns All draggable elements not being dragged
   */
  getDraggableElements() {
    return this.draggables.filter((draggable) => !draggable.hasClass("is-dragging"));
  }
  /**
   * Gets the closest element before the dragged element
   */
  getDragBeforeElement(x2) {
    return this.getDraggableElements().reduce(
      (closest, child) => {
        const rect = child.getBoundingClientRect();
        const leftPosition = x2 - rect.left;
        const halfChildWidth = rect.width / 2;
        const offset = leftPosition - halfChildWidth;
        if (offset > 0 && offset < closest.offset)
          return { offset, element: child };
        else
          return closest;
      },
      // Initial closest value
      { offset: Number.POSITIVE_INFINITY, element: null }
    ).element;
  }
  /**
   * Gets the closest element after the dragged element
   */
  getDragAfterElement(x2) {
    return this.getDraggableElements().reduce(
      (closest, child) => {
        const rect = child.getBoundingClientRect();
        const leftPosition = x2 - rect.left;
        const halfChildWidth = rect.width / 2;
        const offset = leftPosition - halfChildWidth;
        if (offset < 0 && offset > closest.offset)
          return { offset, element: child };
        else
          return closest;
      },
      // Initial closest value
      { offset: Number.NEGATIVE_INFINITY, element: null }
    ).element;
  }
};

// src/utils/canvasUtils.ts
var import_validate_color = __toESM(require_lib());
var Canvas = class {
  constructor(container) {
    this.container = container;
    this.container.addClass("palette-canvas");
    this.canvas = container.appendChild(document.createElement("canvas"));
    this.tooltip = container.appendChild(document.createElement("section"));
    this.tooltip.addClasses(["tooltip", "palette-tooltip"]);
    this.tooltipText = this.tooltip.appendChild(document.createElement("span"));
    this.context = this.canvas.getContext("2d", { willReadFrequently: true, alpha: true });
    this.emitter = new EventEmitter();
    if (!this.isTouchEnabled())
      this.canvas.addEventListener("mousemove", (e2) => this.setTooltipPosition(e2.clientX, e2.clientY));
    else
      this.canvas.addEventListener("touchmove", (e2) => this.setTooltipPosition(e2.touches[0].clientX, e2.touches[0].clientY));
    this.canvas.addEventListener("click", (e2) => this.emitter.emit("click", this.getCanvasHex(e2.clientX, e2.clientY)));
  }
  /**
   * Creates a new gradient canvas
   * @param colors 
   * @param width 
   * @param height 
   * @param direction
   * @param onClick canvas click callback
   */
  createGradient(colors, width, height, direction) {
    this.canvas.width = width;
    this.canvas.height = height;
    let gradient = direction === "column" /* Column */ ? this.context.createLinearGradient(0, 0, width, 0) : this.context.createLinearGradient(0, 0, 0, height);
    let colorStops = [];
    for (const [i2, color] of colors.entries()) {
      if ((0, import_validate_color.default)(color)) {
        gradient.addColorStop(i2 / (colors.length - 1), color);
        colorStops.push(color);
      }
    }
    if (colorStops.length <= 1)
      throw new Error("There are not enough valid color stops to create the gradient.");
    this.context.fillStyle = gradient || "#000";
    this.context.fillRect(0, 0, width, height);
    this.canvas.toggleClass("gradient", true);
    this.canvas.style.setProperty("--palette-column-flex-basis", (height / colors.length / 2).toString() + "px");
  }
  // Retrieves the hex from the mouse position
  getCanvasHex(clientX, clientY) {
    const canvasBounds = this.canvas.getBoundingClientRect();
    let x2 = clientX - canvasBounds.left;
    let y2 = clientY - canvasBounds.top;
    let [r2, g2, b2, a2] = this.context.getImageData(x2, y2, 1, 1).data;
    const alpha = Math.round(a2 / 255 * 100);
    let hex = alpha !== 255 ? Mt([r2, g2, b2, alpha]).hex() : Mt([r2, g2, b2]).hex();
    return hex;
  }
  /**
   * Sets the tooltip position based on current cursor or touch position
   */
  setTooltipPosition(clientX, clientY) {
    const rect = this.canvas.getBoundingClientRect();
    let tooltipWidth = this.tooltip.offsetWidth;
    let tooltipHeight = this.tooltip.offsetHeight;
    let leftPosition = clientX - rect.left > rect.width / 2 ? clientX - rect.left - 56 : clientX - rect.left + 64;
    let halfTooltipWidth = tooltipWidth / 2;
    if (leftPosition < 0 + halfTooltipWidth)
      leftPosition = 0 + halfTooltipWidth;
    else if (leftPosition + tooltipWidth > rect.width + halfTooltipWidth)
      leftPosition = rect.width - tooltipWidth + halfTooltipWidth;
    this.tooltip.style.left = leftPosition + "px";
    let topPosition = clientY - rect.top - tooltipHeight / 4;
    if (topPosition < 0)
      topPosition = 0;
    else if (topPosition + tooltipHeight > rect.height)
      topPosition = rect.height - tooltipHeight;
    this.tooltip.style.top = topPosition + "px";
    const hex = this.getCanvasHex(clientX, clientY);
    this.tooltipText.setText(hex.toUpperCase());
  }
  /**
   * Checks for touch device
   */
  isTouchEnabled() {
    return "ontouchstart" in window || navigator.maxTouchPoints > 0;
  }
};

// src/components/Palette.ts
var Palette = class {
  constructor(colors, settings, containerEl, pluginSettings, editMode = false) {
    this.containerEl = containerEl;
    this.containerEl.addClass("palette-container");
    this.pluginSettings = pluginSettings;
    this.status = "Valid" /* VALID */;
    this.showNotice = true;
    this.editMode = editMode;
    this.paletteItems = [];
    this.emitter = new EventEmitter();
    this.setDefaults(colors, settings);
    this.load();
    let observerDebouncers = /* @__PURE__ */ new WeakMap();
    const resizeObserver = new ResizeObserver((palettes) => {
      palettes.forEach((palette) => {
        clearTimeout(observerDebouncers.get(palette.target));
        observerDebouncers.set(palette.target, setTimeout(() => this.emitter.emit("resized", palette), this.pluginSettings.reloadDelay));
      });
    });
    resizeObserver.observe(this.containerEl);
    this.emitter.on("resized", (palette) => this.onResized(palette));
  }
  /**
   * Sets the initial defaults
   */
  setDefaults(colors, settings) {
    if (typeof settings === "string") {
      this.settings = pluginToPaletteSettings(this.pluginSettings);
      this.status = "Invalid Settings" /* INVALID_SETTINGS */;
    }
    if (typeof settings === "object") {
      this.settings = { ...pluginToPaletteSettings(this.pluginSettings), ...settings };
    }
    if (typeof settings === "undefined") {
      this.settings = pluginToPaletteSettings(this.pluginSettings);
    }
    if (typeof colors === "string") {
      this.colors = [];
      this.status = this.status === "Invalid Settings" /* INVALID_SETTINGS */ ? "Invalid Colors & Settings" /* INVALID_COLORS_AND_SETTINGS */ : "Invalid Colors" /* INVALID_COLORS */;
    }
    if (typeof colors === "object") {
      this.colors = colors;
    }
  }
  /**
   * Loads the palette
   */
  load() {
    this.createPalette(this.colors, this.settings);
    if (this.editMode && !this.settings.gradient) {
      this.dropzone.toggleClass("palette-hover", !this.pluginSettings.stabilityWhileEditing);
      this.dropzone.toggleClass("palette-hide-text", !this.pluginSettings.stabilityWhileEditing);
      this.dragDrop = new DragDrop([this.dropzone], Array.from(this.dropzone.children), (e2, res) => {
        this.paletteItems.sort((a2, b2) => {
          return res.order.indexOf(a2.container) - res.order.indexOf(b2.container);
        });
        this.colors = this.paletteItems.map((item) => item.color);
        this.settings.aliases = this.paletteItems.map((item) => item.settings.alias);
        this.emitter.emit("changed", this.colors, this.settings);
        this.reload();
      });
    }
    this.dropzone.toggleClass("edit-mode", this.editMode);
  }
  /**
   * Unloads the palette
   */
  unload() {
    this.emitter.clear();
    this.paletteItems.forEach((item) => item.unload());
    this.containerEl.empty();
    this.paletteItems = [];
    this.paletteCanvas = void 0;
  }
  /**
   * Reloads the palette contents
   * @param resize Whether the palette is reloading because of a resize (defaults to false)
   */
  reload(resize = { height: 0, width: 0 }) {
    const isZero = resize.height === 0 && resize.width === 0;
    if (!isZero) {
      this.setWidth(this.getPaletteWidth(resize.width));
      return;
    }
    this.showNotice = !resize;
    this.unload();
    this.setDefaults(this.colors, this.settings);
    this.load();
    this.showNotice = true;
  }
  onResized(palette) {
    const size = { height: palette.contentRect.height, width: palette.contentRect.width };
    const isZero = size.height === 0 && size.width === 0;
    if (!isZero)
      this.reload({ height: size.height, width: size.width });
  }
  /**
   * Sets the width of the palette
   */
  setWidth(width) {
    if (this.settings.gradient && this.paletteCanvas)
      this.paletteCanvas.createGradient(this.colors, width, this.settings.height, this.settings.direction);
    this.dropzone.style.setProperty("--palette-width", `${width}px`);
    this.containerEl.toggleClass("palette-scroll", width > defaultSettings.width);
  }
  /**
   * @returns `user` OR `auto` width based on which is more appropriate
   */
  getPaletteWidth(resizeOffset = 0) {
    const paletteOffset = resizeOffset !== 0 ? resizeOffset : this.dropzone.offsetWidth;
    if (this.settings.width > defaultSettings.width)
      return this.settings.width;
    if (paletteOffset < this.settings.width && paletteOffset > 0)
      return paletteOffset;
    else
      return this.settings.width;
  }
  /**
   * Creates a new notice using pre-set settings
   * @param message Message to display
   */
  createNotice(message) {
    this.showNotice && new import_obsidian4.Notice(message, this.pluginSettings.noticeDuration);
  }
  setEditMode(editMode) {
    this.editMode = editMode;
    this.emitter.emit("editMode", editMode);
  }
  getEditMode() {
    return this.editMode;
  }
  /**
   * Create new palette contents based on colors & settings
   * @param colors 
   * @param settings 
   */
  createPalette(colors, settings) {
    this.dropzone = this.containerEl.createEl("div");
    this.dropzone.addClass("palette");
    this.dropzone.style.setProperty("--palette-corners", this.pluginSettings.corners ? "5px" : "0px");
    this.dropzone.style.setProperty("--palette-direction", settings.direction === "row" /* Row */ ? "column" /* Column */ : "row" /* Row */);
    this.dropzone.style.setProperty("--not-palette-direction", settings.direction);
    this.dropzone.style.setProperty("--palette-height", `${settings.height}px`);
    this.dropzone.toggleClass("palette-hover", settings.hover);
    this.dropzone.toggleClass("palette-hide-text", settings.hideText);
    try {
      if (this.status !== "Valid" /* VALID */)
        throw new PaletteError(this.status);
      this.settings.gradient ? this.createGradientPalette(this.dropzone, colors) : this.createColorPalette(this.dropzone, colors, settings);
      this.setWidth(this.getPaletteWidth());
    } catch (err) {
      if (err instanceof PaletteError)
        this.createInvalidPalette(err.status, err.message);
      else
        this.createNotice(err);
    }
  }
  createGradientPalette(container, colors) {
    if (colors.length <= 1)
      throw new PaletteError("Invalid Gradient" /* INVALID_GRADIENT */);
    this.paletteCanvas = new Canvas(container);
    this.paletteCanvas.emitter.on("click", async (color) => await copyToClipboard(color.toUpperCase(), this.pluginSettings.copyFormat));
  }
  createColorPalette(container, colors, settings) {
    var _a;
    for (const [i2, color] of colors.entries()) {
      const paletteItem = new PaletteItem(
        container,
        color,
        {
          aliasMode: this.pluginSettings.aliasMode,
          editMode: this.editMode,
          stabilityWhileEditing: this.pluginSettings.stabilityWhileEditing,
          height: settings.height,
          direction: settings.direction,
          hover: settings.hover,
          hideText: settings.hideText,
          alias: ((_a = settings.aliases) == null ? void 0 : _a[i2]) || "",
          colorCount: colors.length
        }
      );
      paletteItem.emitter.on("click", async (e2) => await copyToClipboard(color.toUpperCase(), this.pluginSettings.copyFormat));
      paletteItem.emitter.on("trash", (e2) => {
        e2.stopPropagation();
        const deletedIndex = this.colors.indexOf(color);
        let colors2 = this.colors;
        let settings2 = this.settings;
        colors2.splice(deletedIndex, 1);
        settings2.aliases.splice(deletedIndex, 1);
        this.emitter.emit("changed", colors2, settings2);
        this.reload();
      });
      paletteItem.emitter.on("alias", (alias) => {
        const aliasIndex = this.colors.findIndex((val) => val === color);
        for (let i3 = 0; i3 < aliasIndex; i3++) {
          if (!this.settings.aliases[i3])
            this.settings.aliases[i3] = "";
        }
        this.settings.aliases[aliasIndex] = alias;
      });
      this.paletteItems.push(paletteItem);
    }
  }
  /**
   * Create invalid palette based on palette status
   * @param type Palette status type
   */
  createInvalidPalette(type, message = "") {
    this.status = type;
    this.dropzone.style.setProperty("--palette-height", "150px");
    this.dropzone.style.setProperty("--palette-width", `100%`);
    const invalidSection = this.dropzone.createEl("section");
    invalidSection.toggleClass("invalid", true);
    const invalidSpan = invalidSection.createEl("span");
    let defaultMessage = "Invalid palette";
    switch (type) {
      case "Invalid Colors" /* INVALID_COLORS */:
        invalidSpan.setText("Invalid Colors" /* INVALID_COLORS */);
        defaultMessage = "Colors are defined incorrectly";
        this.createNotice(`Palette:
${message ? message : defaultMessage}`);
        break;
      case "Invalid Settings" /* INVALID_SETTINGS */:
        invalidSpan.setText("Invalid Settings" /* INVALID_SETTINGS */);
        defaultMessage = "Issues parsing settings";
        this.createNotice(`Palette:
${message ? message : defaultMessage}`);
        break;
      case "Invalid Colors & Settings" /* INVALID_COLORS_AND_SETTINGS */:
        invalidSpan.setText("Invalid Colors & Settings" /* INVALID_COLORS_AND_SETTINGS */);
        defaultMessage = "Colors and settings are defined incorrectly";
        this.createNotice(`Palette:
${message ? message : defaultMessage}`);
        break;
      case "Invalid Gradient" /* INVALID_GRADIENT */:
        invalidSpan.setText("Invalid Gradient" /* INVALID_GRADIENT */);
        defaultMessage = "Gradients require more than 1 color to display";
        this.createNotice(`Palette:
${message ? message : defaultMessage}`);
        break;
    }
    if (this.pluginSettings.errorPulse) {
      this.dropzone.style.setProperty("--notice-duration", (this.pluginSettings.noticeDuration / 1e3 / 2).toString() + "s");
      this.dropzone.toggleClass("palette-pulse", true);
      setTimeout(() => this.dropzone.toggleClass("palette-pulse", false), this.pluginSettings.noticeDuration);
    }
  }
};
var PaletteError = class extends Error {
  constructor(status, message = "") {
    super(message);
    this.status = status;
  }
};

// src/utils/generateUtils.ts
var Combination = /* @__PURE__ */ ((Combination2) => {
  Combination2["Complimentary"] = "Complimentary";
  Combination2["Monochromatic"] = "Monochromatic";
  Combination2["Analogous"] = "Analogous";
  Combination2["Triadic"] = "Triadic";
  Combination2["Tetradic"] = "Tetradic";
  Combination2["Random"] = "Random";
  return Combination2;
})(Combination || {});
function generateColors(combination, optional = { baseColor: Mt.random() }) {
  let { baseColor, settings } = optional;
  if (!baseColor)
    baseColor = Mt.random();
  let colors = [];
  switch (combination) {
    case "Complimentary" /* Complimentary */:
      colors = [baseColor.hex(), baseColor.complement().hex()];
      if (settings)
        settings.aliases = ["Base", "Complimentary Color"];
      break;
    case "Monochromatic" /* Monochromatic */:
      const lightest = baseColor.lighten(20);
      const lighter = baseColor.lighten(10);
      const darker = baseColor.darken(10);
      const darkest = baseColor.darken(20);
      colors = [lightest.hex(), lighter.hex(), baseColor.hex(), darker.hex(), darkest.hex()];
      if (settings)
        settings.aliases = ["Lightest", "Lighter", "Base", "Darker", "Darkest"];
      break;
    case "Analogous" /* Analogous */:
      const east = baseColor.adjustHue(-25);
      const west = baseColor.adjustHue(25);
      colors = [east.hex(), baseColor.hex(), west.hex()];
      if (settings)
        settings.aliases = ["Analogous East", "Base", "Analogous West"];
      break;
    case "Triadic" /* Triadic */:
      const hex120 = baseColor.spin(120);
      const hex240 = baseColor.spin(240);
      colors = [baseColor.hex(), hex120.hex(), hex240.hex()];
      if (settings)
        settings.aliases = ["Triadic First", "Base", "Triadic Third"];
      break;
    case "Tetradic" /* Tetradic */:
      const hex90 = baseColor.spin(90);
      const hex180 = baseColor.spin(180);
      const hex270 = baseColor.spin(270);
      colors = [baseColor.hex(), hex90.hex(), hex180.hex(), hex270.hex()];
      if (settings)
        settings.aliases = ["Base", "Tetradic Second", "Tetradic Third", "Tetradic Fourth"];
      break;
    case "Random" /* Random */:
      const randomNumber = Math.max(Math.round(Math.random() * 10), 2);
      let randomColors = [];
      for (let i2 = 0; i2 < randomNumber; i2++) {
        randomColors.push(Mt.random().hex());
      }
      colors = randomColors;
      if (settings)
        settings.aliases = [];
      break;
  }
  return { colors, settings };
}

// src/utils/imageUtils.ts
var import_quantize = __toESM(require_quantize());
var CanvasImage = class extends Canvas {
  constructor(container, imageURL, smoothing = false) {
    super(container);
    /**
     * Waits for loading variable to equal true
     */
    this.waitForLoading = () => new Promise((resolve) => {
      const checkLoading = setInterval(() => {
        if (!this.loading) {
          clearInterval(checkLoading);
          resolve(true);
        }
      }, 100);
    });
    this.canvas.addClass("image");
    this.loading = true;
    this.image = new Image();
    this.image.crossOrigin = "anonymous";
    if (imageURL)
      this.image.src = imageURL;
    this.image.addEventListener("load", (e2) => this.loading = false);
    this.image.addEventListener("error", (e2) => {
      throw new Error("The URL provided could not be loaded.");
    });
    this.context.imageSmoothingEnabled = smoothing;
  }
  /**
   * Updates & loads the canvas image.
   * Attempts to preserve aspect ratio based on width.
   * @param width The canvas width
   * @param height The canvas height
   */
  update(imageURL, width, height) {
    this.image.src = imageURL;
    this.waitForLoading().then(() => {
      const aspectRatio = this.image.naturalHeight / this.image.naturalWidth;
      let newWidth = width;
      let newHeight = newWidth * aspectRatio;
      if (newHeight > height) {
        newWidth = height / aspectRatio;
        newHeight = height;
      }
      this.width = this.canvas.width = newWidth;
      this.height = this.canvas.height = newHeight;
      this.context.drawImage(this.image, 0, 0, newWidth, newHeight);
    });
  }
  /**
   * Gets the most frequent colors in an image
   * @param numColors Number of colors to return
   * @param quality Artificially reduce number of pixels (higher = less accurate but faster)
   * @returns Most frequent colors
   */
  async getPalette(numColors = 7, quality = 10) {
    const nColors = numColors <= 7 ? numColors : numColors + 1;
    await this.waitForLoading();
    const pixels = await this.createPixelArray(quality);
    if (!pixels)
      return null;
    const colorMap = (0, import_quantize.default)(pixels, nColors);
    return colorMap ? colorMap.palette() : [];
  }
  /**
   * Creates an array of pixels from the image
   * Inspired by colorthief
   * @param quality Artificially reduce number of pixels (higher = less accurate but faster)
   * @returns 
   */
  async createPixelArray(quality) {
    var _a;
    await this.waitForLoading();
    const pixelArray = [];
    const imageData = (_a = await this.getImageData()) == null ? void 0 : _a.data;
    if (!imageData)
      return null;
    const pixelCount = this.height * this.width;
    for (let i2 = 0; i2 < pixelCount; i2 += quality) {
      const offset = i2 * 4;
      const [r2, g2, b2, a2] = [imageData[offset + 0], imageData[offset + 1], imageData[offset + 2], imageData[offset + 3]];
      if (typeof a2 === "undefined" || a2 >= 125) {
        if (!(r2 > 250 && g2 > 250 && b2 > 250)) {
          pixelArray.push([r2, g2, b2]);
        }
      }
    }
    return pixelArray;
  }
  /**
   * Gets the image data from the canvas
   */
  async getImageData(x2 = 0, y2 = 0) {
    try {
      await this.waitForLoading();
      return this.context.getImageData(x2, y2, this.width, this.height);
    } catch (e2) {
      throw new Error("Failed to get image data.");
    }
  }
};

// src/components/EditorModal.ts
var EditorModal = class extends import_obsidian5.Modal {
  constructor(app, pluginSettings, onSubmit, palette) {
    super(app);
    this.onSubmit = onSubmit;
    this.pluginSettings = pluginSettings;
    this.settings = pluginToPaletteSettings(pluginSettings);
    this.colors = [];
    this.selectedInput = "Color Picker" /* Color_Picker */;
    this.combination = "Random" /* Random */;
    this.baseColor = void 0;
    this.palette = palette;
    const resizeObserver = new ResizeObserver((modals) => {
      for (const modal of modals) {
        for (const child of Array.from(modal.target.children)) {
          if (child.hasClass("modal")) {
            for (const modalChild of Array.from(child.children)) {
              if (modalChild.hasClass("palette-editor")) {
                this.modalRect = modalChild.getBoundingClientRect();
              }
            }
          }
        }
      }
    });
    resizeObserver.observe(this.containerEl);
  }
  onOpen() {
    this.contentEl.createEl("h1", { text: "Editor" });
    this.contentEl.addClass("palette-editor");
    const colorsContainer = this.contentEl.createEl("section");
    colorsContainer.createEl("h3").setText("Colors");
    let controlContainer = colorsContainer.appendChild(createDiv());
    controlContainer.addClass("control-container");
    const previewContainer = this.contentEl.createEl("section");
    previewContainer.createEl("h3");
    const settingsContainer = this.contentEl.createEl("section");
    settingsContainer.createEl("h3").setText("Settings");
    const colorPickerBtn = new import_obsidian5.ButtonComponent(controlContainer).setIcon("pipette").setTooltip("Color Picker").onClick((e2) => {
      changeSelectedInput("Color Picker" /* Color_Picker */);
    });
    const generateBtn = new import_obsidian5.ButtonComponent(controlContainer).setIcon("shuffle").setTooltip("Generate").onClick((e2) => {
      changeSelectedInput("Generate" /* Generate */);
    });
    const imageBtn = new import_obsidian5.ButtonComponent(controlContainer).setIcon("image").setTooltip("Image").onClick((e2) => {
      changeSelectedInput("Image" /* Image */);
    });
    const urlBtn = new import_obsidian5.ButtonComponent(controlContainer).setIcon("link").setTooltip("URL").onClick((e2) => {
      changeSelectedInput("URL" /* URL */);
    });
    let addColorsContainer = colorsContainer.appendChild(createEl("div"));
    addColorsContainer.addClass("colors-container");
    function changeSelectedInput(selectedInput) {
      resetStyle();
      switch (selectedInput) {
        case "Color Picker" /* Color_Picker */:
          colorPickerBtn.setCta();
          addColorsContainer.empty();
          createColorPicker(addColorsContainer);
          addColorsContainer.toggleClass("select-color-picker", true);
          break;
        case "Generate" /* Generate */:
          generateBtn.setCta();
          addColorsContainer.empty();
          createGenerate(addColorsContainer);
          addColorsContainer.toggleClass("select-generate", true);
          break;
        case "Image" /* Image */:
          imageBtn.setCta();
          addColorsContainer.empty();
          createImage(addColorsContainer);
          addColorsContainer.toggleClass("select-image", true);
          break;
        case "URL" /* URL */:
          urlBtn.setCta();
          addColorsContainer.empty();
          createURL(addColorsContainer);
          addColorsContainer.toggleClass("select-url", true);
          break;
      }
      function resetStyle() {
        colorPickerBtn.removeCta();
        generateBtn.removeCta();
        imageBtn.removeCta();
        urlBtn.removeCta();
        addColorsContainer.toggleClass("select-color-picker", false);
        addColorsContainer.toggleClass("select-generate", false);
        addColorsContainer.toggleClass("select-image", false);
        addColorsContainer.toggleClass("select-url", false);
      }
    }
    const createColorPicker = (addColorsContainer2) => {
      let addColors = new import_obsidian5.Setting(addColorsContainer2).setName("Color Picker").setDesc("Use handpicked colors");
      const colorPickerInput = new import_obsidian5.ColorComponent(addColors.controlEl).onChange((value) => {
        this.colors.push(value);
        this.settings.aliases.push("");
        updatePalettePreview();
      });
    };
    const createGenerate = (addColorsContainer2) => {
      let addColors = new import_obsidian5.Setting(addColorsContainer2).setName("Generate").setDesc("Generate colors based on color theory");
      const dropdownInput = new import_obsidian5.DropdownComponent(addColors.controlEl);
      Object.keys(Combination).forEach((combination) => dropdownInput.addOption(combination, combination));
      dropdownInput.setValue(this.combination).onChange((value) => {
        this.combination = value;
        colorPickerInput.setDisabled(this.combination === "Random" /* Random */ ? true : false);
      });
      const colorPickerInput = new import_obsidian5.ColorComponent(addColors.controlEl).onChange((value) => {
        this.baseColor = Mt(value);
      }).setDisabled(this.combination === "Random" /* Random */ ? true : false);
      const colorPicker = Array.from(addColors.controlEl.children)[1];
      colorPicker.addEventListener("contextmenu", (e2) => {
        colorPickerInput.setValue(Mt("#000").hex());
        this.baseColor = void 0;
      });
      const buttonInput = new import_obsidian5.ButtonComponent(addColors.controlEl).setIcon("shuffle").setTooltip("Loads the generated colors").onClick((e2) => {
        const generated = generateColors(this.combination, { baseColor: this.baseColor, settings: this.settings });
        this.colors = generated.colors;
        if (generated.settings)
          this.settings = generated.settings;
        updatePalettePreview();
      });
    };
    const createImage = (addColorsContainer2) => {
      let fileURL = "";
      let addColors = new import_obsidian5.Setting(addColorsContainer2).setClass("add-colors").setName("Image").setDesc("Convert image into palette");
      const inputContainer = addColors.controlEl.appendChild(createEl("div"));
      const selectContainer = inputContainer.appendChild(createEl("div"));
      const urlInput = new import_obsidian5.TextComponent(selectContainer).setPlaceholder("Enter URL or select file").onChange((value) => fileURL = value);
      const loadButton = new import_obsidian5.ButtonComponent(selectContainer).setIcon("arrow-up-to-line").setTooltip("Right click to clear URL").onClick(async (e2) => {
        try {
          if (urlInput.getValue() !== "") {
            if (URL.canParse(urlInput.getValue()))
              await updateImagePreview(urlInput.getValue());
            else
              throw new Error("URL provided is not valid.");
          } else
            fileInput.click();
        } catch (e3) {
          new import_obsidian5.Notice(e3);
        }
      });
      loadButton.buttonEl.addEventListener("contextmenu", () => urlInput.setValue(""));
      const fileSelector = new import_obsidian5.TextComponent(selectContainer);
      const fileInput = fileSelector.inputEl;
      fileInput.type = "file";
      fileInput.accept = "image/*";
      fileInput.addEventListener("change", (e2) => {
        var _a;
        try {
          const reader = new FileReader();
          const file = (_a = e2.target.files) == null ? void 0 : _a[0];
          if (file)
            reader.readAsDataURL(file);
          reader.addEventListener("load", async () => {
            if (typeof reader.result === "string") {
              fileURL = reader.result;
              await updateImagePreview(fileURL);
            }
          });
          reader.addEventListener("error", () => {
            throw new Error("Error processing image.");
          });
        } catch (e3) {
          new import_obsidian5.Notice(e3);
        }
      });
      const sliderContainer = new import_obsidian5.Setting(addColorsContainer2).setName("Count").setDesc("Set the number of colors to generate from the image.");
      const countInput = new import_obsidian5.SliderComponent(sliderContainer.controlEl).setLimits(4, 12, 1).setDynamicTooltip().setValue(8).onChange(async (value) => await updateImagePreview(fileURL));
      const imageContainer = new import_obsidian5.Setting(addColorsContainer2);
      imageContainer.setClass("image-preview");
      imageContainer.setClass("hide-image-preview");
      let hex;
      const canvasImage = new CanvasImage(imageContainer.controlEl);
      canvasImage.canvas.style.setProperty("border-radius", this.pluginSettings.corners ? "5px" : "0px");
      canvasImage.canvas.addEventListener("mousemove", async (e2) => {
        hex = canvasImage.getCanvasHex(e2.clientX, e2.clientY);
      });
      canvasImage.canvas.addEventListener("click", (e2) => {
        if (!hex)
          return;
        this.colors.push(hex);
        this.settings.aliases.push("");
        updatePalettePreview();
      });
      canvasImage.image.addEventListener("load", () => {
        imageContainer.settingEl.toggleClass("hide-image-preview", false);
      });
      canvasImage.image.addEventListener("error", (e2) => {
        new import_obsidian5.Notice("The URL provided could not be loaded.");
      });
      const updateImagePreview = async (url) => {
        if (!url)
          return;
        canvasImage.update(url, this.modalRect.width, this.modalRect.height);
        const colors = await canvasImage.getPalette(countInput.getValue());
        if (colors) {
          this.colors = colors.map((color) => Mt(color).hex(0));
          this.settings.aliases = [];
          updatePalettePreview();
        }
      };
    };
    const createURL = (addColorsContainer2) => {
      let addColors = new import_obsidian5.Setting(addColorsContainer2).setName("URL").setDesc("Only coolors.co & colorhunt.co are currently supported.");
      const textInput = new import_obsidian5.TextComponent(addColors.controlEl).setPlaceholder("Enter URL");
      const buttonInput = new import_obsidian5.ButtonComponent(addColors.controlEl).setIcon("link").setTooltip("Right click to clear URL").onClick((e2) => {
        try {
          const urlText = textInput.getValue();
          if (!urlText.match(urlRegex))
            throw new Error("URL provided is not valid.");
          this.colors = parseUrl(urlText);
          this.settings.aliases = [];
          updatePalettePreview();
        } catch (e3) {
          new import_obsidian5.Notice(e3);
        }
      });
      buttonInput.buttonEl.addEventListener("contextmenu", () => {
        textInput.setValue("");
      });
    };
    changeSelectedInput(this.selectedInput);
    let palettePreview = previewContainer.appendChild(createDiv());
    palettePreview.addClass("palette-preview");
    const paletteContainer = palettePreview.appendChild(createDiv());
    this.colors = this.palette ? this.palette.colors : generateColors("Random" /* Random */).colors;
    this.settings = this.palette ? this.palette.settings : this.settings;
    const palette = new Palette(this.colors, this.settings, paletteContainer, this.pluginSettings, true);
    palette.emitter.on("changed", (colors, settings) => {
      let modifiedSettings = getModifiedSettings(settings);
      this.colors = colors;
      if (modifiedSettings)
        this.settings = { ...this.settings, ...modifiedSettings };
    });
    palettePreview.appendChild(palette.containerEl);
    const updatePalettePreview = () => {
      palette.colors = this.colors;
      palette.settings = this.settings;
      palette.reload();
    };
    new import_obsidian5.Setting(settingsContainer).setName("Height").addText((text) => {
      text.setValue(this.settings.height.toString()).onChange((value) => {
        try {
          if (!Number.isNaN(Number(value))) {
            this.settings.height = Number(value);
            updatePalettePreview();
          } else
            throw new Error("Please enter a number.");
        } catch (e2) {
          new import_obsidian5.Notice(e2);
        }
      });
    });
    new import_obsidian5.Setting(settingsContainer).setName("Width").setDesc("Caution - Might cause palette to display incorrectly.").addText((text) => {
      text.setValue(this.settings.width.toString()).onChange((value) => {
        try {
          if (!Number.isNaN(Number(value))) {
            this.settings.width = Number(value);
            updatePalettePreview();
          } else
            throw new Error("Please enter a number.");
        } catch (e2) {
          new import_obsidian5.Notice(e2);
        }
      });
    });
    new import_obsidian5.Setting(settingsContainer).setName("Direction").addDropdown((dropdown) => {
      dropdown.addOption("column" /* Column */, "column" /* Column */).addOption("row" /* Row */, "row" /* Row */).setValue(this.settings.direction.toString()).onChange((value) => {
        this.settings.direction = value;
        updatePalettePreview();
      });
    });
    new import_obsidian5.Setting(settingsContainer).setName("Gradient").addToggle((toggle) => {
      toggle.setValue(this.settings.gradient).onChange((value) => {
        this.settings.gradient = value;
        updatePalettePreview();
      });
    });
    new import_obsidian5.Setting(settingsContainer).setName("Hover").setDesc("Toggles whether palettes can be hovered").addToggle((toggle) => {
      toggle.setValue(this.settings.hover).onChange(async (value) => {
        this.settings.hover = value;
        updatePalettePreview();
      });
    });
    new import_obsidian5.Setting(settingsContainer).setName("Hide Text").setDesc("Disables color and alias visibility").addToggle((toggle) => {
      toggle.setValue(this.settings.hideText).onChange(async (value) => {
        this.settings.hideText = value;
        updatePalettePreview();
      });
    });
    new import_obsidian5.Setting(settingsContainer).setName("Override").setDesc("Disables color validation for full control (advanced)").addToggle((toggle) => {
      toggle.setValue(this.settings.override).onChange(async (value) => {
        this.settings.override = value;
        updatePalettePreview();
      });
    });
    new import_obsidian5.Setting(settingsContainer).addButton(
      (button) => button.setButtonText("Create").setCta().onClick(() => {
        try {
          if (this.colors.length === 0)
            this.colors = generateColors("Random" /* Random */).colors;
          this.onSubmit(this.colors, getModifiedSettings(this.settings));
          this.close();
        } catch (e2) {
          new import_obsidian5.Notice(e2);
        }
      })
    );
  }
  onClose() {
    var _a;
    (_a = this.palette) == null ? void 0 : _a.emitter.clear();
    this.contentEl.empty();
  }
};

// src/components/GenerateModal.ts
var import_obsidian6 = require("obsidian");
var import_validate_color2 = __toESM(require_lib());

// src/utils/editorUtils.ts
var EditorUtils = class {
  constructor(editor) {
    this.editor = editor;
  }
  /**
   * Replaces selection or text at the cursor
   * @param content The content to be inserted
   * @param insertAfter Inserts the content after the current line
   */
  insertContent(content, insertAfter = false) {
    this.setCursorPostCallback((line) => {
      this.editor.somethingSelected() ? this.editor.replaceSelection(content) : insertAfter ? this.insertLine(content, "after") : this.replaceLine(content, line);
    });
  }
  /**
   * Sets the cursor to a position after callback editor changes
   * @param callback Changes to perform to the editor
   * @param options.line Defaults to the current cursor line
   * @param options.offset The number of lines to offset (calculates during function unless user specified)
   */
  setCursorPostCallback(callback, { line = this.editor.getCursor().line, offset } = {}) {
    const preLinesCount = this.editor.lineCount();
    callback(line);
    const postLinesCount = this.editor.lineCount() - preLinesCount;
    offset = offset || postLinesCount;
    this.editor.setCursor({ ch: 0, line: line + offset });
  }
  /**
   * 
   * @param options.line The line to retrieve the last character index from
   * @param options.offset The offset used from the line (for example, 1 could be used to get the last character index on the line below the cursor)
   * @returns The last character's index on the line
   */
  getLastCh({ line = this.editor.getCursor().line, offset = 0 } = {}) {
    return this.editor.getLine(line + offset).length;
  }
  /**
   * Replaces a single line
   * @param content The content to replace the line with
   * @param line The line to replace
   */
  replaceLine(content, line) {
    const lineContent = this.editor.getLine(line);
    this.editor.replaceRange(content, { line, ch: 0 }, { line, ch: lineContent.length });
  }
  /**
   * Inserts content into editor before or after the line
   * @param content The content to insert
   * @param location Where to insert the content, before or after the line
   * @param options.line Defaults to cursor line
   * @param options.ch Defaults to 0
   */
  insertLine(content, location = "before", { line = this.editor.getCursor().line, ch = 0 } = {}) {
    if (location === "before") {
      this.editor.replaceRange(content, { line, ch });
    }
    if (location === "after") {
      this.editor.replaceRange(
        this.editor.lastLine() === line ? "\n" + content : content + "\n",
        { line: line + 1, ch }
      );
    }
  }
};

// src/components/GenerateModal.ts
var GenerateModal = class extends import_obsidian6.SuggestModal {
  constructor(app, editor, pluginSettings) {
    super(app);
    this.editor = editor;
    this.settings = pluginToPaletteSettings(pluginSettings);
  }
  // Returns all available suggestions.
  getSuggestions(query) {
    return Object.keys(Combination).filter(
      (combination) => combination.toLowerCase().includes(query.toLowerCase())
    );
  }
  // Renders each suggestion item.
  renderSuggestion(combination, el) {
    el.createEl("span", { text: combination });
  }
  // Perform action on the selected suggestion.
  onChooseSuggestion(combination, evt) {
    try {
      const selTextOrLine = this.editor.somethingSelected() ? this.editor.getSelection() : this.editor.getLine(this.editor.getCursor().line);
      const isLineEmpty = this.editor.getLine(this.editor.getCursor().line).length === 0;
      const isColor = (0, import_validate_color2.default)(selTextOrLine);
      const { colors, settings } = isColor ? generateColors(combination, { baseColor: Mt(selTextOrLine), settings: this.settings }) : generateColors(combination, { settings: this.settings });
      const newBlock = createPaletteBlock({ colors, settings: settings ? getModifiedSettings(settings) : void 0 });
      const editorUtils = new EditorUtils(this.editor);
      editorUtils.insertContent(newBlock, !isColor && !isLineEmpty);
    } catch (error) {
      new import_obsidian6.Notice(error);
    }
  }
};

// src/components/PaletteMRC.ts
var import_obsidian9 = require("obsidian");
var import_validate_color3 = __toESM(require_lib());

// src/components/ReorderModal.ts
var import_obsidian7 = require("obsidian");
var Reorder = /* @__PURE__ */ ((Reorder2) => {
  Reorder2["Hue"] = "Hue";
  Reorder2["Saturation"] = "Saturation";
  Reorder2["Lightness"] = "Lightness";
  Reorder2["Red"] = "Red";
  Reorder2["Green"] = "Green";
  Reorder2["Blue"] = "Blue";
  Reorder2["Alpha"] = "Alpha";
  return Reorder2;
})(Reorder || {});
var ReorderModal = class extends import_obsidian7.SuggestModal {
  constructor(app, palette, onSubmit) {
    super(app);
    this.palette = palette;
    this.onSubmit = onSubmit;
  }
  // Returns all available suggestions.
  getSuggestions(query) {
    return Object.keys(Reorder).filter(
      (combination) => combination.toLowerCase().includes(query.toLowerCase())
    );
  }
  renderSuggestion(order, el) {
    el.createEl("span", { text: order });
  }
  onChooseSuggestion(item, evt) {
    const csColors = this.palette.colors.map((color) => {
      return Mt(color);
    });
    let colors = [];
    switch (item) {
      case "Hue" /* Hue */:
        colors = csColors.sort((a2, b2) => a2.hue() - b2.hue()).map((color) => color.hex());
        break;
      case "Saturation" /* Saturation */:
        colors = csColors.sort((a2, b2) => a2.saturation() - b2.saturation()).map((color) => color.hex());
        break;
      case "Lightness" /* Lightness */:
        colors = csColors.sort((a2, b2) => a2.lightness() - b2.lightness()).map((color) => color.hex());
        break;
      case "Red" /* Red */:
        colors = csColors.sort((a2, b2) => a2.red() - b2.red()).map((color) => color.hex());
        break;
      case "Green" /* Green */:
        colors = csColors.sort((a2, b2) => a2.green() - b2.green()).map((color) => color.hex());
        break;
      case "Blue" /* Blue */:
        colors = csColors.sort((a2, b2) => a2.blue() - b2.blue()).map((color) => color.hex());
        break;
      case "Alpha" /* Alpha */:
        colors = csColors.sort((a2, b2) => a2.alpha() - b2.alpha()).map((color) => color.hex());
        break;
    }
    this.onSubmit(colors, getModifiedSettings(this.palette.settings));
  }
};

// src/components/PaletteMenu.ts
var import_obsidian8 = require("obsidian");
var PaletteMenu = class extends import_obsidian8.Menu {
  constructor(app, context, palette, onChange) {
    super();
    this.app = app;
    this.context = context;
    this.palette = palette;
    this.onChange = onChange;
    this.createMenu();
  }
  createMenu() {
    this.addItem((item) => {
      item.setTitle("Reorder").setIcon("arrow-left-right").onClick(() => {
        const modal = new ReorderModal(this.app, this.palette, (colors, settings) => this.onChange(colors, settings));
        modal.open();
        modal.setInstructions([
          { command: "\u2191\u2193", purpose: "to navigate" },
          { command: "\u21B5", purpose: "to use" },
          { command: "esc", purpose: "to dismiss" }
        ]);
        modal.setPlaceholder("Choose a space to reorder palette");
      });
    });
    this.addItem((item) => {
      item.setTitle("Edit Mode").setIcon("palette").onClick(async () => {
        new EditorModal(this.app, this.palette.pluginSettings, (colors, settings) => {
          try {
            const paletteSection = this.context.getSectionInfo(this.palette.containerEl);
            if (paletteSection) {
              this.onChange(colors, settings);
            }
          } catch (error) {
            new import_obsidian8.Notice(error);
          }
        }, this.palette).open();
      });
    });
    if (!this.palette.settings.gradient && this.palette.settings.direction !== "row" /* Row */) {
      this.addItem((item) => {
        item.setTitle("Quick Edit").setIcon("brush").setChecked(this.palette.getEditMode()).onClick(async () => {
          this.palette.setEditMode(!this.palette.getEditMode());
          this.palette.reload();
        });
      });
    }
    this.addSeparator();
    this.addItem((item) => {
      item.setTitle("Convert to RGB").setIcon("droplets").onClick(() => {
        const colors = this.palette.colors.map((color) => {
          const rgbColor = Mt(color).rgb();
          return `rgb(${rgbColor[0]}, ${rgbColor[1]}, ${rgbColor[2]})`;
        });
        this.onChange(colors, getModifiedSettings(this.palette.settings));
      });
    });
    this.addItem((item) => {
      item.setTitle("Convert to HSL").setIcon("droplets").onClick(() => {
        const colors = this.palette.colors.map((color) => {
          const hslColor = Mt(color).hsl();
          return `hsl(${hslColor[0]} ${hslColor[1]}% ${hslColor[2]}%)`;
        });
        this.onChange(colors, getModifiedSettings(this.palette.settings));
      });
    });
    this.addItem((item) => {
      item.setTitle("Convert to HEX").setIcon("droplets").onClick(() => {
        const colors = this.palette.colors.map((color) => {
          return Mt(color).hex(2);
        });
        this.onChange(colors, getModifiedSettings(this.palette.settings));
      });
    });
    this.addSeparator();
    const input = createPaletteBlock({ colors: this.palette.colors, settings: getModifiedSettings(this.palette.settings) });
    this.addItem((item) => {
      item.setTitle("Cut").setIcon("scissors").onClick(async () => {
        await copyToClipboard(input, this.palette.pluginSettings.copyFormat);
        this.onChange(void 0, void 0);
      });
    });
    this.addItem((item) => {
      item.setTitle("Copy").setIcon("copy").onClick(async () => {
        await copyToClipboard(input, this.palette.pluginSettings.copyFormat);
      });
    });
  }
};

// src/components/PaletteMRC.ts
var PaletteMRC = class extends import_obsidian9.MarkdownRenderChild {
  constructor(plugin, containerEl, input, context) {
    super(containerEl);
    this.plugin = plugin;
    this.pluginSettings = plugin.settings;
    this.input = input;
    this.context = context;
  }
  onload() {
    var _a;
    this.update();
    (_a = this.plugin.palettes) == null ? void 0 : _a.push(this);
    this.containerEl.addEventListener("contextmenu", (e2) => {
      if (this.palette.status === "Valid" /* VALID */) {
        const paletteMenu = new PaletteMenu(this.plugin.app, this.context, this.palette, (colors, settings) => {
          if (colors == void 0)
            this.setPaletteInput("");
          else
            this.setPaletteInput(createPaletteBlock({ colors, settings }));
        });
        paletteMenu.showAtMouseEvent(e2);
      }
    });
  }
  unload() {
    var _a;
    this.palette.unload();
    (_a = this.plugin.palettes) == null ? void 0 : _a.remove(this);
  }
  /**
   * Updates the palette contents
   */
  update() {
    this.containerEl.empty();
    const { colors, settings } = this.calcColorsAndSettings(this.input);
    if (typeof colors !== "string" && typeof settings !== "string")
      this.editModeChanges = { colors, settings };
    this.palette = new Palette(colors, settings, this.containerEl, this.pluginSettings);
    this.palette.emitter.on("changed", (colors2, settings2) => {
      const modifiedSettings = getModifiedSettings(settings2);
      this.editModeChanges = { colors: colors2, settings: modifiedSettings };
    });
    this.palette.emitter.on("editMode", (editMode) => {
      if (!editMode) {
        this.setPaletteInput(createPaletteBlock({ colors: this.editModeChanges.colors, settings: this.editModeChanges.settings }));
      }
    });
  }
  /**
   * Parses input & extracts settings
   * @param input settings from codeblock
   * @returns PaletteSettings or Status if settings are not valid
   */
  parseSettings(input) {
    try {
      return JSON.parse(input);
    } catch (error) {
      return "Invalid Settings" /* INVALID_SETTINGS */;
    }
  }
  /**
   * Parses input & extracts colors based on color space or URL
   * @param input colors from codeblock
   * @returns Array of colors or Status if colors are not valid
   */
  parseColors(input, override) {
    let colors = input.flatMap((color) => {
      if (color.includes("(")) {
        return color.split(";").flatMap((postSplitColor) => postSplitColor.trim()).filter((color2) => color2 !== "");
      }
      return color.split(",").flatMap((postSplitColor) => {
        return postSplitColor.trim();
      });
    }).flatMap((color) => color.trim().replace(";", ""));
    const rawColors = colors.join("");
    if (rawColors.match(urlRegex))
      return parseUrl(rawColors);
    if (!override) {
      for (let color of colors) {
        if (!(0, import_validate_color3.default)(color))
          return "Invalid Colors" /* INVALID_COLORS */;
      }
    }
    return colors;
  }
  /**
   * Calculates colors and settings based on codeblock contents
   */
  calcColorsAndSettings(input) {
    const split = input.split("\n");
    const hasSettings = split.some((val) => val.includes("{"));
    let settings = hasSettings ? this.parseSettings(split.pop() || "") : void 0;
    let settingsObj = typeof settings === "object" ? settings : pluginToPaletteSettings(this.pluginSettings);
    return { colors: this.parseColors(split, settingsObj.override), settings };
  }
  /**
   * Gets the palette codeblock input
   */
  getPaletteInput() {
    var _a;
    let editor = (_a = this.plugin.app.workspace.getActiveViewOfType(import_obsidian9.MarkdownView)) == null ? void 0 : _a.editor;
    const paletteSection = this.context.getSectionInfo(this.palette.containerEl);
    if (paletteSection && editor)
      return {
        lines: {
          lineStart: paletteSection.lineStart,
          lineEnd: paletteSection.lineEnd
        },
        input: editor.getRange(
          { line: paletteSection.lineStart, ch: 0 },
          { line: paletteSection.lineEnd + 1, ch: 0 }
        )
      };
    else {
      this.createNotice("The editor has not fully loaded yet.");
    }
  }
  /**
   * Sets the palette codeblock input with `replacement`
   */
  setPaletteInput(replacement) {
    var _a;
    let editor = (_a = this.plugin.app.workspace.getActiveViewOfType(import_obsidian9.MarkdownView)) == null ? void 0 : _a.editor;
    const paletteSection = this.context.getSectionInfo(this.palette.containerEl);
    if (paletteSection && editor) {
      editor.replaceRange(replacement, { line: paletteSection.lineStart, ch: 0 }, { line: paletteSection.lineEnd + 1, ch: 0 });
      return {
        lineStart: paletteSection.lineStart,
        lineEnd: paletteSection.lineEnd
      };
    } else {
      this.createNotice("The editor has not fully loaded yet.");
    }
  }
  /**
   * Creates a new notice using pre-set settings
   * @param message Message to display
   */
  createNotice(message) {
    new import_obsidian9.Notice(message, this.pluginSettings.noticeDuration);
  }
};

// src/main.ts
var urlRegex = /(?:https:\/\/www\.|http:\/\/www\.|https:\/\/|http:\/\/)?[a-zA-Z0-9]{2,}(?:\.[a-zA-Z0-9]{2,})(?:\.[a-zA-Z0-9]{2,})?\/(?:palette\/)?([a-zA-Z0-9-]{2,})/;
var ColorPalette2 = class extends import_obsidian10.Plugin {
  async onload() {
    this.palettes = [];
    await this.loadSettings();
    this.registerMarkdownCodeBlockProcessor(
      "palette",
      async (source, el, ctx) => {
        ctx.addChild(new PaletteMRC(this, el, source.trim(), ctx));
      }
    );
    this.addCommand({
      id: "create",
      name: "Create",
      editorCallback: (editor) => {
        new EditorModal(this.app, this.settings, (colors, settings) => {
          try {
            const result = createPaletteBlock({ colors, settings });
            const cursor = editor.getCursor();
            editor.transaction({
              changes: [{ from: cursor, text: result }]
            });
            editor.setCursor({
              line: cursor.line + result.split("\n").length,
              ch: 0
            });
            new import_obsidian10.Notice(`Added ${result}`);
          } catch (error) {
            new import_obsidian10.Notice(error);
          }
        }).open();
      }
    });
    this.addCommand({
      id: "convert-link",
      name: "Convert link",
      editorCallback: async (editor) => {
        try {
          let link = "";
          const editorSelection = editor.getSelection();
          const clipboardText = await navigator.clipboard.readText();
          if (editorSelection.match(`^${urlRegex.source}$`))
            link = editorSelection;
          else if (clipboardText.match(`^${urlRegex.source}$`))
            link = clipboardText;
          else
            throw new Error("Failed to convert link. Please select or copy a link, then try again.");
          const codeBlock = createPaletteBlock(link);
          const cursor = editor.getCursor();
          editor.replaceSelection(codeBlock);
          editor.setCursor({
            line: cursor.line + codeBlock.split("\n").length,
            ch: 0
          });
          new import_obsidian10.Notice(`Converted ${editorSelection || clipboardText}`);
        } catch (error) {
          new import_obsidian10.Notice(error);
        }
      }
    });
    this.addCommand({
      id: "convert-codeblock-link-to-hex",
      name: "Convert codeblock link to hex",
      editorCallback: (editor) => {
        var _a, _b, _c;
        try {
          const codeBlock = editor.getSelection();
          const multiReg = RegExp(/(?:\`{3}palette)\n(?<url>.*)(?:\n(?<settings>.+))?\n\`{3}/, "g");
          const content = (_b = (_a = [...codeBlock.matchAll(multiReg)]) == null ? void 0 : _a[0]) == null ? void 0 : _b.slice(1);
          const url = content == null ? void 0 : content[0];
          if (!url)
            throw new Error("Selected text is not a codeblock with a link.");
          let colors = [];
          url.match(urlRegex) && url.includes("-") ? colors = url.substring(url.lastIndexOf("/") + 1).split("-").map((i2) => "#" + i2) : (
            // Check if link (colorhunt)
            url.match(urlRegex) ? colors = ((_c = url.substring(url.lastIndexOf("/") + 1).match(/.{1,6}/g)) == null ? void 0 : _c.map((i2) => "#" + i2)) || ["Invalid Palette"] : colors = ["Invalid Palette"]
          );
          if (colors[0] === "Invalid Palette")
            throw new Error("Selected codeblock can not be converted to hex.");
          let newBlock;
          if (!(content == null ? void 0 : content[1])) {
            newBlock = createPaletteBlock({ colors });
          } else {
            const settings = JSON.parse(content[1]);
            createPaletteBlock({ colors, settings });
          }
          if (newBlock) {
            editor.replaceSelection(newBlock);
            new import_obsidian10.Notice(`Converted codeblock link to hex`);
          } else
            throw new Error("Selected codeblock can not be converted to hex.");
        } catch (error) {
          new import_obsidian10.Notice(error);
        }
      }
    });
    this.addCommand({
      id: "generate-random-palette",
      name: "Generate random palette",
      editorCallback: (editor) => {
        new GenerateModal(this.app, editor, this.settings).open();
      }
    });
    this.addSettingTab(new SettingsTab(this.app, this));
  }
  async loadSettings() {
    this.settings = Object.assign({}, defaultSettings, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL3ZhbGlkYXRlLWNvbG9yL2xpYi9pbmRleC5qcyIsICJub2RlX21vZHVsZXMvcXVhbnRpemUvcXVhbnRpemUuanMiLCAic3JjL21haW4udHMiLCAic3JjL2NvbXBvbmVudHMvRWRpdG9yTW9kYWwudHMiLCAic3JjL2NvbXBvbmVudHMvUGFsZXR0ZS50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL3V0aWxzL2Jhc2ljVXRpbHMudHMiLCAibm9kZV9tb2R1bGVzL2NvbG9yc2VhL2Rpc3QvaW5kZXguZXNtLmpzIiwgInNyYy9jb21wb25lbnRzL1BhbGV0dGVJdGVtLnRzIiwgInNyYy91dGlscy9FdmVudEVtaXR0ZXIudHMiLCAic3JjL3V0aWxzL2RyYWdEcm9wVXRpbHMudHMiLCAic3JjL3V0aWxzL2NhbnZhc1V0aWxzLnRzIiwgInNyYy91dGlscy9nZW5lcmF0ZVV0aWxzLnRzIiwgInNyYy91dGlscy9pbWFnZVV0aWxzLnRzIiwgInNyYy9jb21wb25lbnRzL0dlbmVyYXRlTW9kYWwudHMiLCAic3JjL3V0aWxzL2VkaXRvclV0aWxzLnRzIiwgInNyYy9jb21wb25lbnRzL1BhbGV0dGVNUkMudHMiLCAic3JjL2NvbXBvbmVudHMvUmVvcmRlck1vZGFsLnRzIiwgInNyYy9jb21wb25lbnRzL1BhbGV0dGVNZW51LnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJtb2R1bGUuZXhwb3J0cz1mdW5jdGlvbihlKXt2YXIgcj17fTtmdW5jdGlvbiB0KG4pe2lmKHJbbl0pcmV0dXJuIHJbbl0uZXhwb3J0czt2YXIgYT1yW25dPXtpOm4sbDohMSxleHBvcnRzOnt9fTtyZXR1cm4gZVtuXS5jYWxsKGEuZXhwb3J0cyxhLGEuZXhwb3J0cyx0KSxhLmw9ITAsYS5leHBvcnRzfXJldHVybiB0Lm09ZSx0LmM9cix0LmQ9ZnVuY3Rpb24oZSxyLG4pe3QubyhlLHIpfHxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxyLHtlbnVtZXJhYmxlOiEwLGdldDpufSl9LHQucj1mdW5jdGlvbihlKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6XCJNb2R1bGVcIn0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSx0LnQ9ZnVuY3Rpb24oZSxyKXtpZigxJnImJihlPXQoZSkpLDgmcilyZXR1cm4gZTtpZig0JnImJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtpZih0LnIobiksT2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJkZWZhdWx0XCIse2VudW1lcmFibGU6ITAsdmFsdWU6ZX0pLDImciYmXCJzdHJpbmdcIiE9dHlwZW9mIGUpZm9yKHZhciBhIGluIGUpdC5kKG4sYSxmdW5jdGlvbihyKXtyZXR1cm4gZVtyXX0uYmluZChudWxsLGEpKTtyZXR1cm4gbn0sdC5uPWZ1bmN0aW9uKGUpe3ZhciByPWUmJmUuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiBlLmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIGV9O3JldHVybiB0LmQocixcImFcIixyKSxyfSx0Lm89ZnVuY3Rpb24oZSxyKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUscil9LHQucD1cIlwiLHQodC5zPTApfShbZnVuY3Rpb24oZSxyLHQpe1widXNlIHN0cmljdFwiO3QucihyKSx0LmQocixcInZhbGlkYXRlSFRNTENvbG9yTmFtZVwiLChmdW5jdGlvbigpe3JldHVybiBsfSkpLHQuZChyLFwidmFsaWRhdGVIVE1MQ29sb3JTcGVjaWFsTmFtZVwiLChmdW5jdGlvbigpe3JldHVybiBpfSkpLHQuZChyLFwidmFsaWRhdGVIVE1MQ29sb3JIZXhcIiwoZnVuY3Rpb24oKXtyZXR1cm4gdX0pKSx0LmQocixcInZhbGlkYXRlSFRNTENvbG9yUmdiXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIGd9KSksdC5kKHIsXCJ2YWxpZGF0ZUhUTUxDb2xvckhzbFwiLChmdW5jdGlvbigpe3JldHVybiB5fSkpLHQuZChyLFwidmFsaWRhdGVIVE1MQ29sb3JId2JcIiwoZnVuY3Rpb24oKXtyZXR1cm4gTH0pKSx0LmQocixcInZhbGlkYXRlSFRNTENvbG9yTGFiXCIsKGZ1bmN0aW9uKCl7cmV0dXJuIFN9KSksdC5kKHIsXCJ2YWxpZGF0ZUhUTUxDb2xvckxjaFwiLChmdW5jdGlvbigpe3JldHVybiBtfSkpLHQuZChyLFwidmFsaWRhdGVIVE1MQ29sb3JcIiwoZnVuY3Rpb24oKXtyZXR1cm4gR30pKTtjb25zdCBuPWU9PmUmJlwic3RyaW5nXCI9PXR5cGVvZiBlLGE9W1wiQWxpY2VCbHVlXCIsXCJBbnRpcXVlV2hpdGVcIixcIkFxdWFcIixcIkFxdWFtYXJpbmVcIixcIkF6dXJlXCIsXCJCZWlnZVwiLFwiQmlzcXVlXCIsXCJCbGFja1wiLFwiQmxhbmNoZWRBbG1vbmRcIixcIkJsdWVcIixcIkJsdWVWaW9sZXRcIixcIkJyb3duXCIsXCJCdXJseVdvb2RcIixcIkNhZGV0Qmx1ZVwiLFwiQ2hhcnRyZXVzZVwiLFwiQ2hvY29sYXRlXCIsXCJDb3JhbFwiLFwiQ29ybmZsb3dlckJsdWVcIixcIkNvcm5zaWxrXCIsXCJDcmltc29uXCIsXCJDeWFuXCIsXCJEYXJrQmx1ZVwiLFwiRGFya0N5YW5cIixcIkRhcmtHb2xkZW5yb2RcIixcIkRhcmtHcmF5XCIsXCJEYXJrR3JleVwiLFwiRGFya0dyZWVuXCIsXCJEYXJrS2hha2lcIixcIkRhcmtNYWdlbnRhXCIsXCJEYXJrT2xpdmVHcmVlblwiLFwiRGFya09yYW5nZVwiLFwiRGFya09yY2hpZFwiLFwiRGFya1JlZFwiLFwiRGFya1NhbG1vblwiLFwiRGFya1NlYUdyZWVuXCIsXCJEYXJrU2xhdGVCbHVlXCIsXCJEYXJrU2xhdGVHcmF5XCIsXCJEYXJrU2xhdGVHcmV5XCIsXCJEYXJrVHVycXVvaXNlXCIsXCJEYXJrVmlvbGV0XCIsXCJEZWVwUGlua1wiLFwiRGVlcFNreUJsdWVcIixcIkRpbUdyYXlcIixcIkRpbUdyZXlcIixcIkRvZGdlckJsdWVcIixcIkZpcmVCcmlja1wiLFwiRmxvcmFsV2hpdGVcIixcIkZvcmVzdEdyZWVuXCIsXCJGdWNoc2lhXCIsXCJHYWluc2Jvcm9cIixcIkdob3N0V2hpdGVcIixcIkdvbGRcIixcIkdvbGRlbnJvZFwiLFwiR3JheVwiLFwiR3JleVwiLFwiR3JlZW5cIixcIkdyZWVuWWVsbG93XCIsXCJIb25leURld1wiLFwiSG90UGlua1wiLFwiSW5kaWFuUmVkXCIsXCJJbmRpZ29cIixcIkl2b3J5XCIsXCJLaGFraVwiLFwiTGF2ZW5kZXJcIixcIkxhdmVuZGVyQmx1c2hcIixcIkxhd25HcmVlblwiLFwiTGVtb25DaGlmZm9uXCIsXCJMaWdodEJsdWVcIixcIkxpZ2h0Q29yYWxcIixcIkxpZ2h0Q3lhblwiLFwiTGlnaHRHb2xkZW5yb2RZZWxsb3dcIixcIkxpZ2h0R3JheVwiLFwiTGlnaHRHcmV5XCIsXCJMaWdodEdyZWVuXCIsXCJMaWdodFBpbmtcIixcIkxpZ2h0U2FsbW9uXCIsXCJMaWdodFNhbG1vblwiLFwiTGlnaHRTZWFHcmVlblwiLFwiTGlnaHRTa3lCbHVlXCIsXCJMaWdodFNsYXRlR3JheVwiLFwiTGlnaHRTbGF0ZUdyZXlcIixcIkxpZ2h0U3RlZWxCbHVlXCIsXCJMaWdodFllbGxvd1wiLFwiTGltZVwiLFwiTGltZUdyZWVuXCIsXCJMaW5lblwiLFwiTWFnZW50YVwiLFwiTWFyb29uXCIsXCJNZWRpdW1BcXVhbWFyaW5lXCIsXCJNZWRpdW1CbHVlXCIsXCJNZWRpdW1PcmNoaWRcIixcIk1lZGl1bVB1cnBsZVwiLFwiTWVkaXVtU2VhR3JlZW5cIixcIk1lZGl1bVNsYXRlQmx1ZVwiLFwiTWVkaXVtU2xhdGVCbHVlXCIsXCJNZWRpdW1TcHJpbmdHcmVlblwiLFwiTWVkaXVtVHVycXVvaXNlXCIsXCJNZWRpdW1WaW9sZXRSZWRcIixcIk1pZG5pZ2h0Qmx1ZVwiLFwiTWludENyZWFtXCIsXCJNaXN0eVJvc2VcIixcIk1vY2Nhc2luXCIsXCJOYXZham9XaGl0ZVwiLFwiTmF2eVwiLFwiT2xkTGFjZVwiLFwiT2xpdmVcIixcIk9saXZlRHJhYlwiLFwiT3JhbmdlXCIsXCJPcmFuZ2VSZWRcIixcIk9yY2hpZFwiLFwiUGFsZUdvbGRlbnJvZFwiLFwiUGFsZUdyZWVuXCIsXCJQYWxlVHVycXVvaXNlXCIsXCJQYWxlVmlvbGV0UmVkXCIsXCJQYXBheWFXaGlwXCIsXCJQZWFjaFB1ZmZcIixcIlBlcnVcIixcIlBpbmtcIixcIlBsdW1cIixcIlBvd2RlckJsdWVcIixcIlB1cnBsZVwiLFwiUmViZWNjYVB1cnBsZVwiLFwiUmVkXCIsXCJSb3N5QnJvd25cIixcIlJveWFsQmx1ZVwiLFwiU2FkZGxlQnJvd25cIixcIlNhbG1vblwiLFwiU2FuZHlCcm93blwiLFwiU2VhR3JlZW5cIixcIlNlYVNoZWxsXCIsXCJTaWVubmFcIixcIlNpbHZlclwiLFwiU2t5Qmx1ZVwiLFwiU2xhdGVCbHVlXCIsXCJTbGF0ZUdyYXlcIixcIlNsYXRlR3JleVwiLFwiU25vd1wiLFwiU3ByaW5nR3JlZW5cIixcIlN0ZWVsQmx1ZVwiLFwiVGFuXCIsXCJUZWFsXCIsXCJUaGlzdGxlXCIsXCJUb21hdG9cIixcIlR1cnF1b2lzZVwiLFwiVmlvbGV0XCIsXCJXaGVhdFwiLFwiV2hpdGVcIixcIldoaXRlU21va2VcIixcIlllbGxvd1wiLFwiWWVsbG93R3JlZW5cIl0sbz1bXCJjdXJyZW50Q29sb3JcIixcImluaGVyaXRcIixcInRyYW5zcGFyZW50XCJdLGw9ZT0+e2xldCByPSExO3JldHVybiBuKGUpJiZhLm1hcCh0PT4oZS50b0xvd2VyQ2FzZSgpPT09dC50b0xvd2VyQ2FzZSgpJiYocj0hMCksbnVsbCkpLHJ9LGk9ZT0+e2xldCByPSExO3JldHVybiBuKGUpJiZvLm1hcCh0PT4oZS50b0xvd2VyQ2FzZSgpPT09dC50b0xvd2VyQ2FzZSgpJiYocj0hMCksbnVsbCkpLHJ9LHU9ZT0+e2lmKG4oZSkpe2NvbnN0IHI9L14jKFtcXGRhLWZdezN9KXsxLDJ9JHxeIyhbXFxkYS1mXXs0fSl7MSwyfSQvaTtyZXR1cm4gZSYmci50ZXN0KGUpfXJldHVybiExfSxkPVwiKChbXFxcXGRdezAsNX0pKChcXFxcLihbXFxcXGRdezEsNX0pKT8pKVwiLHM9YCgke2R9JSlgLGM9XCIoKFswLTldfFsxLTldWzAtOV18MTAwKSUpXCIsZj1gKCR7Y318KDA/KChcXFxcLihbXFxcXGRdezEsNX0pKT8pKXwxKWAsaD1gKFtcXFxcc117MCw1fSlcXFxcKT8pKChbXFxcXHNdezAsNX0pKFxcXFwvPykoW1xcXFxzXXsxLDV9KSR7YCgoKCR7Y30pKXwoMD8oKFxcXFwuKFtcXFxcZF17MSw1fSkpPykpfDEpKT9gfShbXFxcXHNdezAsNX0pXFxcXClgLCQ9XCIoLT8oKFswLTldfFsxLTldWzAtOV18MVswLTldWzAtOV18MlswLTldWzAtOV18M1swLTVdWzAtOV0pKChcXFxcLihbXFxcXGRdezEsNX0pKT8pfDM2MCkoZGVnKT8pXCIsZz1lPT57aWYobihlKSl7Y29uc3Qgcj1cIihbXFxcXHNdezAsNX0pKFtcXFxcZF17MSw1fSklPyhbXFxcXHNdezAsNX0pLD9cIix0PVwiKCgoW1xcXFxzXXswLDV9KSw/KFtcXFxcc117MCw1fSkpfCgoW1xcXFxzXXsxLDV9KSkpXCIsbj1uZXcgUmVnRXhwKGBeKHJnYilhP1xcXFwoJHtgJHtyfSR7dH1gfSR7YCR7cn0ke3R9YH0ke2Ake3J9JHt0fWB9KCR7XCIoXFxcXC8/KFtcXFxcc117MCw1fSkoMD9cXFxcLj8oW1xcXFxkXXsxLDV9KSU/KFtcXFxcc117MCw1fSkpP3wxfDApXCJ9KT9cXFxcKSRgKTtyZXR1cm4gZSYmbi50ZXN0KGUpfXJldHVybiExfSx5PWU9PntpZihuKGUpKXtjb25zdCByPW5ldyBSZWdFeHAoYF4oaHNsKWE/XFxcXCgoKFtcXFxcc117MCw1fSkoJHskfXwke1wiKChbMC05XXxbMS05XVswLTldfDFbMC05XVswLTldfDJbMC05XVswLTldfDNbMC05XVswLTldfDQwMClncmFkKVwifXwke1wiKCgoWzAtNV0pP1xcXFwuKFtcXFxcZF17MSw1fSl8NlxcXFwuKFswLTldfDFbMC05XXwyWzAtOF0pfFswLTZdKXJhZClcIn18JHtcIigoMD8oKFxcXFwuKFtcXFxcZF17MSw1fSkpPyl8MSl0dXJuKVwifSkoKChbXFxcXHNdezAsNX0pLChbXFxcXHNdezAsNX0pKXwoKFtcXFxcc117MSw1fSkpKSkoKFtcXFxcc117MCw1fSkoMHwke2N9KSgoKFtcXFxcc117MCw1fSksKFtcXFxcc117MCw1fSkpfCgoW1xcXFxzXXsxLDV9KSkpKSgoW1xcXFxzXXswLDV9KSgwfCR7Y30pKFtcXFxcc117MCw1fSlcXFxcKT8pKChbXFxcXHNdezAsNX0pKFxcXFwvP3wsPykoW1xcXFxzXXswLDV9KSgoKCR7Y30pKXwoMD8oKFxcXFwuKFtcXFxcZF17MSw1fSkpPykpfDEpKT9cXFxcKSRgKTtyZXR1cm4gZSYmci50ZXN0KGUpfXJldHVybiExfSxMPWU9PntpZihuKGUpKXtjb25zdCByPW5ldyBSZWdFeHAoYF4oaHdiXFxcXCgoW1xcXFxzXXswLDV9KSR7JH0oW1xcXFxzXXsxLDV9KSkoKDB8JHtjfSkoW1xcXFxzXXsxLDV9KSkoKDB8JHtjfSkke2h9JGApO3JldHVybiBlJiZyLnRlc3QoZSl9cmV0dXJuITF9LFM9ZT0+e2lmKG4oZSkpe2NvbnN0IHI9XCIoLT8oKFswLTldfFsxLTldWzAtOV18MVswLTVdWzAtOV0pKChcXFxcLihbXFxcXGRdezEsNX0pKT8pP3wxNjApKVwiLHQ9bmV3IFJlZ0V4cChgXihsYWJcXFxcKChbXFxcXHNdezAsNX0pJHtzfShbXFxcXHNdezEsNX0pJHtyfShbXFxcXHNdezEsNX0pJHtyfSR7aH0kYCk7cmV0dXJuIGUmJnQudGVzdChlKX1yZXR1cm4hMX0sbT1lPT57aWYobihlKSl7Y29uc3Qgcj1cIigoKFswLTldfFsxLTldWzAtOV0pPygoXFxcXC4oW1xcXFxkXXsxLDV9KSk/KXwxMDApKCUpPylcIix0PVwiXCIrZCxuPWAoKCR7JH0pfCgwfCR7Zn0pfCgoWzAtOV18WzEtOV1bMC05XXwxWzAtOV1bMC05XXwyWzAtOV1bMC05XXwzWzAtNV1bMC05XSkoKFxcXFwuKFtcXFxcZF17MSw1fSkpPyl8MzYwKSlgLGE9YChcXFxcLyhbXFxcXHNdezAsNX0pJHtmfSlgLG89bmV3IFJlZ0V4cChgXmxjaFxcXFwoJHtgKChbXFxcXHNdezAsNX0pJHtyfShbXFxcXHNdezEsNX0pJHt0fShbXFxcXHNdezEsNX0pJHtufShbXFxcXHNdezAsNX0pKCR7YX0pPylgfVxcXFwpJGApO3JldHVybiBlJiZvLnRlc3QoZSl9cmV0dXJuITF9LEc9ZT0+ISEoZSYmdShlKXx8ZyhlKXx8eShlKXx8TChlKXx8UyhlKXx8bShlKSk7ci5kZWZhdWx0PWU9PiEhKGUmJnUoZSl8fGwoZSl8fGkoZSl8fGcoZSl8fHkoZSl8fEwoZSl8fFMoZSl8fG0oZSkpfV0pOyIsICIvKlxuICogcXVhbnRpemUuanMgQ29weXJpZ2h0IDIwMDggTmljayBSYWJpbm93aXR6XG4gKiBQb3J0ZWQgdG8gbm9kZS5qcyBieSBPbGl2aWVyIExlc25pY2tpXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2U6IGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXG4gKi9cblxuLy8gZmlsbCBvdXQgYSBjb3VwbGUgcHJvdG92aXMgZGVwZW5kZW5jaWVzXG4vKlxuICogQmxvY2sgYmVsb3cgY29waWVkIGZyb20gUHJvdG92aXM6IGh0dHA6Ly9tYm9zdG9jay5naXRodWIuY29tL3Byb3RvdmlzL1xuICogQ29weXJpZ2h0IDIwMTAgU3RhbmZvcmQgVmlzdWFsaXphdGlvbiBHcm91cFxuICogTGljZW5zZWQgdW5kZXIgdGhlIEJTRCBMaWNlbnNlOiBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL2JzZC1saWNlbnNlLnBocFxuICovXG5pZiAoIXB2KSB7XG4gICAgdmFyIHB2ID0ge1xuICAgICAgICBtYXA6IGZ1bmN0aW9uKGFycmF5LCBmKSB7XG4gICAgICAgICAgICB2YXIgbyA9IHt9O1xuICAgICAgICAgICAgcmV0dXJuIGYgPyBhcnJheS5tYXAoZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgICAgIG8uaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmLmNhbGwobywgZCk7XG4gICAgICAgICAgICB9KSA6IGFycmF5LnNsaWNlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG5hdHVyYWxPcmRlcjogZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIChhIDwgYikgPyAtMSA6ICgoYSA+IGIpID8gMSA6IDApO1xuICAgICAgICB9LFxuICAgICAgICBzdW06IGZ1bmN0aW9uKGFycmF5LCBmKSB7XG4gICAgICAgICAgICB2YXIgbyA9IHt9O1xuICAgICAgICAgICAgcmV0dXJuIGFycmF5LnJlZHVjZShmID8gZnVuY3Rpb24ocCwgZCwgaSkge1xuICAgICAgICAgICAgICAgIG8uaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIHJldHVybiBwICsgZi5jYWxsKG8sIGQpO1xuICAgICAgICAgICAgfSA6IGZ1bmN0aW9uKHAsIGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcCArIGQ7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfSxcbiAgICAgICAgbWF4OiBmdW5jdGlvbihhcnJheSwgZikge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4LmFwcGx5KG51bGwsIGYgPyBwdi5tYXAoYXJyYXksIGYpIDogYXJyYXkpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEJhc2ljIEphdmFzY3JpcHQgcG9ydCBvZiB0aGUgTU1DUSAobW9kaWZpZWQgbWVkaWFuIGN1dCBxdWFudGl6YXRpb24pXG4gKiBhbGdvcml0aG0gZnJvbSB0aGUgTGVwdG9uaWNhIGxpYnJhcnkgKGh0dHA6Ly93d3cubGVwdG9uaWNhLmNvbS8pLlxuICogUmV0dXJucyBhIGNvbG9yIG1hcCB5b3UgY2FuIHVzZSB0byBtYXAgb3JpZ2luYWwgcGl4ZWxzIHRvIHRoZSByZWR1Y2VkXG4gKiBwYWxldHRlLiBTdGlsbCBhIHdvcmsgaW4gcHJvZ3Jlc3MuXG4gKiBcbiAqIEBhdXRob3IgTmljayBSYWJpbm93aXR6XG4gKiBAZXhhbXBsZVxuIFxuLy8gYXJyYXkgb2YgcGl4ZWxzIGFzIFtSLEcsQl0gYXJyYXlzXG52YXIgbXlQaXhlbHMgPSBbWzE5MCwxOTcsMTkwXSwgWzIwMiwyMDQsMjAwXSwgWzIwNywyMTQsMjEwXSwgWzIxMSwyMTQsMjExXSwgWzIwNSwyMDcsMjA3XVxuICAgICAgICAgICAgICAgIC8vIGV0Y1xuICAgICAgICAgICAgICAgIF07XG52YXIgbWF4Q29sb3JzID0gNDtcbiBcbnZhciBjbWFwID0gTU1DUS5xdWFudGl6ZShteVBpeGVscywgbWF4Q29sb3JzKTtcbnZhciBuZXdQYWxldHRlID0gY21hcC5wYWxldHRlKCk7XG52YXIgbmV3UGl4ZWxzID0gbXlQaXhlbHMubWFwKGZ1bmN0aW9uKHApIHsgXG4gICAgcmV0dXJuIGNtYXAubWFwKHApOyBcbn0pO1xuIFxuICovXG52YXIgTU1DUSA9IChmdW5jdGlvbigpIHtcbiAgICAvLyBwcml2YXRlIGNvbnN0YW50c1xuICAgIHZhciBzaWdiaXRzID0gNSxcbiAgICAgICAgcnNoaWZ0ID0gOCAtIHNpZ2JpdHMsXG4gICAgICAgIG1heEl0ZXJhdGlvbnMgPSAxMDAwLFxuICAgICAgICBmcmFjdEJ5UG9wdWxhdGlvbnMgPSAwLjc1O1xuXG4gICAgLy8gZ2V0IHJlZHVjZWQtc3BhY2UgY29sb3IgaW5kZXggZm9yIGEgcGl4ZWxcblxuICAgIGZ1bmN0aW9uIGdldENvbG9ySW5kZXgociwgZywgYikge1xuICAgICAgICByZXR1cm4gKHIgPDwgKDIgKiBzaWdiaXRzKSkgKyAoZyA8PCBzaWdiaXRzKSArIGI7XG4gICAgfVxuXG4gICAgLy8gU2ltcGxlIHByaW9yaXR5IHF1ZXVlXG5cbiAgICBmdW5jdGlvbiBQUXVldWUoY29tcGFyYXRvcikge1xuICAgICAgICB2YXIgY29udGVudHMgPSBbXSxcbiAgICAgICAgICAgIHNvcnRlZCA9IGZhbHNlO1xuXG4gICAgICAgIGZ1bmN0aW9uIHNvcnQoKSB7XG4gICAgICAgICAgICBjb250ZW50cy5zb3J0KGNvbXBhcmF0b3IpO1xuICAgICAgICAgICAgc29ydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwdXNoOiBmdW5jdGlvbihvKSB7XG4gICAgICAgICAgICAgICAgY29udGVudHMucHVzaChvKTtcbiAgICAgICAgICAgICAgICBzb3J0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwZWVrOiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgICAgICAgIGlmICghc29ydGVkKSBzb3J0KCk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIGluZGV4ID0gY29udGVudHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudHNbaW5kZXhdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBvcDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzb3J0ZWQpIHNvcnQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudHMucG9wKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2l6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnRzLmxlbmd0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYXA6IGZ1bmN0aW9uKGYpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29udGVudHMubWFwKGYpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlYnVnOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNvcnRlZCkgc29ydCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyAzZCBjb2xvciBzcGFjZSBib3hcblxuICAgIGZ1bmN0aW9uIFZCb3gocjEsIHIyLCBnMSwgZzIsIGIxLCBiMiwgaGlzdG8pIHtcbiAgICAgICAgdmFyIHZib3ggPSB0aGlzO1xuICAgICAgICB2Ym94LnIxID0gcjE7XG4gICAgICAgIHZib3gucjIgPSByMjtcbiAgICAgICAgdmJveC5nMSA9IGcxO1xuICAgICAgICB2Ym94LmcyID0gZzI7XG4gICAgICAgIHZib3guYjEgPSBiMTtcbiAgICAgICAgdmJveC5iMiA9IGIyO1xuICAgICAgICB2Ym94Lmhpc3RvID0gaGlzdG87XG4gICAgfVxuICAgIFZCb3gucHJvdG90eXBlID0ge1xuICAgICAgICB2b2x1bWU6IGZ1bmN0aW9uKGZvcmNlKSB7XG4gICAgICAgICAgICB2YXIgdmJveCA9IHRoaXM7XG4gICAgICAgICAgICBpZiAoIXZib3guX3ZvbHVtZSB8fCBmb3JjZSkge1xuICAgICAgICAgICAgICAgIHZib3guX3ZvbHVtZSA9ICgodmJveC5yMiAtIHZib3gucjEgKyAxKSAqICh2Ym94LmcyIC0gdmJveC5nMSArIDEpICogKHZib3guYjIgLSB2Ym94LmIxICsgMSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZib3guX3ZvbHVtZTtcbiAgICAgICAgfSxcbiAgICAgICAgY291bnQ6IGZ1bmN0aW9uKGZvcmNlKSB7XG4gICAgICAgICAgICB2YXIgdmJveCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgaGlzdG8gPSB2Ym94Lmhpc3RvO1xuICAgICAgICAgICAgaWYgKCF2Ym94Ll9jb3VudF9zZXQgfHwgZm9yY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgbnBpeCA9IDAsXG4gICAgICAgICAgICAgICAgICAgIGksIGosIGssIGluZGV4O1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IHZib3gucjE7IGkgPD0gdmJveC5yMjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaiA9IHZib3guZzE7IGogPD0gdmJveC5nMjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSB2Ym94LmIxOyBrIDw9IHZib3guYjI7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gZ2V0Q29sb3JJbmRleChpLCBqLCBrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBucGl4ICs9IChoaXN0b1tpbmRleF0gfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmJveC5fY291bnQgPSBucGl4O1xuICAgICAgICAgICAgICAgIHZib3guX2NvdW50X3NldCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmJveC5fY291bnQ7XG4gICAgICAgIH0sXG4gICAgICAgIGNvcHk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHZib3ggPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWQm94KHZib3gucjEsIHZib3gucjIsIHZib3guZzEsIHZib3guZzIsIHZib3guYjEsIHZib3guYjIsIHZib3guaGlzdG8pO1xuICAgICAgICB9LFxuICAgICAgICBhdmc6IGZ1bmN0aW9uKGZvcmNlKSB7XG4gICAgICAgICAgICB2YXIgdmJveCA9IHRoaXMsXG4gICAgICAgICAgICAgICAgaGlzdG8gPSB2Ym94Lmhpc3RvO1xuICAgICAgICAgICAgaWYgKCF2Ym94Ll9hdmcgfHwgZm9yY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgbnRvdCA9IDAsXG4gICAgICAgICAgICAgICAgICAgIG11bHQgPSAxIDw8ICg4IC0gc2lnYml0cyksXG4gICAgICAgICAgICAgICAgICAgIHJzdW0gPSAwLFxuICAgICAgICAgICAgICAgICAgICBnc3VtID0gMCxcbiAgICAgICAgICAgICAgICAgICAgYnN1bSA9IDAsXG4gICAgICAgICAgICAgICAgICAgIGh2YWwsXG4gICAgICAgICAgICAgICAgICAgIGksIGosIGssIGhpc3RvaW5kZXg7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gdmJveC5yMTsgaSA8PSB2Ym94LnIyOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gdmJveC5nMTsgaiA8PSB2Ym94LmcyOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoayA9IHZib3guYjE7IGsgPD0gdmJveC5iMjsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9pbmRleCA9IGdldENvbG9ySW5kZXgoaSwgaiwgayk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaHZhbCA9IGhpc3RvW2hpc3RvaW5kZXhdIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbnRvdCArPSBodmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJzdW0gKz0gKGh2YWwgKiAoaSArIDAuNSkgKiBtdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnc3VtICs9IChodmFsICogKGogKyAwLjUpICogbXVsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnN1bSArPSAoaHZhbCAqIChrICsgMC41KSAqIG11bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChudG90KSB7XG4gICAgICAgICAgICAgICAgICAgIHZib3guX2F2ZyA9IFt+fihyc3VtIC8gbnRvdCksIH5+IChnc3VtIC8gbnRvdCksIH5+IChic3VtIC8gbnRvdCldO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coJ2VtcHR5IGJveCcpO1xuICAgICAgICAgICAgICAgICAgICB2Ym94Ll9hdmcgPSBbfn4obXVsdCAqICh2Ym94LnIxICsgdmJveC5yMiArIDEpIC8gMiksIH5+IChtdWx0ICogKHZib3guZzEgKyB2Ym94LmcyICsgMSkgLyAyKSwgfn4gKG11bHQgKiAodmJveC5iMSArIHZib3guYjIgKyAxKSAvIDIpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdmJveC5fYXZnO1xuICAgICAgICB9LFxuICAgICAgICBjb250YWluczogZnVuY3Rpb24ocGl4ZWwpIHtcbiAgICAgICAgICAgIHZhciB2Ym94ID0gdGhpcyxcbiAgICAgICAgICAgICAgICBydmFsID0gcGl4ZWxbMF0gPj4gcnNoaWZ0O1xuICAgICAgICAgICAgZ3ZhbCA9IHBpeGVsWzFdID4+IHJzaGlmdDtcbiAgICAgICAgICAgIGJ2YWwgPSBwaXhlbFsyXSA+PiByc2hpZnQ7XG4gICAgICAgICAgICByZXR1cm4gKHJ2YWwgPj0gdmJveC5yMSAmJiBydmFsIDw9IHZib3gucjIgJiZcbiAgICAgICAgICAgICAgICBndmFsID49IHZib3guZzEgJiYgZ3ZhbCA8PSB2Ym94LmcyICYmXG4gICAgICAgICAgICAgICAgYnZhbCA+PSB2Ym94LmIxICYmIGJ2YWwgPD0gdmJveC5iMik7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gQ29sb3IgbWFwXG5cbiAgICBmdW5jdGlvbiBDTWFwKCkge1xuICAgICAgICB0aGlzLnZib3hlcyA9IG5ldyBQUXVldWUoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIHB2Lm5hdHVyYWxPcmRlcihcbiAgICAgICAgICAgICAgICBhLnZib3guY291bnQoKSAqIGEudmJveC52b2x1bWUoKSxcbiAgICAgICAgICAgICAgICBiLnZib3guY291bnQoKSAqIGIudmJveC52b2x1bWUoKVxuICAgICAgICAgICAgKVxuICAgICAgICB9KTs7XG4gICAgfVxuICAgIENNYXAucHJvdG90eXBlID0ge1xuICAgICAgICBwdXNoOiBmdW5jdGlvbih2Ym94KSB7XG4gICAgICAgICAgICB0aGlzLnZib3hlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB2Ym94OiB2Ym94LFxuICAgICAgICAgICAgICAgIGNvbG9yOiB2Ym94LmF2ZygpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcGFsZXR0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52Ym94ZXMubWFwKGZ1bmN0aW9uKHZiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZiLmNvbG9yXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgc2l6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52Ym94ZXMuc2l6ZSgpO1xuICAgICAgICB9LFxuICAgICAgICBtYXA6IGZ1bmN0aW9uKGNvbG9yKSB7XG4gICAgICAgICAgICB2YXIgdmJveGVzID0gdGhpcy52Ym94ZXM7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZib3hlcy5zaXplKCk7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICh2Ym94ZXMucGVlayhpKS52Ym94LmNvbnRhaW5zKGNvbG9yKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmJveGVzLnBlZWsoaSkuY29sb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmVhcmVzdChjb2xvcik7XG4gICAgICAgIH0sXG4gICAgICAgIG5lYXJlc3Q6IGZ1bmN0aW9uKGNvbG9yKSB7XG4gICAgICAgICAgICB2YXIgdmJveGVzID0gdGhpcy52Ym94ZXMsXG4gICAgICAgICAgICAgICAgZDEsIGQyLCBwQ29sb3I7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZib3hlcy5zaXplKCk7IGkrKykge1xuICAgICAgICAgICAgICAgIGQyID0gTWF0aC5zcXJ0KFxuICAgICAgICAgICAgICAgICAgICBNYXRoLnBvdyhjb2xvclswXSAtIHZib3hlcy5wZWVrKGkpLmNvbG9yWzBdLCAyKSArXG4gICAgICAgICAgICAgICAgICAgIE1hdGgucG93KGNvbG9yWzFdIC0gdmJveGVzLnBlZWsoaSkuY29sb3JbMV0sIDIpICtcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3coY29sb3JbMl0gLSB2Ym94ZXMucGVlayhpKS5jb2xvclsyXSwgMilcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGlmIChkMiA8IGQxIHx8IGQxID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZDEgPSBkMjtcbiAgICAgICAgICAgICAgICAgICAgcENvbG9yID0gdmJveGVzLnBlZWsoaSkuY29sb3I7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBDb2xvcjtcbiAgICAgICAgfSxcbiAgICAgICAgZm9yY2VidzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBYWFg6IHdvbid0ICB3b3JrIHlldFxuICAgICAgICAgICAgdmFyIHZib3hlcyA9IHRoaXMudmJveGVzO1xuICAgICAgICAgICAgdmJveGVzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwdi5uYXR1cmFsT3JkZXIocHYuc3VtKGEuY29sb3IpLCBwdi5zdW0oYi5jb2xvcikpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gZm9yY2UgZGFya2VzdCBjb2xvciB0byBibGFjayBpZiBldmVyeXRoaW5nIDwgNVxuICAgICAgICAgICAgdmFyIGxvd2VzdCA9IHZib3hlc1swXS5jb2xvcjtcbiAgICAgICAgICAgIGlmIChsb3dlc3RbMF0gPCA1ICYmIGxvd2VzdFsxXSA8IDUgJiYgbG93ZXN0WzJdIDwgNSlcbiAgICAgICAgICAgICAgICB2Ym94ZXNbMF0uY29sb3IgPSBbMCwgMCwgMF07XG5cbiAgICAgICAgICAgIC8vIGZvcmNlIGxpZ2h0ZXN0IGNvbG9yIHRvIHdoaXRlIGlmIGV2ZXJ5dGhpbmcgPiAyNTFcbiAgICAgICAgICAgIHZhciBpZHggPSB2Ym94ZXMubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgICAgICBoaWdoZXN0ID0gdmJveGVzW2lkeF0uY29sb3I7XG4gICAgICAgICAgICBpZiAoaGlnaGVzdFswXSA+IDI1MSAmJiBoaWdoZXN0WzFdID4gMjUxICYmIGhpZ2hlc3RbMl0gPiAyNTEpXG4gICAgICAgICAgICAgICAgdmJveGVzW2lkeF0uY29sb3IgPSBbMjU1LCAyNTUsIDI1NV07XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gaGlzdG8gKDEtZCBhcnJheSwgZ2l2aW5nIHRoZSBudW1iZXIgb2YgcGl4ZWxzIGluXG4gICAgLy8gZWFjaCBxdWFudGl6ZWQgcmVnaW9uIG9mIGNvbG9yIHNwYWNlKSwgb3IgbnVsbCBvbiBlcnJvclxuXG4gICAgZnVuY3Rpb24gZ2V0SGlzdG8ocGl4ZWxzKSB7XG4gICAgICAgIHZhciBoaXN0b3NpemUgPSAxIDw8ICgzICogc2lnYml0cyksXG4gICAgICAgICAgICBoaXN0byA9IG5ldyBBcnJheShoaXN0b3NpemUpLFxuICAgICAgICAgICAgaW5kZXgsIHJ2YWwsIGd2YWwsIGJ2YWw7XG4gICAgICAgIHBpeGVscy5mb3JFYWNoKGZ1bmN0aW9uKHBpeGVsKSB7XG4gICAgICAgICAgICBydmFsID0gcGl4ZWxbMF0gPj4gcnNoaWZ0O1xuICAgICAgICAgICAgZ3ZhbCA9IHBpeGVsWzFdID4+IHJzaGlmdDtcbiAgICAgICAgICAgIGJ2YWwgPSBwaXhlbFsyXSA+PiByc2hpZnQ7XG4gICAgICAgICAgICBpbmRleCA9IGdldENvbG9ySW5kZXgocnZhbCwgZ3ZhbCwgYnZhbCk7XG4gICAgICAgICAgICBoaXN0b1tpbmRleF0gPSAoaGlzdG9baW5kZXhdIHx8IDApICsgMTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBoaXN0bztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB2Ym94RnJvbVBpeGVscyhwaXhlbHMsIGhpc3RvKSB7XG4gICAgICAgIHZhciBybWluID0gMTAwMDAwMCxcbiAgICAgICAgICAgIHJtYXggPSAwLFxuICAgICAgICAgICAgZ21pbiA9IDEwMDAwMDAsXG4gICAgICAgICAgICBnbWF4ID0gMCxcbiAgICAgICAgICAgIGJtaW4gPSAxMDAwMDAwLFxuICAgICAgICAgICAgYm1heCA9IDAsXG4gICAgICAgICAgICBydmFsLCBndmFsLCBidmFsO1xuICAgICAgICAvLyBmaW5kIG1pbi9tYXhcbiAgICAgICAgcGl4ZWxzLmZvckVhY2goZnVuY3Rpb24ocGl4ZWwpIHtcbiAgICAgICAgICAgIHJ2YWwgPSBwaXhlbFswXSA+PiByc2hpZnQ7XG4gICAgICAgICAgICBndmFsID0gcGl4ZWxbMV0gPj4gcnNoaWZ0O1xuICAgICAgICAgICAgYnZhbCA9IHBpeGVsWzJdID4+IHJzaGlmdDtcbiAgICAgICAgICAgIGlmIChydmFsIDwgcm1pbikgcm1pbiA9IHJ2YWw7XG4gICAgICAgICAgICBlbHNlIGlmIChydmFsID4gcm1heCkgcm1heCA9IHJ2YWw7XG4gICAgICAgICAgICBpZiAoZ3ZhbCA8IGdtaW4pIGdtaW4gPSBndmFsO1xuICAgICAgICAgICAgZWxzZSBpZiAoZ3ZhbCA+IGdtYXgpIGdtYXggPSBndmFsO1xuICAgICAgICAgICAgaWYgKGJ2YWwgPCBibWluKSBibWluID0gYnZhbDtcbiAgICAgICAgICAgIGVsc2UgaWYgKGJ2YWwgPiBibWF4KSBibWF4ID0gYnZhbDtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBuZXcgVkJveChybWluLCBybWF4LCBnbWluLCBnbWF4LCBibWluLCBibWF4LCBoaXN0byk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWVkaWFuQ3V0QXBwbHkoaGlzdG8sIHZib3gpIHtcbiAgICAgICAgaWYgKCF2Ym94LmNvdW50KCkpIHJldHVybjtcblxuICAgICAgICB2YXIgcncgPSB2Ym94LnIyIC0gdmJveC5yMSArIDEsXG4gICAgICAgICAgICBndyA9IHZib3guZzIgLSB2Ym94LmcxICsgMSxcbiAgICAgICAgICAgIGJ3ID0gdmJveC5iMiAtIHZib3guYjEgKyAxLFxuICAgICAgICAgICAgbWF4dyA9IHB2Lm1heChbcncsIGd3LCBid10pO1xuICAgICAgICAvLyBvbmx5IG9uZSBwaXhlbCwgbm8gc3BsaXRcbiAgICAgICAgaWYgKHZib3guY291bnQoKSA9PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gW3Zib3guY29weSgpXVxuICAgICAgICB9XG4gICAgICAgIC8qIEZpbmQgdGhlIHBhcnRpYWwgc3VtIGFycmF5cyBhbG9uZyB0aGUgc2VsZWN0ZWQgYXhpcy4gKi9cbiAgICAgICAgdmFyIHRvdGFsID0gMCxcbiAgICAgICAgICAgIHBhcnRpYWxzdW0gPSBbXSxcbiAgICAgICAgICAgIGxvb2thaGVhZHN1bSA9IFtdLFxuICAgICAgICAgICAgaSwgaiwgaywgc3VtLCBpbmRleDtcbiAgICAgICAgaWYgKG1heHcgPT0gcncpIHtcbiAgICAgICAgICAgIGZvciAoaSA9IHZib3gucjE7IGkgPD0gdmJveC5yMjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgc3VtID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKGogPSB2Ym94LmcxOyBqIDw9IHZib3guZzI7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSB2Ym94LmIxOyBrIDw9IHZib3guYjI7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBnZXRDb2xvckluZGV4KGksIGosIGspO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IChoaXN0b1tpbmRleF0gfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdG90YWwgKz0gc3VtO1xuICAgICAgICAgICAgICAgIHBhcnRpYWxzdW1baV0gPSB0b3RhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChtYXh3ID09IGd3KSB7XG4gICAgICAgICAgICBmb3IgKGkgPSB2Ym94LmcxOyBpIDw9IHZib3guZzI7IGkrKykge1xuICAgICAgICAgICAgICAgIHN1bSA9IDA7XG4gICAgICAgICAgICAgICAgZm9yIChqID0gdmJveC5yMTsgaiA8PSB2Ym94LnIyOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gdmJveC5iMTsgayA8PSB2Ym94LmIyOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4ID0gZ2V0Q29sb3JJbmRleChqLCBpLCBrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSAoaGlzdG9baW5kZXhdIHx8IDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRvdGFsICs9IHN1bTtcbiAgICAgICAgICAgICAgICBwYXJ0aWFsc3VtW2ldID0gdG90YWw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7IC8qIG1heHcgPT0gYncgKi9cbiAgICAgICAgICAgIGZvciAoaSA9IHZib3guYjE7IGkgPD0gdmJveC5iMjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgc3VtID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKGogPSB2Ym94LnIxOyBqIDw9IHZib3gucjI7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGsgPSB2Ym94LmcxOyBrIDw9IHZib3guZzI7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSBnZXRDb2xvckluZGV4KGosIGssIGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IChoaXN0b1tpbmRleF0gfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdG90YWwgKz0gc3VtO1xuICAgICAgICAgICAgICAgIHBhcnRpYWxzdW1baV0gPSB0b3RhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwYXJ0aWFsc3VtLmZvckVhY2goZnVuY3Rpb24oZCwgaSkge1xuICAgICAgICAgICAgbG9va2FoZWFkc3VtW2ldID0gdG90YWwgLSBkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGRvQ3V0KGNvbG9yKSB7XG4gICAgICAgICAgICB2YXIgZGltMSA9IGNvbG9yICsgJzEnLFxuICAgICAgICAgICAgICAgIGRpbTIgPSBjb2xvciArICcyJyxcbiAgICAgICAgICAgICAgICBsZWZ0LCByaWdodCwgdmJveDEsIHZib3gyLCBkMiwgY291bnQyID0gMDtcbiAgICAgICAgICAgIGZvciAoaSA9IHZib3hbZGltMV07IGkgPD0gdmJveFtkaW0yXTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnRpYWxzdW1baV0gPiB0b3RhbCAvIDIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmJveDEgPSB2Ym94LmNvcHkoKTtcbiAgICAgICAgICAgICAgICAgICAgdmJveDIgPSB2Ym94LmNvcHkoKTtcbiAgICAgICAgICAgICAgICAgICAgbGVmdCA9IGkgLSB2Ym94W2RpbTFdO1xuICAgICAgICAgICAgICAgICAgICByaWdodCA9IHZib3hbZGltMl0gLSBpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobGVmdCA8PSByaWdodClcbiAgICAgICAgICAgICAgICAgICAgICAgIGQyID0gTWF0aC5taW4odmJveFtkaW0yXSAtIDEsIH5+IChpICsgcmlnaHQgLyAyKSk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgZDIgPSBNYXRoLm1heCh2Ym94W2RpbTFdLCB+fiAoaSAtIDEgLSBsZWZ0IC8gMikpO1xuICAgICAgICAgICAgICAgICAgICAvLyBhdm9pZCAwLWNvdW50IGJveGVzXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICghcGFydGlhbHN1bVtkMl0pIGQyKys7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50MiA9IGxvb2thaGVhZHN1bVtkMl07XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICghY291bnQyICYmIHBhcnRpYWxzdW1bZDIgLSAxXSkgY291bnQyID0gbG9va2FoZWFkc3VtWy0tZDJdO1xuICAgICAgICAgICAgICAgICAgICAvLyBzZXQgZGltZW5zaW9uc1xuICAgICAgICAgICAgICAgICAgICB2Ym94MVtkaW0yXSA9IGQyO1xuICAgICAgICAgICAgICAgICAgICB2Ym94MltkaW0xXSA9IHZib3gxW2RpbTJdICsgMTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3Zib3ggY291bnRzOicsIHZib3guY291bnQoKSwgdmJveDEuY291bnQoKSwgdmJveDIuY291bnQoKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbdmJveDEsIHZib3gyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICAvLyBkZXRlcm1pbmUgdGhlIGN1dCBwbGFuZXNcbiAgICAgICAgcmV0dXJuIG1heHcgPT0gcncgPyBkb0N1dCgncicpIDpcbiAgICAgICAgICAgIG1heHcgPT0gZ3cgPyBkb0N1dCgnZycpIDpcbiAgICAgICAgICAgIGRvQ3V0KCdiJyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcXVhbnRpemUocGl4ZWxzLCBtYXhjb2xvcnMpIHtcbiAgICAgICAgLy8gc2hvcnQtY2lyY3VpdFxuICAgICAgICBpZiAoIXBpeGVscy5sZW5ndGggfHwgbWF4Y29sb3JzIDwgMiB8fCBtYXhjb2xvcnMgPiAyNTYpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd3cm9uZyBudW1iZXIgb2YgbWF4Y29sb3JzJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBYWFg6IGNoZWNrIGNvbG9yIGNvbnRlbnQgYW5kIGNvbnZlcnQgdG8gZ3JheXNjYWxlIGlmIGluc3VmZmljaWVudFxuXG4gICAgICAgIHZhciBoaXN0byA9IGdldEhpc3RvKHBpeGVscyksXG4gICAgICAgICAgICBoaXN0b3NpemUgPSAxIDw8ICgzICogc2lnYml0cyk7XG5cbiAgICAgICAgLy8gY2hlY2sgdGhhdCB3ZSBhcmVuJ3QgYmVsb3cgbWF4Y29sb3JzIGFscmVhZHlcbiAgICAgICAgdmFyIG5Db2xvcnMgPSAwO1xuICAgICAgICBoaXN0by5mb3JFYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgbkNvbG9ycysrXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobkNvbG9ycyA8PSBtYXhjb2xvcnMpIHtcbiAgICAgICAgICAgIC8vIFhYWDogZ2VuZXJhdGUgdGhlIG5ldyBjb2xvcnMgZnJvbSB0aGUgaGlzdG8gYW5kIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZ2V0IHRoZSBiZWdpbm5pbmcgdmJveCBmcm9tIHRoZSBjb2xvcnNcbiAgICAgICAgdmFyIHZib3ggPSB2Ym94RnJvbVBpeGVscyhwaXhlbHMsIGhpc3RvKSxcbiAgICAgICAgICAgIHBxID0gbmV3IFBRdWV1ZShmdW5jdGlvbihhLCBiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHB2Lm5hdHVyYWxPcmRlcihhLmNvdW50KCksIGIuY291bnQoKSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBwcS5wdXNoKHZib3gpO1xuXG4gICAgICAgIC8vIGlubmVyIGZ1bmN0aW9uIHRvIGRvIHRoZSBpdGVyYXRpb25cblxuICAgICAgICBmdW5jdGlvbiBpdGVyKGxoLCB0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBuY29sb3JzID0gMSxcbiAgICAgICAgICAgICAgICBuaXRlcnMgPSAwLFxuICAgICAgICAgICAgICAgIHZib3g7XG4gICAgICAgICAgICB3aGlsZSAobml0ZXJzIDwgbWF4SXRlcmF0aW9ucykge1xuICAgICAgICAgICAgICAgIHZib3ggPSBsaC5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXZib3guY291bnQoKSkgeyAvKiBqdXN0IHB1dCBpdCBiYWNrICovXG4gICAgICAgICAgICAgICAgICAgIGxoLnB1c2godmJveCk7XG4gICAgICAgICAgICAgICAgICAgIG5pdGVycysrO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gZG8gdGhlIGN1dFxuICAgICAgICAgICAgICAgIHZhciB2Ym94ZXMgPSBtZWRpYW5DdXRBcHBseShoaXN0bywgdmJveCksXG4gICAgICAgICAgICAgICAgICAgIHZib3gxID0gdmJveGVzWzBdLFxuICAgICAgICAgICAgICAgICAgICB2Ym94MiA9IHZib3hlc1sxXTtcblxuICAgICAgICAgICAgICAgIGlmICghdmJveDEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJ2Ym94MSBub3QgZGVmaW5lZDsgc2hvdWxkbid0IGhhcHBlbiFcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGgucHVzaCh2Ym94MSk7XG4gICAgICAgICAgICAgICAgaWYgKHZib3gyKSB7IC8qIHZib3gyIGNhbiBiZSBudWxsICovXG4gICAgICAgICAgICAgICAgICAgIGxoLnB1c2godmJveDIpO1xuICAgICAgICAgICAgICAgICAgICBuY29sb3JzKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChuY29sb3JzID49IHRhcmdldCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGlmIChuaXRlcnMrKyA+IG1heEl0ZXJhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJpbmZpbml0ZSBsb29wOyBwZXJoYXBzIHRvbyBmZXcgcGl4ZWxzIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZpcnN0IHNldCBvZiBjb2xvcnMsIHNvcnRlZCBieSBwb3B1bGF0aW9uXG4gICAgICAgIGl0ZXIocHEsIGZyYWN0QnlQb3B1bGF0aW9ucyAqIG1heGNvbG9ycyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHBxLnNpemUoKSwgcHEuZGVidWcoKS5sZW5ndGgsIHBxLmRlYnVnKCkuc2xpY2UoKSk7XG5cbiAgICAgICAgLy8gUmUtc29ydCBieSB0aGUgcHJvZHVjdCBvZiBwaXhlbCBvY2N1cGFuY3kgdGltZXMgdGhlIHNpemUgaW4gY29sb3Igc3BhY2UuXG4gICAgICAgIHZhciBwcTIgPSBuZXcgUFF1ZXVlKGZ1bmN0aW9uKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBwdi5uYXR1cmFsT3JkZXIoYS5jb3VudCgpICogYS52b2x1bWUoKSwgYi5jb3VudCgpICogYi52b2x1bWUoKSlcbiAgICAgICAgfSk7XG4gICAgICAgIHdoaWxlIChwcS5zaXplKCkpIHtcbiAgICAgICAgICAgIHBxMi5wdXNoKHBxLnBvcCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG5leHQgc2V0IC0gZ2VuZXJhdGUgdGhlIG1lZGlhbiBjdXRzIHVzaW5nIHRoZSAobnBpeCAqIHZvbCkgc29ydGluZy5cbiAgICAgICAgaXRlcihwcTIsIG1heGNvbG9ycyAtIHBxMi5zaXplKCkpO1xuXG4gICAgICAgIC8vIGNhbGN1bGF0ZSB0aGUgYWN0dWFsIGNvbG9yc1xuICAgICAgICB2YXIgY21hcCA9IG5ldyBDTWFwKCk7XG4gICAgICAgIHdoaWxlIChwcTIuc2l6ZSgpKSB7XG4gICAgICAgICAgICBjbWFwLnB1c2gocHEyLnBvcCgpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjbWFwO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICAgIHF1YW50aXplOiBxdWFudGl6ZVxuICAgIH1cbn0pKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gTU1DUS5xdWFudGl6ZVxuIiwgImltcG9ydCB7IEVkaXRvciwgTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgTm90aWNlLCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbidcbmltcG9ydCB7IEVkaXRvck1vZGFsIH0gZnJvbSAnY29tcG9uZW50cy9FZGl0b3JNb2RhbCc7XG5pbXBvcnQgeyBHZW5lcmF0ZU1vZGFsIH0gZnJvbSAnY29tcG9uZW50cy9HZW5lcmF0ZU1vZGFsJztcbmltcG9ydCB7IENvbG9yUGFsZXR0ZVNldHRpbmdzLCBkZWZhdWx0U2V0dGluZ3MsIFNldHRpbmdzVGFiIH0gZnJvbSAnc2V0dGluZ3MnO1xuaW1wb3J0IHsgUGFsZXR0ZU1SQyB9IGZyb20gJ2NvbXBvbmVudHMvUGFsZXR0ZU1SQyc7XG5pbXBvcnQgeyBjcmVhdGVQYWxldHRlQmxvY2sgfSBmcm9tICd1dGlscy9iYXNpY1V0aWxzJztcblxuZXhwb3J0IGNvbnN0IHVybFJlZ2V4ID0gLyg/Omh0dHBzOlxcL1xcL3d3d1xcLnxodHRwOlxcL1xcL3d3d1xcLnxodHRwczpcXC9cXC98aHR0cDpcXC9cXC8pP1thLXpBLVowLTldezIsfSg/OlxcLlthLXpBLVowLTldezIsfSkoPzpcXC5bYS16QS1aMC05XXsyLH0pP1xcLyg/OnBhbGV0dGVcXC8pPyhbYS16QS1aMC05LV17Mix9KS9cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29sb3JQYWxldHRlIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IENvbG9yUGFsZXR0ZVNldHRpbmdzO1xuXHRwYWxldHRlcz86IFBhbGV0dGVNUkNbXTtcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0dGhpcy5wYWxldHRlcyA9IFtdO1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHQvKipcblx0XHQgKiBDaGFuZ2VzIHdoZW4gdGV4dCBsZW5ndGggaXMgZXh0ZW5kZWQgb3Igc2hvcnRlbmVkLlxuXHRcdCAqIERPRVMgTk9UIGNoYW5nZSB3aGVuIHRleHQgbGVuZ3RoIHJlbWFpbnMgdGhlIHNhbWUuXG5cdFx0ICogVGhpcyBtZWFucyBzaW1wbHkgc3dhcHBpbmcgY2hhcmFjdGVycywgYnV0IGhhdmluZyB0aGUgc2FtZSBsZW5ndGggd29uJ3QgdXBkYXRlIHRoaXMgZnVuY3Rpb24uXG5cdFx0ICovXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duQ29kZUJsb2NrUHJvY2Vzc29yKFxuXHRcdFx0J3BhbGV0dGUnLFxuXHRcdFx0YXN5bmMgKHNvdXJjZTogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQsIGN0eDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCkgPT4ge1xuXHRcdFx0XHRjdHguYWRkQ2hpbGQobmV3IFBhbGV0dGVNUkModGhpcywgZWwsIHNvdXJjZS50cmltKCksIGN0eCkpO1xuXHRcdFx0fVxuXHRcdClcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2NyZWF0ZScsXG5cdFx0XHRuYW1lOiAnQ3JlYXRlJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcblx0XHRcdFx0bmV3IEVkaXRvck1vZGFsKHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzLCAoY29sb3JzLCBzZXR0aW5ncykgPT4ge1xuXHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRjb25zdCByZXN1bHQgPSBjcmVhdGVQYWxldHRlQmxvY2soe2NvbG9ycywgc2V0dGluZ3N9KTtcblx0XHRcdFx0XHRcdGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcblx0XHRcdFx0XHRcdGVkaXRvci50cmFuc2FjdGlvbih7XG5cdFx0XHRcdFx0XHRcdGNoYW5nZXM6IFt7IGZyb206IGN1cnNvciwgdGV4dDogcmVzdWx0IH1dXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7XG5cdFx0XHRcdFx0XHRcdGxpbmU6IGN1cnNvci5saW5lICsgcmVzdWx0LnNwbGl0KCdcXG4nKS5sZW5ndGgsXG5cdFx0XHRcdFx0XHRcdGNoOiAwXG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgQWRkZWQgJHtyZXN1bHR9YCk7XG5cdFx0XHRcdFx0fSBcblx0XHRcdFx0XHRjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdG5ldyBOb3RpY2UoZXJyb3IpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdFx0Lm9wZW4oKTtcblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnY29udmVydC1saW5rJyxcblx0XHRcdG5hbWU6ICdDb252ZXJ0IGxpbmsnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3I6IEVkaXRvcikgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGxldCBsaW5rID0gJyc7XG5cdFx0XHRcdFx0Y29uc3QgZWRpdG9yU2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuXHRcdFx0XHRcdGNvbnN0IGNsaXBib2FyZFRleHQgPSBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLnJlYWRUZXh0KCk7XG5cblx0XHRcdFx0XHQvLyBDaGVjayBpZiBzZWxlY3Rpb24gdGV4dCBtYXRjaGVzIHJlZ2V4XG5cdFx0XHRcdFx0aWYoZWRpdG9yU2VsZWN0aW9uLm1hdGNoKGBeJHt1cmxSZWdleC5zb3VyY2V9JGApKSBsaW5rID0gZWRpdG9yU2VsZWN0aW9uO1xuXHRcdFx0XHRcdC8vIENoZWNrIGlmIGNsaXBib2FyZCB0ZXh0IG1hdGNoZXMgcmVnZXhcblx0XHRcdFx0XHRlbHNlIGlmKGNsaXBib2FyZFRleHQubWF0Y2goYF4ke3VybFJlZ2V4LnNvdXJjZX0kYCkpIGxpbmsgPSBjbGlwYm9hcmRUZXh0O1xuXHRcdFx0XHRcdC8vIFRocm93IGVycm9yIGlmIHNlbGVjdGlvbiAmIGNsaXBib2FyZCBkb24ndCBtYXRjaCBVUkwgcmVnZXhcblx0XHRcdFx0XHRlbHNlIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGNvbnZlcnQgbGluay4gUGxlYXNlIHNlbGVjdCBvciBjb3B5IGEgbGluaywgdGhlbiB0cnkgYWdhaW4uJyk7XG5cblx0XHRcdFx0XHRjb25zdCBjb2RlQmxvY2sgPSBjcmVhdGVQYWxldHRlQmxvY2sobGluayk7XG5cdFx0XHRcdFx0Y29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuXHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKGNvZGVCbG9jayk7XG5cdFx0XHRcdFx0ZWRpdG9yLnNldEN1cnNvcih7XG5cdFx0XHRcdFx0XHRsaW5lOiBjdXJzb3IubGluZSArIGNvZGVCbG9jay5zcGxpdCgnXFxuJykubGVuZ3RoLFxuXHRcdFx0XHRcdFx0Y2g6IDBcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKGBDb252ZXJ0ZWQgJHtlZGl0b3JTZWxlY3Rpb24gfHwgY2xpcGJvYXJkVGV4dH1gKTtcblx0XHRcdFx0fSBcblx0XHRcdFx0Y2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShlcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnY29udmVydC1jb2RlYmxvY2stbGluay10by1oZXgnLFxuXHRcdFx0bmFtZTogJ0NvbnZlcnQgY29kZWJsb2NrIGxpbmsgdG8gaGV4Jyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb25zdCBjb2RlQmxvY2sgPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG5cdFx0XHRcdFx0Y29uc3QgbXVsdGlSZWcgPSBSZWdFeHAoLyg/OlxcYHszfXBhbGV0dGUpXFxuKD88dXJsPi4qKSg/Olxcbig/PHNldHRpbmdzPi4rKSk/XFxuXFxgezN9LywgJ2cnKTtcblx0XHRcdFx0XHRjb25zdCBjb250ZW50ID0gWy4uLmNvZGVCbG9jay5tYXRjaEFsbChtdWx0aVJlZyldPy5bMF0/LnNsaWNlKDEpO1xuXHRcdFx0XHRcdGNvbnN0IHVybCA9IGNvbnRlbnQ/LlswXTtcblx0XHRcdFx0XHRpZighdXJsKSB0aHJvdyBuZXcgRXJyb3IoJ1NlbGVjdGVkIHRleHQgaXMgbm90IGEgY29kZWJsb2NrIHdpdGggYSBsaW5rLicpO1xuXHRcdFx0XHRcdGxldCBjb2xvcnM6IHN0cmluZ1tdID0gW107XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgbGluayAmIGNvbnRhaW5zIGRhc2hlcyAoY29vbG9yIHVybClcblx0XHRcdFx0XHR1cmwubWF0Y2godXJsUmVnZXgpICYmIHVybC5pbmNsdWRlcygnLScpID8gXG5cdFx0XHRcdFx0Y29sb3JzID0gdXJsLnN1YnN0cmluZyh1cmwubGFzdEluZGV4T2YoJy8nKSArIDEpLnNwbGl0KCctJykubWFwKGkgPT4gJyMnICsgaSlcblx0XHRcdFx0XHQ6XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgbGluayAoY29sb3JodW50KVxuXHRcdFx0XHRcdHVybC5tYXRjaCh1cmxSZWdleCkgP1xuXHRcdFx0XHRcdGNvbG9ycyA9IHVybC5zdWJzdHJpbmcodXJsLmxhc3RJbmRleE9mKCcvJykgKyAxKS5tYXRjaCgvLnsxLDZ9L2cpPy5tYXAoaSA9PiAnIycgKyBpKSB8fCBbJ0ludmFsaWQgUGFsZXR0ZSddXG5cdFx0XHRcdFx0OiBcblx0XHRcdFx0XHRjb2xvcnMgPSBbJ0ludmFsaWQgUGFsZXR0ZSddXG5cdFxuXHRcdFx0XHRcdGlmKGNvbG9yc1swXSA9PT0gJ0ludmFsaWQgUGFsZXR0ZScpIHRocm93IG5ldyBFcnJvcignU2VsZWN0ZWQgY29kZWJsb2NrIGNhbiBub3QgYmUgY29udmVydGVkIHRvIGhleC4nKTtcblxuXHRcdFx0XHRcdGxldCBuZXdCbG9jaztcblxuXHRcdFx0XHRcdC8vIENoZWNrIGlmIHNldHRpbmdzIHdlcmUgc3BlY2lmaWVkXG5cdFx0XHRcdFx0aWYoIWNvbnRlbnQ/LlsxXSkge1xuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIHBhbGV0dGUgd2l0aG91dCBzZXR0aW5nc1xuXHRcdFx0XHRcdFx0bmV3QmxvY2sgPSBjcmVhdGVQYWxldHRlQmxvY2soeyBjb2xvcnMgfSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29uc3Qgc2V0dGluZ3MgPSBKU09OLnBhcnNlKGNvbnRlbnRbMV0pO1xuXHRcdFx0XHRcdFx0Ly8gQ3JlYXRlIHBhbGV0dGUgd2l0aCBzZXR0aW5nc1xuXHRcdFx0XHRcdFx0Y3JlYXRlUGFsZXR0ZUJsb2NrKHsgY29sb3JzLCBzZXR0aW5ncyB9KTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZihuZXdCbG9jaykge1xuXHRcdFx0XHRcdFx0ZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24obmV3QmxvY2spO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShgQ29udmVydGVkIGNvZGVibG9jayBsaW5rIHRvIGhleGApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIHRocm93IG5ldyBFcnJvcignU2VsZWN0ZWQgY29kZWJsb2NrIGNhbiBub3QgYmUgY29udmVydGVkIHRvIGhleC4nKTtcblx0XHRcdFx0fSBcblx0XHRcdFx0Y2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShlcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KVxuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnZ2VuZXJhdGUtcmFuZG9tLXBhbGV0dGUnLFxuXHRcdFx0bmFtZTogJ0dlbmVyYXRlIHJhbmRvbSBwYWxldHRlJyxcblx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcblx0XHRcdFx0bmV3IEdlbmVyYXRlTW9kYWwodGhpcy5hcHAsIGVkaXRvciwgdGhpcy5zZXR0aW5ncykub3BlbigpO1xuXHRcdFx0fVxuXHRcdH0pXG5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNldHRpbmdzVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cdH1cblx0XG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdFNldHRpbmdzLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cbn0iLCAiaW1wb3J0IHsgQXBwLCBCdXR0b25Db21wb25lbnQsIENvbG9yQ29tcG9uZW50LCBEcm9wZG93bkNvbXBvbmVudCwgTW9kYWwsIE5vdGljZSwgU2V0dGluZywgU2xpZGVyQ29tcG9uZW50LCBUZXh0Q29tcG9uZW50IH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBQYWxldHRlLCBQYWxldHRlU2V0dGluZ3MgfSBmcm9tIFwiLi9QYWxldHRlXCI7XG5pbXBvcnQgeyB1cmxSZWdleCB9IGZyb20gXCJtYWluXCI7XG5pbXBvcnQgY29sb3JzZWEgZnJvbSBcImNvbG9yc2VhXCI7XG5pbXBvcnQgeyBEaXJlY3Rpb24sIENvbG9yUGFsZXR0ZVNldHRpbmdzIH0gZnJvbSBcInNldHRpbmdzXCI7XG5pbXBvcnQgeyBDb21iaW5hdGlvbiwgZ2VuZXJhdGVDb2xvcnMgfSBmcm9tIFwidXRpbHMvZ2VuZXJhdGVVdGlsc1wiO1xuaW1wb3J0IHsgZ2V0TW9kaWZpZWRTZXR0aW5ncywgcGFyc2VVcmwsIHBsdWdpblRvUGFsZXR0ZVNldHRpbmdzIH0gZnJvbSBcInV0aWxzL2Jhc2ljVXRpbHNcIjtcbmltcG9ydCBDYW52YXNJbWFnZSBmcm9tIFwidXRpbHMvaW1hZ2VVdGlsc1wiO1xuXG5lbnVtIFNlbGVjdGVkSW5wdXQge1xuICAgIENvbG9yX1BpY2tlciA9IFwiQ29sb3IgUGlja2VyXCIsXG4gICAgR2VuZXJhdGUgPSBcIkdlbmVyYXRlXCIsXG4gICAgSW1hZ2UgPSBcIkltYWdlXCIsXG4gICAgVVJMID0gXCJVUkxcIixcbn1cblxuZXhwb3J0IGNsYXNzIEVkaXRvck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpblNldHRpbmdzOiBDb2xvclBhbGV0dGVTZXR0aW5nc1xuICAgIHNldHRpbmdzOiBQYWxldHRlU2V0dGluZ3NcbiAgICBjb2xvcnM6IHN0cmluZ1tdXG4gICAgc2VsZWN0ZWRJbnB1dDogU2VsZWN0ZWRJbnB1dFxuICAgIGNvbWJpbmF0aW9uOiBDb21iaW5hdGlvblxuICAgIG9uU3VibWl0OiAoY29sb3JzOiBzdHJpbmdbXSwgc2V0dGluZ3M6IFBhcnRpYWw8UGFsZXR0ZVNldHRpbmdzPiB8IHVuZGVmaW5lZCkgPT4gdm9pZFxuICAgIGJhc2VDb2xvcj86IFJldHVyblR5cGU8dHlwZW9mIGNvbG9yc2VhPlxuICAgIHBhbGV0dGU/OiBQYWxldHRlO1xuICAgIG1vZGFsUmVjdDogRE9NUmVjdDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW5TZXR0aW5nczogQ29sb3JQYWxldHRlU2V0dGluZ3MsIG9uU3VibWl0OiAoY29sb3JzOiBzdHJpbmdbXSwgc2V0dGluZ3M6IFBhcnRpYWw8UGFsZXR0ZVNldHRpbmdzPiB8IHVuZGVmaW5lZCkgPT4gdm9pZCwgcGFsZXR0ZT86IFBhbGV0dGUpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICAgICAgICB0aGlzLnBsdWdpblNldHRpbmdzID0gcGx1Z2luU2V0dGluZ3M7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBwbHVnaW5Ub1BhbGV0dGVTZXR0aW5ncyhwbHVnaW5TZXR0aW5ncyk7XG4gICAgICAgIHRoaXMuY29sb3JzID0gW11cbiAgICAgICAgdGhpcy5zZWxlY3RlZElucHV0ID0gU2VsZWN0ZWRJbnB1dC5Db2xvcl9QaWNrZXI7XG4gICAgICAgIHRoaXMuY29tYmluYXRpb24gPSBDb21iaW5hdGlvbi5SYW5kb207XG4gICAgICAgIHRoaXMuYmFzZUNvbG9yID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLnBhbGV0dGUgPSBwYWxldHRlO1xuXG4gICAgICAgIGNvbnN0IHJlc2l6ZU9ic2VydmVyID0gbmV3IFJlc2l6ZU9ic2VydmVyKChtb2RhbHMpID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbW9kYWwgb2YgbW9kYWxzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBBcnJheS5mcm9tKG1vZGFsLnRhcmdldC5jaGlsZHJlbikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYoY2hpbGQuaGFzQ2xhc3MoJ21vZGFsJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihjb25zdCBtb2RhbENoaWxkIG9mIEFycmF5LmZyb20oY2hpbGQuY2hpbGRyZW4pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYobW9kYWxDaGlsZC5oYXNDbGFzcygncGFsZXR0ZS1lZGl0b3InKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgbW9kYWwgYm91bmRpbmcgcmVjdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGFsUmVjdCA9IG1vZGFsQ2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSAgXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHJlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy5jb250YWluZXJFbCk7XG4gICAgfVxuXG4gICAgb25PcGVuKCk6IHZvaWQgeyAgICAgICAgXG4gICAgICAgIC8vIEhlYWRlclxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnaDEnLCB7IHRleHQ6ICdFZGl0b3InIH0pXG4gICAgICAgIHRoaXMuY29udGVudEVsLmFkZENsYXNzKCdwYWxldHRlLWVkaXRvcicpO1xuXG4gICAgICAgIC8vIEFkZCBDb2xvcnNcbiAgICAgICAgY29uc3QgY29sb3JzQ29udGFpbmVyID0gdGhpcy5jb250ZW50RWwuY3JlYXRlRWwoJ3NlY3Rpb24nKTtcbiAgICAgICAgLy8gQ3JlYXRlIGhlYWRlciBmb3IgY29sb3JzIHNlY3Rpb25cbiAgICAgICAgY29sb3JzQ29udGFpbmVyLmNyZWF0ZUVsKCdoMycpLnNldFRleHQoJ0NvbG9ycycpO1xuXG4gICAgICAgIC8vIFRhYnNcbiAgICAgICAgbGV0IGNvbnRyb2xDb250YWluZXIgPSBjb2xvcnNDb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlRGl2KCkpO1xuICAgICAgICBjb250cm9sQ29udGFpbmVyLmFkZENsYXNzKCdjb250cm9sLWNvbnRhaW5lcicpO1xuXG4gICAgICAgIC8vIFByZXZpZXdcbiAgICAgICAgY29uc3QgcHJldmlld0NvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLmNyZWF0ZUVsKCdzZWN0aW9uJyk7XG4gICAgICAgIHByZXZpZXdDb250YWluZXIuY3JlYXRlRWwoJ2gzJyk7XG5cbiAgICAgICAgLy8gU2V0dGluZ3NcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NDb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5jcmVhdGVFbCgnc2VjdGlvbicpO1xuICAgICAgICAvLyBDcmVhdGUgaGVhZGVyIGZvciBzZXR0aW5ncyBzZWN0aW9uXG4gICAgICAgIHNldHRpbmdzQ29udGFpbmVyLmNyZWF0ZUVsKCdoMycpLnNldFRleHQoJ1NldHRpbmdzJyk7XG5cbiAgICAgICAgY29uc3QgY29sb3JQaWNrZXJCdG4gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRyb2xDb250YWluZXIpXG4gICAgICAgICAgICAuc2V0SWNvbigncGlwZXR0ZScpXG4gICAgICAgICAgICAuc2V0VG9vbHRpcCgnQ29sb3IgUGlja2VyJylcbiAgICAgICAgICAgIC5vbkNsaWNrKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY2hhbmdlU2VsZWN0ZWRJbnB1dChTZWxlY3RlZElucHV0LkNvbG9yX1BpY2tlcik7XG4gICAgICAgICAgICB9KVxuICAgICAgICBjb25zdCBnZW5lcmF0ZUJ0biA9IG5ldyBCdXR0b25Db21wb25lbnQoY29udHJvbENvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXRJY29uKCdzaHVmZmxlJylcbiAgICAgICAgICAgIC5zZXRUb29sdGlwKCdHZW5lcmF0ZScpXG4gICAgICAgICAgICAub25DbGljaygoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGNoYW5nZVNlbGVjdGVkSW5wdXQoU2VsZWN0ZWRJbnB1dC5HZW5lcmF0ZSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICBjb25zdCBpbWFnZUJ0biA9IG5ldyBCdXR0b25Db21wb25lbnQoY29udHJvbENvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXRJY29uKCdpbWFnZScpXG4gICAgICAgICAgICAuc2V0VG9vbHRpcCgnSW1hZ2UnKVxuICAgICAgICAgICAgLm9uQ2xpY2soKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjaGFuZ2VTZWxlY3RlZElucHV0KFNlbGVjdGVkSW5wdXQuSW1hZ2UpXG4gICAgICAgICAgICB9KVxuICAgICAgICBjb25zdCB1cmxCdG4gPSBuZXcgQnV0dG9uQ29tcG9uZW50KGNvbnRyb2xDb250YWluZXIpXG4gICAgICAgICAgICAuc2V0SWNvbignbGluaycpXG4gICAgICAgICAgICAuc2V0VG9vbHRpcCgnVVJMJylcbiAgICAgICAgICAgIC5vbkNsaWNrKChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY2hhbmdlU2VsZWN0ZWRJbnB1dChTZWxlY3RlZElucHV0LlVSTCk7XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgIGxldCBhZGRDb2xvcnNDb250YWluZXIgPSBjb2xvcnNDb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlRWwoJ2RpdicpKTtcbiAgICAgICAgYWRkQ29sb3JzQ29udGFpbmVyLmFkZENsYXNzKCdjb2xvcnMtY29udGFpbmVyJyk7XG5cbiAgICAgICAgZnVuY3Rpb24gY2hhbmdlU2VsZWN0ZWRJbnB1dChzZWxlY3RlZElucHV0OiBTZWxlY3RlZElucHV0KSB7XG4gICAgICAgICAgICByZXNldFN0eWxlKCk7XG4gICAgICAgICAgICBzd2l0Y2goc2VsZWN0ZWRJbnB1dCkge1xuICAgICAgICAgICAgICAgIGNhc2UgU2VsZWN0ZWRJbnB1dC5Db2xvcl9QaWNrZXI6XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyQnRuLnNldEN0YSgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRDb2xvcnNDb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlQ29sb3JQaWNrZXIoYWRkQ29sb3JzQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkQ29sb3JzQ29udGFpbmVyLnRvZ2dsZUNsYXNzKCdzZWxlY3QtY29sb3ItcGlja2VyJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgU2VsZWN0ZWRJbnB1dC5HZW5lcmF0ZTpcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGVCdG4uc2V0Q3RhKCk7XG4gICAgICAgICAgICAgICAgICAgIGFkZENvbG9yc0NvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICAgICAgICAgICAgICBjcmVhdGVHZW5lcmF0ZShhZGRDb2xvcnNDb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICBhZGRDb2xvcnNDb250YWluZXIudG9nZ2xlQ2xhc3MoJ3NlbGVjdC1nZW5lcmF0ZScsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFNlbGVjdGVkSW5wdXQuSW1hZ2U6XG4gICAgICAgICAgICAgICAgICAgIGltYWdlQnRuLnNldEN0YSgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRDb2xvcnNDb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlSW1hZ2UoYWRkQ29sb3JzQ29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICAgICAgYWRkQ29sb3JzQ29udGFpbmVyLnRvZ2dsZUNsYXNzKCdzZWxlY3QtaW1hZ2UnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBTZWxlY3RlZElucHV0LlVSTDpcbiAgICAgICAgICAgICAgICAgICAgdXJsQnRuLnNldEN0YSgpO1xuICAgICAgICAgICAgICAgICAgICBhZGRDb2xvcnNDb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVVJMKGFkZENvbG9yc0NvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIGFkZENvbG9yc0NvbnRhaW5lci50b2dnbGVDbGFzcygnc2VsZWN0LXVybCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzZXRTdHlsZSgpIHtcbiAgICAgICAgICAgICAgICBjb2xvclBpY2tlckJ0bi5yZW1vdmVDdGEoKTtcbiAgICAgICAgICAgICAgICBnZW5lcmF0ZUJ0bi5yZW1vdmVDdGEoKTtcbiAgICAgICAgICAgICAgICBpbWFnZUJ0bi5yZW1vdmVDdGEoKTtcbiAgICAgICAgICAgICAgICB1cmxCdG4ucmVtb3ZlQ3RhKCk7XG4gICAgICAgICAgICAgICAgYWRkQ29sb3JzQ29udGFpbmVyLnRvZ2dsZUNsYXNzKCdzZWxlY3QtY29sb3ItcGlja2VyJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGFkZENvbG9yc0NvbnRhaW5lci50b2dnbGVDbGFzcygnc2VsZWN0LWdlbmVyYXRlJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGFkZENvbG9yc0NvbnRhaW5lci50b2dnbGVDbGFzcygnc2VsZWN0LWltYWdlJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgIGFkZENvbG9yc0NvbnRhaW5lci50b2dnbGVDbGFzcygnc2VsZWN0LXVybCcsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNyZWF0ZUNvbG9yUGlja2VyID0gKGFkZENvbG9yc0NvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGxldCBhZGRDb2xvcnMgPSBuZXcgU2V0dGluZyhhZGRDb2xvcnNDb250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkNvbG9yIFBpY2tlclwiKVxuICAgICAgICAgICAgLnNldERlc2MoJ1VzZSBoYW5kcGlja2VkIGNvbG9ycycpXG5cbiAgICAgICAgICAgIGNvbnN0IGNvbG9yUGlja2VySW5wdXQgPSBuZXcgQ29sb3JDb21wb25lbnQoYWRkQ29sb3JzLmNvbnRyb2xFbClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29sb3JzLnB1c2godmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmFsaWFzZXMucHVzaCgnJyk7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBhbGV0dGVQcmV2aWV3KCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNyZWF0ZUdlbmVyYXRlID0gKGFkZENvbG9yc0NvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGxldCBhZGRDb2xvcnMgPSBuZXcgU2V0dGluZyhhZGRDb2xvcnNDb250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkdlbmVyYXRlXCIpXG4gICAgICAgICAgICAuc2V0RGVzYygnR2VuZXJhdGUgY29sb3JzIGJhc2VkIG9uIGNvbG9yIHRoZW9yeScpXG5cbiAgICAgICAgICAgIGNvbnN0IGRyb3Bkb3duSW5wdXQgPSBuZXcgRHJvcGRvd25Db21wb25lbnQoYWRkQ29sb3JzLmNvbnRyb2xFbClcbiAgICAgICAgICAgIC8vIEFkZCBkcm9wZG93biBvcHRpb25zXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhDb21iaW5hdGlvbikuZm9yRWFjaCgoY29tYmluYXRpb24pID0+IGRyb3Bkb3duSW5wdXQuYWRkT3B0aW9uKGNvbWJpbmF0aW9uLCBjb21iaW5hdGlvbikpXG4gICAgICAgICAgICBkcm9wZG93bklucHV0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMuY29tYmluYXRpb24pXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbWJpbmF0aW9uID0gdmFsdWUgYXMgQ29tYmluYXRpb247XG4gICAgICAgICAgICAgICAgICAgIC8vIERpc2FibGUgY29sb3IgcGlja2VyIGlmIHNlbGVjdGVkIGNvbWJpbmF0aW9uIGlzIHJhbmRvbVxuICAgICAgICAgICAgICAgICAgICBjb2xvclBpY2tlcklucHV0LnNldERpc2FibGVkKHRoaXMuY29tYmluYXRpb24gPT09IENvbWJpbmF0aW9uLlJhbmRvbSA/IHRydWUgOiBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgY29uc3QgY29sb3JQaWNrZXJJbnB1dCA9IG5ldyBDb2xvckNvbXBvbmVudChhZGRDb2xvcnMuY29udHJvbEVsKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5iYXNlQ29sb3IgPSBjb2xvcnNlYSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuc2V0RGlzYWJsZWQodGhpcy5jb21iaW5hdGlvbiA9PT0gQ29tYmluYXRpb24uUmFuZG9tID8gdHJ1ZSA6IGZhbHNlKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbG9yUGlja2VyID0gQXJyYXkuZnJvbShhZGRDb2xvcnMuY29udHJvbEVsLmNoaWxkcmVuKVsxXSBhcyBIVE1MSW5wdXRFbGVtZW50XG4gICAgICAgICAgICBjb2xvclBpY2tlci5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29sb3JQaWNrZXJJbnB1dC5zZXRWYWx1ZShjb2xvcnNlYSgnIzAwMCcpLmhleCgpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmJhc2VDb2xvciA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBidXR0b25JbnB1dCA9IG5ldyBCdXR0b25Db21wb25lbnQoYWRkQ29sb3JzLmNvbnRyb2xFbClcbiAgICAgICAgICAgICAgICAuc2V0SWNvbignc2h1ZmZsZScpXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ0xvYWRzIHRoZSBnZW5lcmF0ZWQgY29sb3JzJylcbiAgICAgICAgICAgICAgICAub25DbGljaygoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBjb2xvcnMgJiBzZXR0aW5nc1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBnZW5lcmF0ZWQgPSBnZW5lcmF0ZUNvbG9ycyh0aGlzLmNvbWJpbmF0aW9uLCB7IGJhc2VDb2xvcjogdGhpcy5iYXNlQ29sb3IsIHNldHRpbmdzOiB0aGlzLnNldHRpbmdzIH0pO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9ycyA9IGdlbmVyYXRlZC5jb2xvcnM7XG4gICAgICAgICAgICAgICAgICAgIGlmKGdlbmVyYXRlZC5zZXR0aW5ncykgdGhpcy5zZXR0aW5ncyA9IGdlbmVyYXRlZC5zZXR0aW5ncztcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGFsZXR0ZVByZXZpZXcoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY3JlYXRlSW1hZ2UgPSAoYWRkQ29sb3JzQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgLy8gUmVwcmVzZW50cyBib3RoIGV4dGVybmFsICYgaW50ZXJuYWwgaW1hZ2UgVVJMc1xuICAgICAgICAgICAgbGV0IGZpbGVVUkwgPSAnJztcblxuICAgICAgICAgICAgbGV0IGFkZENvbG9ycyA9IG5ldyBTZXR0aW5nKGFkZENvbG9yc0NvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXRDbGFzcygnYWRkLWNvbG9ycycpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkltYWdlXCIpXG4gICAgICAgICAgICAuc2V0RGVzYygnQ29udmVydCBpbWFnZSBpbnRvIHBhbGV0dGUnKVxuXG4gICAgICAgICAgICBjb25zdCBpbnB1dENvbnRhaW5lciA9IGFkZENvbG9ycy5jb250cm9sRWwuYXBwZW5kQ2hpbGQoY3JlYXRlRWwoJ2RpdicpKTtcblxuICAgICAgICAgICAgLy8gQ29udGFpbnMgdXJsSW5wdXQsIGxvYWRCdXR0b24sICYgZmlsZUlucHV0XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RDb250YWluZXIgPSBpbnB1dENvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVFbCgnZGl2JykpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB1cmxJbnB1dCA9IG5ldyBUZXh0Q29tcG9uZW50KHNlbGVjdENvbnRhaW5lcilcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIFVSTCBvciBzZWxlY3QgZmlsZScpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4gZmlsZVVSTCA9IHZhbHVlKVxuXG4gICAgICAgICAgICBjb25zdCBsb2FkQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudChzZWxlY3RDb250YWluZXIpXG4gICAgICAgICAgICAgICAgLnNldEljb24oJ2Fycm93LXVwLXRvLWxpbmUnKVxuICAgICAgICAgICAgICAgIC5zZXRUb29sdGlwKCdSaWdodCBjbGljayB0byBjbGVhciBVUkwnKVxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBhbnkgdGV4dCBpcyBwcmVzZW50LCBvdGhlcndpc2UgcHJvbXB0IHVzZXIgdG8gc2VsZWN0IGltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih1cmxJbnB1dC5nZXRWYWx1ZSgpICE9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIFVSTCBpcyB2YWxpZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChVUkwuY2FuUGFyc2UodXJsSW5wdXQuZ2V0VmFsdWUoKSkpIGF3YWl0IHVwZGF0ZUltYWdlUHJldmlldyh1cmxJbnB1dC5nZXRWYWx1ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHRocm93IG5ldyBFcnJvcignVVJMIHByb3ZpZGVkIGlzIG5vdCB2YWxpZC4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgZmlsZUlucHV0LmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBsb2FkQnV0dG9uLmJ1dHRvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKCkgPT4gdXJsSW5wdXQuc2V0VmFsdWUoJycpKTtcblxuICAgICAgICAgICAgY29uc3QgZmlsZVNlbGVjdG9yID0gbmV3IFRleHRDb21wb25lbnQoc2VsZWN0Q29udGFpbmVyKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IGZpbGVTZWxlY3Rvci5pbnB1dEVsO1xuICAgICAgICAgICAgZmlsZUlucHV0LnR5cGUgPSAnZmlsZSc7XG4gICAgICAgICAgICBmaWxlSW5wdXQuYWNjZXB0ID0gJ2ltYWdlLyonO1xuICAgICAgICAgICAgZmlsZUlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS5maWxlcz8uWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZihmaWxlKSByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYodHlwZW9mIHJlYWRlci5yZXN1bHQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVVSTCA9IHJlYWRlci5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlSW1hZ2VQcmV2aWV3KGZpbGVVUkwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICByZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgaW1hZ2UuJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICBjb25zdCBzbGlkZXJDb250YWluZXIgPSBuZXcgU2V0dGluZyhhZGRDb2xvcnNDb250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ291bnQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1NldCB0aGUgbnVtYmVyIG9mIGNvbG9ycyB0byBnZW5lcmF0ZSBmcm9tIHRoZSBpbWFnZS4nKVxuXG4gICAgICAgICAgICBjb25zdCBjb3VudElucHV0ID0gbmV3IFNsaWRlckNvbXBvbmVudChzbGlkZXJDb250YWluZXIuY29udHJvbEVsKVxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoNCwgMTIsIDEpXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoOClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiBhd2FpdCB1cGRhdGVJbWFnZVByZXZpZXcoZmlsZVVSTCkpXG5cbiAgICAgICAgICAgIGNvbnN0IGltYWdlQ29udGFpbmVyID0gbmV3IFNldHRpbmcoYWRkQ29sb3JzQ29udGFpbmVyKTtcbiAgICAgICAgICAgIGltYWdlQ29udGFpbmVyLnNldENsYXNzKCdpbWFnZS1wcmV2aWV3Jyk7XG4gICAgICAgICAgICBpbWFnZUNvbnRhaW5lci5zZXRDbGFzcygnaGlkZS1pbWFnZS1wcmV2aWV3Jyk7XG5cbiAgICAgICAgICAgIGxldCBoZXg6IHN0cmluZztcblxuICAgICAgICAgICAgY29uc3QgY2FudmFzSW1hZ2UgPSBuZXcgQ2FudmFzSW1hZ2UoaW1hZ2VDb250YWluZXIuY29udHJvbEVsKTtcbiAgICAgICAgICAgIGNhbnZhc0ltYWdlLmNhbnZhcy5zdHlsZS5zZXRQcm9wZXJ0eSgnYm9yZGVyLXJhZGl1cycsIHRoaXMucGx1Z2luU2V0dGluZ3MuY29ybmVycyA/ICc1cHgnIDogJzBweCcpO1xuICAgICAgICAgICAgY2FudmFzSW1hZ2UuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaGV4ID0gY2FudmFzSW1hZ2UuZ2V0Q2FudmFzSGV4KGUuY2xpZW50WCwgZS5jbGllbnRZKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjYW52YXNJbWFnZS5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGlmKCFoZXgpIHJldHVybjtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbG9ycy5wdXNoKGhleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5hbGlhc2VzLnB1c2goJycpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVBhbGV0dGVQcmV2aWV3KCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgY2FudmFzSW1hZ2UuaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpbWFnZUNvbnRhaW5lci5zZXR0aW5nRWwudG9nZ2xlQ2xhc3MoJ2hpZGUtaW1hZ2UtcHJldmlldycsIGZhbHNlKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjYW52YXNJbWFnZS5pbWFnZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnVGhlIFVSTCBwcm92aWRlZCBjb3VsZCBub3QgYmUgbG9hZGVkLicpO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBVcGRhdGVzIHRoZSBpbWFnZSBtb2RlIHByZXZpZXdcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgY29uc3QgdXBkYXRlSW1hZ2VQcmV2aWV3ID0gYXN5bmMgKHVybDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYoIXVybCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNhbnZhc0ltYWdlLnVwZGF0ZSh1cmwsIHRoaXMubW9kYWxSZWN0LndpZHRoLCB0aGlzLm1vZGFsUmVjdC5oZWlnaHQpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY29sb3JzID0gYXdhaXQgY2FudmFzSW1hZ2UuZ2V0UGFsZXR0ZShjb3VudElucHV0LmdldFZhbHVlKCkpO1xuICAgICAgICAgICAgICAgIGlmKGNvbG9ycykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9ycyA9IGNvbG9ycy5tYXAoKGNvbG9yKSA9PiBjb2xvcnNlYShjb2xvcikuaGV4KDApKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5hbGlhc2VzID0gW107XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBhbGV0dGVQcmV2aWV3KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY3JlYXRlVVJMID0gKGFkZENvbG9yc0NvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGxldCBhZGRDb2xvcnMgPSBuZXcgU2V0dGluZyhhZGRDb2xvcnNDb250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZShcIlVSTFwiKVxuICAgICAgICAgICAgLnNldERlc2MoJ09ubHkgY29vbG9ycy5jbyAmIGNvbG9yaHVudC5jbyBhcmUgY3VycmVudGx5IHN1cHBvcnRlZC4nKVxuXG4gICAgICAgICAgICBjb25zdCB0ZXh0SW5wdXQgPSBuZXcgVGV4dENvbXBvbmVudChhZGRDb2xvcnMuY29udHJvbEVsKVxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgVVJMJyk7XG5cbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbklucHV0ID0gbmV3IEJ1dHRvbkNvbXBvbmVudChhZGRDb2xvcnMuY29udHJvbEVsKVxuICAgICAgICAgICAgICAgIC5zZXRJY29uKCdsaW5rJylcbiAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnUmlnaHQgY2xpY2sgdG8gY2xlYXIgVVJMJylcbiAgICAgICAgICAgICAgICAub25DbGljaygoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdXJsVGV4dCA9IHRleHRJbnB1dC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIXVybFRleHQubWF0Y2godXJsUmVnZXgpKSB0aHJvdyBuZXcgRXJyb3IoJ1VSTCBwcm92aWRlZCBpcyBub3QgdmFsaWQuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbG9ycyA9IHBhcnNlVXJsKHVybFRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5hbGlhc2VzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQYWxldHRlUHJldmlldygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgYnV0dG9uSW5wdXQuYnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcignY29udGV4dG1lbnUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dElucHV0LnNldFZhbHVlKCcnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgaW5pdGlhbCBzZWxlY3RlZElucHV0XG4gICAgICAgIGNoYW5nZVNlbGVjdGVkSW5wdXQodGhpcy5zZWxlY3RlZElucHV0KTtcblxuICAgICAgICBsZXQgcGFsZXR0ZVByZXZpZXcgPSBwcmV2aWV3Q29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZURpdigpKTtcbiAgICAgICAgcGFsZXR0ZVByZXZpZXcuYWRkQ2xhc3MoJ3BhbGV0dGUtcHJldmlldycpO1xuXG4gICAgICAgIGNvbnN0IHBhbGV0dGVDb250YWluZXIgPSBwYWxldHRlUHJldmlldy5hcHBlbmRDaGlsZChjcmVhdGVEaXYoKSk7XG4gICAgICAgIC8vIEZpbGwgcGFsZXR0ZSBpbml0aWFsbHkgd2l0aCByYW5kb20gY29sb3JzXG4gICAgICAgIHRoaXMuY29sb3JzID0gdGhpcy5wYWxldHRlID8gdGhpcy5wYWxldHRlLmNvbG9ycyA6IGdlbmVyYXRlQ29sb3JzKENvbWJpbmF0aW9uLlJhbmRvbSkuY29sb3JzO1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gdGhpcy5wYWxldHRlID8gdGhpcy5wYWxldHRlLnNldHRpbmdzIDogdGhpcy5zZXR0aW5ncztcbiAgICAgICAgY29uc3QgcGFsZXR0ZSA9IG5ldyBQYWxldHRlKHRoaXMuY29sb3JzLCB0aGlzLnNldHRpbmdzLCBwYWxldHRlQ29udGFpbmVyLCB0aGlzLnBsdWdpblNldHRpbmdzLCB0cnVlKTtcbiAgICAgICAgcGFsZXR0ZS5lbWl0dGVyLm9uKCdjaGFuZ2VkJywgKGNvbG9ycywgc2V0dGluZ3MpID0+IHtcbiAgICAgICAgICAgIGxldCBtb2RpZmllZFNldHRpbmdzID0gZ2V0TW9kaWZpZWRTZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgICAgICAgICB0aGlzLmNvbG9ycyA9IGNvbG9ycztcbiAgICAgICAgICAgIGlmKG1vZGlmaWVkU2V0dGluZ3MpIHRoaXMuc2V0dGluZ3MgPSB7Li4udGhpcy5zZXR0aW5ncywgLi4ubW9kaWZpZWRTZXR0aW5nc307XG4gICAgICAgIH0pXG4gICAgICAgIHBhbGV0dGVQcmV2aWV3LmFwcGVuZENoaWxkKHBhbGV0dGUuY29udGFpbmVyRWwpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcGRhdGVzIHRoZSBwYWxldHRlIHByZXZpZXdcbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IHVwZGF0ZVBhbGV0dGVQcmV2aWV3ID0gKCkgPT4ge1xuICAgICAgICAgICAgcGFsZXR0ZS5jb2xvcnMgPSB0aGlzLmNvbG9ycztcbiAgICAgICAgICAgIHBhbGV0dGUuc2V0dGluZ3MgPSB0aGlzLnNldHRpbmdzO1xuICAgICAgICAgICAgcGFsZXR0ZS5yZWxvYWQoKVxuICAgICAgICB9XG5cbiAgICAgICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkhlaWdodFwiKVxuICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3MuaGVpZ2h0LnRvU3RyaW5nKCkpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdmFsaWQgbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighTnVtYmVyLmlzTmFOKE51bWJlcih2YWx1ZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5oZWlnaHQgPSBOdW1iZXIodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBhbGV0dGVQcmV2aWV3KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGVudGVyIGEgbnVtYmVyLicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcblxuICAgICAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKFwiV2lkdGhcIilcbiAgICAgICAgICAgIC5zZXREZXNjKCdDYXV0aW9uIC0gTWlnaHQgY2F1c2UgcGFsZXR0ZSB0byBkaXNwbGF5IGluY29ycmVjdGx5LicpXG4gICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgIHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5ncy53aWR0aC50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHZhbGlkIG51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIU51bWJlci5pc05hTihOdW1iZXIodmFsdWUpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Mud2lkdGggPSBOdW1iZXIodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBhbGV0dGVQcmV2aWV3KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGVudGVyIGEgbnVtYmVyLicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhdGNoKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcblxuICAgICAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKFwiRGlyZWN0aW9uXCIpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG4gICAgICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKERpcmVjdGlvbi5Db2x1bW4sIERpcmVjdGlvbi5Db2x1bW4pXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihEaXJlY3Rpb24uUm93LCBEaXJlY3Rpb24uUm93KVxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLmRpcmVjdGlvbi50b1N0cmluZygpKVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5kaXJlY3Rpb24gPSB2YWx1ZSBhcyBEaXJlY3Rpb247XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBhbGV0dGVQcmV2aWV3KCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZShcIkdyYWRpZW50XCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5ncy5ncmFkaWVudClcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZ3JhZGllbnQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGFsZXR0ZVByZXZpZXcoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcblxuICAgICAgICBuZXcgU2V0dGluZyhzZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKFwiSG92ZXJcIilcbiAgICAgICAgICAgIC5zZXREZXNjKFwiVG9nZ2xlcyB3aGV0aGVyIHBhbGV0dGVzIGNhbiBiZSBob3ZlcmVkXCIpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5zZXR0aW5ncy5ob3ZlcilcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuaG92ZXIgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGFsZXR0ZVByZXZpZXcoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcblxuXHRcdFx0bmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG5cdFx0XHRcdC5zZXROYW1lKFwiSGlkZSBUZXh0XCIpXG5cdFx0XHRcdC5zZXREZXNjKFwiRGlzYWJsZXMgY29sb3IgYW5kIGFsaWFzIHZpc2liaWxpdHlcIilcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnNldHRpbmdzLmhpZGVUZXh0KVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmhpZGVUZXh0ID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdHVwZGF0ZVBhbGV0dGVQcmV2aWV3KCk7XG5cdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHR9KVxuXG4gICAgICAgIG5ldyBTZXR0aW5nKHNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoXCJPdmVycmlkZVwiKVxuICAgICAgICAgICAgLnNldERlc2MoXCJEaXNhYmxlcyBjb2xvciB2YWxpZGF0aW9uIGZvciBmdWxsIGNvbnRyb2wgKGFkdmFuY2VkKVwiKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMuc2V0dGluZ3Mub3ZlcnJpZGUpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLm92ZXJyaWRlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBhbGV0dGVQcmV2aWV3KCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgbmV3IFNldHRpbmcoc2V0dGluZ3NDb250YWluZXIpXG4gICAgICAgIC5hZGRCdXR0b24oKGJ1dHRvbikgPT4gXG4gICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KFwiQ3JlYXRlXCIpXG4gICAgICAgICAgICAuc2V0Q3RhKClcbiAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnl7XG4gICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIHJhbmRvbSBjb2xvcnMgaWYgbm9uZSBhcmUgcHJvdmlkZWRcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jb2xvcnMubGVuZ3RoID09PSAwKSB0aGlzLmNvbG9ycyA9IGdlbmVyYXRlQ29sb3JzKENvbWJpbmF0aW9uLlJhbmRvbSkuY29sb3JzO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uU3VibWl0KHRoaXMuY29sb3JzLCBnZXRNb2RpZmllZFNldHRpbmdzKHRoaXMuc2V0dGluZ3MpKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaChlKXtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgfVxuXG4gICAgb25DbG9zZSgpOiB2b2lkIHtcbiAgICAgICAgLy8gQ2xlYXIgcGFsZXR0ZSBsaXN0ZW5lcnNcbiAgICAgICAgdGhpcy5wYWxldHRlPy5lbWl0dGVyLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufSIsICJpbXBvcnQgeyBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7IERpcmVjdGlvbiwgQWxpYXNNb2RlLCBDb2xvclBhbGV0dGVTZXR0aW5ncywgZGVmYXVsdFNldHRpbmdzIH0gZnJvbSBcInNldHRpbmdzXCI7XG5pbXBvcnQgeyBjb3B5VG9DbGlwYm9hcmQsIHBsdWdpblRvUGFsZXR0ZVNldHRpbmdzIH0gZnJvbSBcInV0aWxzL2Jhc2ljVXRpbHNcIjtcbmltcG9ydCB7IFBhbGV0dGVJdGVtIH0gZnJvbSBcIi4vUGFsZXR0ZUl0ZW1cIjtcbmltcG9ydCB7IERyYWdEcm9wIH0gZnJvbSBcInV0aWxzL2RyYWdEcm9wVXRpbHNcIjtcbmltcG9ydCB7IENhbnZhcyB9IGZyb20gXCJ1dGlscy9jYW52YXNVdGlsc1wiO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSBcInV0aWxzL0V2ZW50RW1pdHRlclwiO1xuXG5leHBvcnQgdHlwZSBQYWxldHRlU2V0dGluZ3MgPSB7XG4gICAgaGVpZ2h0OiBudW1iZXJcbiAgICB3aWR0aDogbnVtYmVyXG4gICAgZGlyZWN0aW9uOiBEaXJlY3Rpb25cbiAgICBncmFkaWVudDogYm9vbGVhblxuICAgIGhvdmVyOiBib29sZWFuXG5cdCBoaWRlVGV4dDogYm9vbGVhblxuICAgIG92ZXJyaWRlOiBib29sZWFuXG4gICAgYWxpYXNlczogc3RyaW5nW11cbn1cblxuZXhwb3J0IGVudW0gU3RhdHVzIHtcbiAgICBWQUxJRCA9ICdWYWxpZCcsXG4gICAgSU5WQUxJRF9DT0xPUlMgPSAnSW52YWxpZCBDb2xvcnMnLFxuICAgIElOVkFMSURfU0VUVElOR1MgPSAnSW52YWxpZCBTZXR0aW5ncycsXG4gICAgSU5WQUxJRF9DT0xPUlNfQU5EX1NFVFRJTkdTID0gJ0ludmFsaWQgQ29sb3JzICYgU2V0dGluZ3MnLFxuICAgIElOVkFMSURfR1JBRElFTlQgPSAnSW52YWxpZCBHcmFkaWVudCdcbn1cblxudHlwZSBFdmVudE1hcCA9IHtcbiAgICByZXNpemVkOiBbcGFsZXR0ZTogUmVzaXplT2JzZXJ2ZXJFbnRyeV0sXG4gICAgY2hhbmdlZDogW2NvbG9yczogc3RyaW5nW10sIHNldHRpbmdzOiBQYWxldHRlU2V0dGluZ3NdLFxuICAgIGVkaXRNb2RlOiBbZWRpdE1vZGU6IGJvb2xlYW5dXG59XG5cbmV4cG9ydCBjbGFzcyBQYWxldHRlIHtcbiAgICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XG4gICAgcGx1Z2luU2V0dGluZ3M6IENvbG9yUGFsZXR0ZVNldHRpbmdzO1xuXHRjb2xvcnM6IHN0cmluZ1tdO1xuICAgIHNldHRpbmdzOiBQYWxldHRlU2V0dGluZ3M7XG4gICAgc3RhdHVzOiBTdGF0dXNcbiAgICBzaG93Tm90aWNlOiBib29sZWFuXG4gICAgcHJpdmF0ZSBlZGl0TW9kZTogYm9vbGVhbjtcbiAgICBkcmFnRHJvcDogRHJhZ0Ryb3AgfCBudWxsO1xuICAgIGRyb3B6b25lOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwYWxldHRlSXRlbXM6IFBhbGV0dGVJdGVtW107XG4gICAgcGFsZXR0ZUNhbnZhczogQ2FudmFzIHwgdW5kZWZpbmVkO1xuICAgIHB1YmxpYyBlbWl0dGVyOiBFdmVudEVtaXR0ZXI8RXZlbnRNYXA+O1xuXG5cdGNvbnN0cnVjdG9yKGNvbG9yczogc3RyaW5nW10gfCBTdGF0dXMsIHNldHRpbmdzOiBQYWxldHRlU2V0dGluZ3MgfCBTdGF0dXMgfCB1bmRlZmluZWQsIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgcGx1Z2luU2V0dGluZ3M6IENvbG9yUGFsZXR0ZVNldHRpbmdzLCBlZGl0TW9kZSA9IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5hZGRDbGFzcygncGFsZXR0ZS1jb250YWluZXInKTtcbiAgICAgICAgdGhpcy5wbHVnaW5TZXR0aW5ncyA9IHBsdWdpblNldHRpbmdzO1xuICAgICAgICB0aGlzLnN0YXR1cyA9IFN0YXR1cy5WQUxJRDtcbiAgICAgICAgdGhpcy5zaG93Tm90aWNlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5lZGl0TW9kZSA9IGVkaXRNb2RlO1xuICAgICAgICB0aGlzLnBhbGV0dGVJdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLmVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPEV2ZW50TWFwPjtcblxuICAgICAgICB0aGlzLnNldERlZmF1bHRzKGNvbG9ycywgc2V0dGluZ3MpO1xuICAgICAgICB0aGlzLmxvYWQoKTtcblxuICAgICAgICBsZXQgb2JzZXJ2ZXJEZWJvdW5jZXJzID0gbmV3IFdlYWtNYXA7XG5cbiAgICAgICAgLy8gUmVmcmVzaCBncmFkaWVudCBwYWxldHRlcyB3aGVuIE9ic2lkaWFuIHJlc2l6ZXNcbiAgICAgICAgY29uc3QgcmVzaXplT2JzZXJ2ZXIgPSBuZXcgUmVzaXplT2JzZXJ2ZXIoKHBhbGV0dGVzKSA9PiB7XG4gICAgICAgICAgICAvLyBUaGVyZSBpcyBvbmx5IG9uZSBwYWxldHRlXG4gICAgICAgICAgICBwYWxldHRlcy5mb3JFYWNoKChwYWxldHRlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGltZW91dCBvbiBvYnNlcnZlckRlYm91bmNlcnMgcGFsZXR0ZVxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChvYnNlcnZlckRlYm91bmNlcnMuZ2V0KHBhbGV0dGUudGFyZ2V0KSk7XG4gICAgICAgICAgICAgICAgLy8gU2V0IGEgbmV3IHRpbWVvdXQgb24gcGFsZXR0ZSAmIHN0b3JlIGluIG9ic2VydmVyRGVib3VuY2Vyc1xuICAgICAgICAgICAgICAgIG9ic2VydmVyRGVib3VuY2Vycy5zZXQocGFsZXR0ZS50YXJnZXQsIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5lbWl0dGVyLmVtaXQoJ3Jlc2l6ZWQnLCBwYWxldHRlKSwgdGhpcy5wbHVnaW5TZXR0aW5ncy5yZWxvYWREZWxheSkpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICAgICAgLy8gVHJhY2tpbmcgY29udGFpbmVyRWwgKGluc3RlYWQgb2YgZHJvcHpvbmUpIGVuc3VyZXMgcmVzaXplT2JzZXJ2ZXIgcGVyc2lzdHMgdGhyb3VnaCByZWxvYWRzXG4gICAgICAgIHJlc2l6ZU9ic2VydmVyLm9ic2VydmUodGhpcy5jb250YWluZXJFbCk7XG5cbiAgICAgICAgLy8gUmVzaXplZCBldmVudCBhZnRlciB1c2VyIGhhcyBzdG9wcGVkIGRyYWdnaW5nXG4gICAgICAgIHRoaXMuZW1pdHRlci5vbigncmVzaXplZCcsIChwYWxldHRlKSA9PiB0aGlzLm9uUmVzaXplZChwYWxldHRlKSk7XG5cdH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGluaXRpYWwgZGVmYXVsdHNcbiAgICAgKi9cbiAgICBwdWJsaWMgc2V0RGVmYXVsdHMoY29sb3JzOiBzdHJpbmdbXSB8IFN0YXR1cywgc2V0dGluZ3M6IFBhbGV0dGVTZXR0aW5ncyB8IFN0YXR1cyB8IHVuZGVmaW5lZCkge1xuICAgICAgICAvLyBTZXR0aW5ncyBhcmUgaW52YWxpZFxuICAgICAgICBpZih0eXBlb2Ygc2V0dGluZ3MgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gcGx1Z2luVG9QYWxldHRlU2V0dGluZ3ModGhpcy5wbHVnaW5TZXR0aW5ncyk7XG4gICAgICAgICAgICB0aGlzLnN0YXR1cyA9IFN0YXR1cy5JTlZBTElEX1NFVFRJTkdTO1xuICAgICAgICB9XG4gICAgICAgIC8vIFNldHRpbmdzIGFyZSB2YWxpZFxuICAgICAgICBpZih0eXBlb2Ygc2V0dGluZ3MgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gey4uLnBsdWdpblRvUGFsZXR0ZVNldHRpbmdzKHRoaXMucGx1Z2luU2V0dGluZ3MpLCAuLi5zZXR0aW5nc307XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0dGluZ3Mgd2VyZSBub3Qgc2V0IGJ5IHVzZXJcbiAgICAgICAgaWYodHlwZW9mIHNldHRpbmdzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHBsdWdpblRvUGFsZXR0ZVNldHRpbmdzKHRoaXMucGx1Z2luU2V0dGluZ3MpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENvbG9ycyBhcmUgaW52YWxpZFxuICAgICAgICBpZih0eXBlb2YgY29sb3JzID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhpcy5jb2xvcnMgPSBbXTtcbiAgICAgICAgICAgIC8vIFNldCBzdGF0dXMgdG8gSW52YWxpZCBDb2xvcnMgJiBTZXR0aW5ncyBpZiBjb2xvcnMgd2VyZSBhbHNvIGludmFsaWRcbiAgICAgICAgICAgIHRoaXMuc3RhdHVzID0gdGhpcy5zdGF0dXMgPT09IFN0YXR1cy5JTlZBTElEX1NFVFRJTkdTID8gU3RhdHVzLklOVkFMSURfQ09MT1JTX0FORF9TRVRUSU5HUyA6IFN0YXR1cy5JTlZBTElEX0NPTE9SUztcbiAgICAgICAgfVxuICAgICAgICAvLyBDb2xvcnMgYXJlIHZhbGlkXG4gICAgICAgIGlmKHR5cGVvZiBjb2xvcnMgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB0aGlzLmNvbG9ycyA9IGNvbG9ycztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSBwYWxldHRlXG4gICAgICovXG4gICAgcHVibGljIGxvYWQoKSB7XG4gICAgICAgIC8vIENyZWF0ZSBuZXcgcGFsZXR0ZVxuICAgICAgICB0aGlzLmNyZWF0ZVBhbGV0dGUodGhpcy5jb2xvcnMsIHRoaXMuc2V0dGluZ3MpO1xuXG4gICAgICAgIC8vIEFkZHMgRHJhZyAmIERyb3AgdG8gcGFsZXR0ZXMgaW4gZWRpdCBtb2RlIHdoaWNoIGFyZSBub3QgZ3JhZGllbnRzXG4gICAgICAgIGlmKHRoaXMuZWRpdE1vZGUgJiYgIXRoaXMuc2V0dGluZ3MuZ3JhZGllbnQpe1xuXHRcdFx0XHR0aGlzLmRyb3B6b25lLnRvZ2dsZUNsYXNzKCdwYWxldHRlLWhvdmVyJywgIXRoaXMucGx1Z2luU2V0dGluZ3Muc3RhYmlsaXR5V2hpbGVFZGl0aW5nKTtcblx0XHRcdFx0dGhpcy5kcm9wem9uZS50b2dnbGVDbGFzcygncGFsZXR0ZS1oaWRlLXRleHQnLCAhdGhpcy5wbHVnaW5TZXR0aW5ncy5zdGFiaWxpdHlXaGlsZUVkaXRpbmcpO1xuXG4gICAgICAgICAgICB0aGlzLmRyYWdEcm9wID0gbmV3IERyYWdEcm9wKFt0aGlzLmRyb3B6b25lXSwgQXJyYXkuZnJvbSh0aGlzLmRyb3B6b25lLmNoaWxkcmVuKSwgKGUsIHJlcykgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFNvcnQgcGFsZXR0ZSBpdGVtcyBhY2NvcmRpbmcgdG8gZHJvcCBvcmRlclxuICAgICAgICAgICAgICAgIHRoaXMucGFsZXR0ZUl0ZW1zLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5vcmRlci5pbmRleE9mKGEuY29udGFpbmVyKSAtIHJlcy5vcmRlci5pbmRleE9mKGIuY29udGFpbmVyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbG9ycyA9IHRoaXMucGFsZXR0ZUl0ZW1zLm1hcCgoaXRlbSkgPT4gaXRlbS5jb2xvcik7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5hbGlhc2VzID0gdGhpcy5wYWxldHRlSXRlbXMubWFwKChpdGVtKSA9PiBpdGVtLnNldHRpbmdzLmFsaWFzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVtaXR0ZXIuZW1pdCgnY2hhbmdlZCcsIHRoaXMuY29sb3JzLCB0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbG9hZCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgZWRpdC1tb2RlIGNsYXNzIGlmIHNldCBvbiBsb2FkXG4gICAgICAgIHRoaXMuZHJvcHpvbmUudG9nZ2xlQ2xhc3MoJ2VkaXQtbW9kZScsIHRoaXMuZWRpdE1vZGUpO1xuXHR9XG5cbiAgICAvKipcbiAgICAgKiBVbmxvYWRzIHRoZSBwYWxldHRlXG4gICAgICovXG4gICAgcHVibGljIHVubG9hZCgpe1xuICAgICAgICAvLyBSZW1vdmUgbGlzdGVuZXJzXG4gICAgICAgIHRoaXMuZW1pdHRlci5jbGVhcigpO1xuICAgICAgICAvLyBSZW1vdmUgcGFsZXR0ZUl0ZW0gbGlzdGVuZXJzXG4gICAgICAgIHRoaXMucGFsZXR0ZUl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IGl0ZW0udW5sb2FkKCkpO1xuICAgICAgICAvLyBSZW1vdmUgY2hpbGRyZW5cbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xuICAgICAgICB0aGlzLnBhbGV0dGVJdGVtcyA9IFtdO1xuICAgICAgICB0aGlzLnBhbGV0dGVDYW52YXMgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVsb2FkcyB0aGUgcGFsZXR0ZSBjb250ZW50c1xuICAgICAqIEBwYXJhbSByZXNpemUgV2hldGhlciB0aGUgcGFsZXR0ZSBpcyByZWxvYWRpbmcgYmVjYXVzZSBvZiBhIHJlc2l6ZSAoZGVmYXVsdHMgdG8gZmFsc2UpXG4gICAgICovXG4gICAgcHVibGljIHJlbG9hZChyZXNpemU6IHsgaGVpZ2h0OiBudW1iZXIsIHdpZHRoOiBudW1iZXIgfSA9IHtoZWlnaHQ6IDAsIHdpZHRoOiAwfSl7XG4gICAgICAgIC8vIENoZWNrIGlmIHBhbGV0dGUgc2l6ZSBpcyB6ZXJvXG4gICAgICAgIGNvbnN0IGlzWmVybyA9IHJlc2l6ZS5oZWlnaHQgPT09IDAgJiYgcmVzaXplLndpZHRoID09PSAwO1xuICAgICAgICBpZighaXNaZXJvKSB7XG4gICAgICAgICAgICAvLyBTZXQgd2lkdGggaWYgc2l6ZSBpcyBub3QgemVyb1xuICAgICAgICAgICAgdGhpcy5zZXRXaWR0aCh0aGlzLmdldFBhbGV0dGVXaWR0aChyZXNpemUud2lkdGgpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBPbmx5IHNob3cgbm90aWNlIG9uIG5vbi1yZXNpemUgcmVsb2Fkc1xuICAgICAgICB0aGlzLnNob3dOb3RpY2UgPSAhcmVzaXplO1xuICAgICAgICB0aGlzLnVubG9hZCgpO1xuICAgICAgICB0aGlzLnNldERlZmF1bHRzKHRoaXMuY29sb3JzLCB0aGlzLnNldHRpbmdzKTtcbiAgICAgICAgdGhpcy5sb2FkKCk7XG4gICAgICAgIHRoaXMuc2hvd05vdGljZSA9IHRydWU7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBvblJlc2l6ZWQocGFsZXR0ZTogUmVzaXplT2JzZXJ2ZXJFbnRyeSkge1xuICAgICAgICBjb25zdCBzaXplID0ge2hlaWdodDogcGFsZXR0ZS5jb250ZW50UmVjdC5oZWlnaHQsIHdpZHRoOiBwYWxldHRlLmNvbnRlbnRSZWN0LndpZHRofTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgcGFsZXR0ZSBzaXplIGlzIHplcm9cbiAgICAgICAgY29uc3QgaXNaZXJvID0gc2l6ZS5oZWlnaHQgPT09IDAgJiYgc2l6ZS53aWR0aCA9PT0gMDtcbiAgICAgICAgLy8gUmVzaXplIGlmIHNpemUgaXMgbm90IHplcm9cbiAgICAgICAgaWYgKCFpc1plcm8pIHRoaXMucmVsb2FkKHtoZWlnaHQ6IHNpemUuaGVpZ2h0LCB3aWR0aDogc2l6ZS53aWR0aH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHdpZHRoIG9mIHRoZSBwYWxldHRlXG4gICAgICovXG4gICAgcHVibGljIHNldFdpZHRoKHdpZHRoOiBudW1iZXIpIHtcbiAgICAgICAgLy8gQ3JlYXRlIG5ldyBncmFkaWVudCBpZiBjYW52YXNcbiAgICAgICAgaWYodGhpcy5zZXR0aW5ncy5ncmFkaWVudCAmJiB0aGlzLnBhbGV0dGVDYW52YXMpIHRoaXMucGFsZXR0ZUNhbnZhcy5jcmVhdGVHcmFkaWVudCh0aGlzLmNvbG9ycywgd2lkdGgsIHRoaXMuc2V0dGluZ3MuaGVpZ2h0LCB0aGlzLnNldHRpbmdzLmRpcmVjdGlvbik7XG4gICAgICAgIC8vIFNldCBwYWxldHRlIHdpZHRoXG4gICAgICAgIHRoaXMuZHJvcHpvbmUuc3R5bGUuc2V0UHJvcGVydHkoJy0tcGFsZXR0ZS13aWR0aCcsIGAke3dpZHRofXB4YCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwudG9nZ2xlQ2xhc3MoJ3BhbGV0dGUtc2Nyb2xsJywgd2lkdGggPiBkZWZhdWx0U2V0dGluZ3Mud2lkdGgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIGB1c2VyYCBPUiBgYXV0b2Agd2lkdGggYmFzZWQgb24gd2hpY2ggaXMgbW9yZSBhcHByb3ByaWF0ZVxuICAgICAqL1xuICAgIHB1YmxpYyBnZXRQYWxldHRlV2lkdGgocmVzaXplT2Zmc2V0ID0gMCkge1xuICAgICAgICBjb25zdCBwYWxldHRlT2Zmc2V0ID0gcmVzaXplT2Zmc2V0ICE9PSAwID8gcmVzaXplT2Zmc2V0IDogdGhpcy5kcm9wem9uZS5vZmZzZXRXaWR0aDtcbiAgICAgICAgLy8gU2V0IHVzZXItc2V0IHdpZHRoIGlmIGl0IGlzIGdyZWF0ZXIgdGhhbiB0aGUgZGVmYXVsdCB3aWR0aFxuICAgICAgICBpZih0aGlzLnNldHRpbmdzLndpZHRoID4gZGVmYXVsdFNldHRpbmdzLndpZHRoKSByZXR1cm4gdGhpcy5zZXR0aW5ncy53aWR0aDtcbiAgICAgICAgLy8gQXV0b21hdGljYWxseSBzZXQgd2lkdGggaWYgb2Zmc2V0IGlzIGxlc3MgdGhhbiBzZXR0aW5ncyB3aWR0aFxuICAgICAgICBpZihwYWxldHRlT2Zmc2V0IDwgdGhpcy5zZXR0aW5ncy53aWR0aCAmJiBwYWxldHRlT2Zmc2V0ID4gMCkgcmV0dXJuIHBhbGV0dGVPZmZzZXQ7XG4gICAgICAgIC8vIFNldCB1c2VyLXNldCB3aWR0aFxuICAgICAgICBlbHNlIHJldHVybiB0aGlzLnNldHRpbmdzLndpZHRoO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbm90aWNlIHVzaW5nIHByZS1zZXQgc2V0dGluZ3NcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBNZXNzYWdlIHRvIGRpc3BsYXlcbiAgICAgKi9cbiAgICBwdWJsaWMgY3JlYXRlTm90aWNlKG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICB0aGlzLnNob3dOb3RpY2UgJiYgbmV3IE5vdGljZShtZXNzYWdlLCB0aGlzLnBsdWdpblNldHRpbmdzLm5vdGljZUR1cmF0aW9uKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0RWRpdE1vZGUoZWRpdE1vZGU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5lZGl0TW9kZSA9IGVkaXRNb2RlO1xuICAgICAgICB0aGlzLmVtaXR0ZXIuZW1pdCgnZWRpdE1vZGUnLCBlZGl0TW9kZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEVkaXRNb2RlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5lZGl0TW9kZTtcbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIG5ldyBwYWxldHRlIGNvbnRlbnRzIGJhc2VkIG9uIGNvbG9ycyAmIHNldHRpbmdzXG4gICAgICogQHBhcmFtIGNvbG9ycyBcbiAgICAgKiBAcGFyYW0gc2V0dGluZ3MgXG4gICAgICovXG4gICAgcHJpdmF0ZSBjcmVhdGVQYWxldHRlKGNvbG9yczogc3RyaW5nW10sIHNldHRpbmdzOiBQYWxldHRlU2V0dGluZ3Mpe1xuICAgICAgICB0aGlzLmRyb3B6b25lID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgICAgIHRoaXMuZHJvcHpvbmUuYWRkQ2xhc3MoJ3BhbGV0dGUnKVxuICAgICAgICAvLyBTZXQgZGVmYXVsdCBjb3JuZXIgc3R5bGVcbiAgICAgICAgdGhpcy5kcm9wem9uZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1wYWxldHRlLWNvcm5lcnMnLCB0aGlzLnBsdWdpblNldHRpbmdzLmNvcm5lcnMgPyAnNXB4JyA6ICcwcHgnKTtcbiAgICAgICAgdGhpcy5kcm9wem9uZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1wYWxldHRlLWRpcmVjdGlvbicsIHNldHRpbmdzLmRpcmVjdGlvbiA9PT0gRGlyZWN0aW9uLlJvdyA/IERpcmVjdGlvbi5Db2x1bW4gOiBEaXJlY3Rpb24uUm93KTtcbiAgICAgICAgdGhpcy5kcm9wem9uZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1ub3QtcGFsZXR0ZS1kaXJlY3Rpb24nLCBzZXR0aW5ncy5kaXJlY3Rpb24pO1xuICAgICAgICB0aGlzLmRyb3B6b25lLnN0eWxlLnNldFByb3BlcnR5KCctLXBhbGV0dGUtaGVpZ2h0JywgYCR7c2V0dGluZ3MuaGVpZ2h0fXB4YCk7XG4gICAgICAgIHRoaXMuZHJvcHpvbmUudG9nZ2xlQ2xhc3MoJ3BhbGV0dGUtaG92ZXInLCBzZXR0aW5ncy5ob3Zlcik7XG5cdFx0ICB0aGlzLmRyb3B6b25lLnRvZ2dsZUNsYXNzKCdwYWxldHRlLWhpZGUtdGV4dCcsIHNldHRpbmdzLmhpZGVUZXh0KTtcblxuICAgICAgICB0cnl7XG4gICAgICAgICAgICAvLyBUaHJvdyBlcnJvciAmIGNyZWF0ZSBJbnZhbGlkIFBhbGV0dGVcbiAgICAgICAgICAgIGlmKHRoaXMuc3RhdHVzICE9PSBTdGF0dXMuVkFMSUQpIHRocm93IG5ldyBQYWxldHRlRXJyb3IodGhpcy5zdGF0dXMpO1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5ncmFkaWVudCA/XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUdyYWRpZW50UGFsZXR0ZSh0aGlzLmRyb3B6b25lLCBjb2xvcnMpXG4gICAgICAgICAgICA6XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZUNvbG9yUGFsZXR0ZSh0aGlzLmRyb3B6b25lLCBjb2xvcnMsIHNldHRpbmdzKTtcblxuICAgICAgICAgICAgLy8gU2V0IHdpZHRoIG9mIHBhbGV0dGVzXG4gICAgICAgICAgICB0aGlzLnNldFdpZHRoKHRoaXMuZ2V0UGFsZXR0ZVdpZHRoKCkpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoKGVycil7XG4gICAgICAgICAgICBpZihlcnIgaW5zdGFuY2VvZiBQYWxldHRlRXJyb3IpIHRoaXMuY3JlYXRlSW52YWxpZFBhbGV0dGUoZXJyLnN0YXR1cywgZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgZWxzZSB0aGlzLmNyZWF0ZU5vdGljZShlcnIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVHcmFkaWVudFBhbGV0dGUoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgY29sb3JzOiBzdHJpbmdbXSl7XG4gICAgICAgIGlmKGNvbG9ycy5sZW5ndGggPD0gMSkgdGhyb3cgbmV3IFBhbGV0dGVFcnJvcihTdGF0dXMuSU5WQUxJRF9HUkFESUVOVCk7XG5cbiAgICAgICAgdGhpcy5wYWxldHRlQ2FudmFzID0gbmV3IENhbnZhcyhjb250YWluZXIpO1xuICAgICAgICB0aGlzLnBhbGV0dGVDYW52YXMuZW1pdHRlci5vbignY2xpY2snLCBhc3luYyAoY29sb3IpID0+IGF3YWl0IGNvcHlUb0NsaXBib2FyZChjb2xvci50b1VwcGVyQ2FzZSgpLCB0aGlzLnBsdWdpblNldHRpbmdzLmNvcHlGb3JtYXQpKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNyZWF0ZUNvbG9yUGFsZXR0ZShjb250YWluZXI6IEhUTUxFbGVtZW50LCBjb2xvcnM6IHN0cmluZ1tdLCBzZXR0aW5nczogUGFsZXR0ZVNldHRpbmdzKXtcbiAgICAgICAgZm9yKGNvbnN0IFtpLCBjb2xvcl0gb2YgY29sb3JzLmVudHJpZXMoKSl7XG4gICAgICAgICAgICBjb25zdCBwYWxldHRlSXRlbSA9IG5ldyBQYWxldHRlSXRlbShjb250YWluZXIsIGNvbG9yLCBcbiAgICAgICAgICAgICAgICB7IFxuICAgICAgICAgICAgICAgICAgICBhbGlhc01vZGU6IHRoaXMucGx1Z2luU2V0dGluZ3MuYWxpYXNNb2RlLCBcbiAgICAgICAgICAgICAgICAgICAgZWRpdE1vZGU6IHRoaXMuZWRpdE1vZGUsIFxuICAgICAgICAgICAgICAgICAgICBzdGFiaWxpdHlXaGlsZUVkaXRpbmc6IHRoaXMucGx1Z2luU2V0dGluZ3Muc3RhYmlsaXR5V2hpbGVFZGl0aW5nLCBcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBzZXR0aW5ncy5oZWlnaHQsIFxuICAgICAgICAgICAgICAgICAgICBkaXJlY3Rpb246IHNldHRpbmdzLmRpcmVjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgaG92ZXI6IHNldHRpbmdzLmhvdmVyLCBcblx0XHRcdFx0XHRcdCAgaGlkZVRleHQ6IHNldHRpbmdzLmhpZGVUZXh0LFxuICAgICAgICAgICAgICAgICAgICBhbGlhczogc2V0dGluZ3MuYWxpYXNlcz8uW2ldIHx8ICcnLFxuICAgICAgICAgICAgICAgICAgICBjb2xvckNvdW50OiBjb2xvcnMubGVuZ3RoLFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHBhbGV0dGVJdGVtLmVtaXR0ZXIub24oJ2NsaWNrJywgYXN5bmMgKGU6IE1vdXNlRXZlbnQpID0+IGF3YWl0IGNvcHlUb0NsaXBib2FyZChjb2xvci50b1VwcGVyQ2FzZSgpLCB0aGlzLnBsdWdpblNldHRpbmdzLmNvcHlGb3JtYXQpKTtcblxuICAgICAgICAgICAgcGFsZXR0ZUl0ZW0uZW1pdHRlci5vbigndHJhc2gnLCAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlZEluZGV4ID0gdGhpcy5jb2xvcnMuaW5kZXhPZihjb2xvcik7XG4gICAgICAgICAgICAgICAgbGV0IGNvbG9ycyA9IHRoaXMuY29sb3JzO1xuICAgICAgICAgICAgICAgIGxldCBzZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3M7XG4gICAgICAgICAgICAgICAgY29sb3JzLnNwbGljZShkZWxldGVkSW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLmFsaWFzZXMuc3BsaWNlKGRlbGV0ZWRJbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbWl0dGVyLmVtaXQoJ2NoYW5nZWQnLCBjb2xvcnMsIHNldHRpbmdzKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbG9hZCgpO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgcGFsZXR0ZUl0ZW0uZW1pdHRlci5vbignYWxpYXMnLCAoYWxpYXMpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGluZGV4IG9mIHRoZSBhbGlhcyByZWxhdGl2ZSB0byB0aGUgUGFsZXR0ZUl0ZW0gY29sb3JcbiAgICAgICAgICAgICAgICBjb25zdCBhbGlhc0luZGV4ID0gdGhpcy5jb2xvcnMuZmluZEluZGV4KHZhbCA9PiB2YWwgPT09IGNvbG9yKTtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgYWxpYXNJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCBlbXB0eSBzdHJpbmdzIHRvIGVtcHR5IGluZGV4ZXNcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMuc2V0dGluZ3MuYWxpYXNlc1tpXSkgdGhpcy5zZXR0aW5ncy5hbGlhc2VzW2ldID0gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFNldCBtb2RpZmllZCBhbGlhcyBpbmRleFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuYWxpYXNlc1thbGlhc0luZGV4XSA9IGFsaWFzO1xuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgdGhpcy5wYWxldHRlSXRlbXMucHVzaChwYWxldHRlSXRlbSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgaW52YWxpZCBwYWxldHRlIGJhc2VkIG9uIHBhbGV0dGUgc3RhdHVzXG4gICAgICogQHBhcmFtIHR5cGUgUGFsZXR0ZSBzdGF0dXMgdHlwZVxuICAgICAqL1xuICAgIHByaXZhdGUgY3JlYXRlSW52YWxpZFBhbGV0dGUodHlwZTogU3RhdHVzLCBtZXNzYWdlID0gJycpe1xuICAgICAgICB0aGlzLnN0YXR1cyA9IHR5cGU7XG4gICAgICAgIHRoaXMuZHJvcHpvbmUuc3R5bGUuc2V0UHJvcGVydHkoJy0tcGFsZXR0ZS1oZWlnaHQnLCAnMTUwcHgnKTtcbiAgICAgICAgdGhpcy5kcm9wem9uZS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1wYWxldHRlLXdpZHRoJywgYDEwMCVgKTtcbiAgICAgICAgY29uc3QgaW52YWxpZFNlY3Rpb24gPSB0aGlzLmRyb3B6b25lLmNyZWF0ZUVsKCdzZWN0aW9uJyk7XG4gICAgICAgIGludmFsaWRTZWN0aW9uLnRvZ2dsZUNsYXNzKCdpbnZhbGlkJywgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IGludmFsaWRTcGFuID0gaW52YWxpZFNlY3Rpb24uY3JlYXRlRWwoJ3NwYW4nKTtcblxuICAgICAgICBsZXQgZGVmYXVsdE1lc3NhZ2UgPSAnSW52YWxpZCBwYWxldHRlJztcbiAgICAgICAgc3dpdGNoKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgU3RhdHVzLklOVkFMSURfQ09MT1JTOlxuICAgICAgICAgICAgICAgIGludmFsaWRTcGFuLnNldFRleHQoU3RhdHVzLklOVkFMSURfQ09MT1JTKTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0TWVzc2FnZSA9ICdDb2xvcnMgYXJlIGRlZmluZWQgaW5jb3JyZWN0bHknO1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlTm90aWNlKGBQYWxldHRlOlxcbiR7bWVzc2FnZSA/IG1lc3NhZ2UgOiBkZWZhdWx0TWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3RhdHVzLklOVkFMSURfU0VUVElOR1M6XG4gICAgICAgICAgICAgICAgaW52YWxpZFNwYW4uc2V0VGV4dChTdGF0dXMuSU5WQUxJRF9TRVRUSU5HUyk7XG4gICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2UgPSAnSXNzdWVzIHBhcnNpbmcgc2V0dGluZ3MnO1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlTm90aWNlKGBQYWxldHRlOlxcbiR7bWVzc2FnZSA/IG1lc3NhZ2UgOiBkZWZhdWx0TWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3RhdHVzLklOVkFMSURfQ09MT1JTX0FORF9TRVRUSU5HUzpcbiAgICAgICAgICAgICAgICBpbnZhbGlkU3Bhbi5zZXRUZXh0KFN0YXR1cy5JTlZBTElEX0NPTE9SU19BTkRfU0VUVElOR1MpO1xuICAgICAgICAgICAgICAgIGRlZmF1bHRNZXNzYWdlID0gJ0NvbG9ycyBhbmQgc2V0dGluZ3MgYXJlIGRlZmluZWQgaW5jb3JyZWN0bHknO1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlTm90aWNlKGBQYWxldHRlOlxcbiR7bWVzc2FnZSA/IG1lc3NhZ2UgOiBkZWZhdWx0TWVzc2FnZX1gKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU3RhdHVzLklOVkFMSURfR1JBRElFTlQ6XG4gICAgICAgICAgICAgICAgaW52YWxpZFNwYW4uc2V0VGV4dChTdGF0dXMuSU5WQUxJRF9HUkFESUVOVCk7XG4gICAgICAgICAgICAgICAgZGVmYXVsdE1lc3NhZ2UgPSAnR3JhZGllbnRzIHJlcXVpcmUgbW9yZSB0aGFuIDEgY29sb3IgdG8gZGlzcGxheSc7XG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVOb3RpY2UoYFBhbGV0dGU6XFxuJHttZXNzYWdlID8gbWVzc2FnZSA6IGRlZmF1bHRNZXNzYWdlfWApO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBQdWxzZSB0aGUgSW52YWxpZCBQYWxldHRlIHRvIHNob3cgaXRzIGxvY2F0aW9uXG4gICAgICAgIGlmKHRoaXMucGx1Z2luU2V0dGluZ3MuZXJyb3JQdWxzZSl7XG4gICAgICAgICAgICB0aGlzLmRyb3B6b25lLnN0eWxlLnNldFByb3BlcnR5KCctLW5vdGljZS1kdXJhdGlvbicsICgodGhpcy5wbHVnaW5TZXR0aW5ncy5ub3RpY2VEdXJhdGlvbiAvIDEwMDApIC8gMikudG9TdHJpbmcoKSArICdzJylcbiAgICAgICAgICAgIHRoaXMuZHJvcHpvbmUudG9nZ2xlQ2xhc3MoJ3BhbGV0dGUtcHVsc2UnLCB0cnVlKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5kcm9wem9uZS50b2dnbGVDbGFzcygncGFsZXR0ZS1wdWxzZScsIGZhbHNlKSwgdGhpcy5wbHVnaW5TZXR0aW5ncy5ub3RpY2VEdXJhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIFBhbGV0dGVFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgICBzdGF0dXM6IFN0YXR1cztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgXG4gICAgY29uc3RydWN0b3Ioc3RhdHVzOiBTdGF0dXMsIG1lc3NhZ2UgPSAnJykge1xuICAgICAgICBzdXBlcihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgfVxufSIsICJpbXBvcnQgQ29sb3JQYWxldHRlIGZyb20gXCJtYWluXCI7XG5pbXBvcnQgeyBBcHAsIE5vdGljZSwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgUGFsZXR0ZVNldHRpbmdzIH0gZnJvbSBcImNvbXBvbmVudHMvUGFsZXR0ZVwiO1xuaW1wb3J0IHsgcGx1Z2luVG9QYWxldHRlU2V0dGluZ3MgfSBmcm9tIFwidXRpbHMvYmFzaWNVdGlsc1wiO1xuXG5leHBvcnQgZW51bSBEaXJlY3Rpb24ge1xuICAgIFJvdyA9ICdyb3cnLFxuICAgIENvbHVtbiA9ICdjb2x1bW4nXG59XG5cbmV4cG9ydCBlbnVtIEFsaWFzTW9kZSB7XG5cdEJvdGggPSAnQm90aCcsXG5cdEFsaWFzID0gJ1ByZWZlciBBbGlhcydcbn1cblxuZXhwb3J0IGVudW0gQ29weUZvcm1hdCB7XG5cdFJhdyA9ICdSYXcnLFxuXHRWYWx1ZSA9ICdWYWx1ZSdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb2xvclBhbGV0dGVTZXR0aW5ncyB7XG5cdG5vdGljZUR1cmF0aW9uOiBudW1iZXI7XG5cdGVycm9yUHVsc2U6IGJvb2xlYW47XG5cdGFsaWFzTW9kZTogQWxpYXNNb2RlO1xuXHRjb3JuZXJzOiBib29sZWFuO1xuXHRzdGFiaWxpdHlXaGlsZUVkaXRpbmc6IGJvb2xlYW47XG5cdHJlbG9hZERlbGF5OiBudW1iZXI7XG5cdGNvcHlGb3JtYXQ6IENvcHlGb3JtYXQ7XG5cdGhlaWdodDogbnVtYmVyO1xuXHR3aWR0aDogbnVtYmVyO1xuXHRkaXJlY3Rpb246IERpcmVjdGlvbixcblx0Z3JhZGllbnQ6IGJvb2xlYW4sXG5cdGhvdmVyOiBib29sZWFuLFxuXHRoaWRlVGV4dDogYm9vbGVhbixcblx0b3ZlcnJpZGU6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRTZXR0aW5nczogQ29sb3JQYWxldHRlU2V0dGluZ3MgPSB7XG5cdG5vdGljZUR1cmF0aW9uOiAxMDAwMCxcblx0ZXJyb3JQdWxzZTogdHJ1ZSxcblx0YWxpYXNNb2RlOiBBbGlhc01vZGUuQm90aCxcblx0Y29ybmVyczogdHJ1ZSxcblx0c3RhYmlsaXR5V2hpbGVFZGl0aW5nOiB0cnVlLFxuXHRyZWxvYWREZWxheTogNSxcblx0Y29weUZvcm1hdDogQ29weUZvcm1hdC5SYXcsXG5cdGhlaWdodDogMTUwLFxuXHR3aWR0aDogNzAwLFxuXHRkaXJlY3Rpb246IERpcmVjdGlvbi5Db2x1bW4sXG5cdGdyYWRpZW50OiBmYWxzZSxcblx0aG92ZXI6IHRydWUsXG5cdGhpZGVUZXh0OiBmYWxzZSxcblx0b3ZlcnJpZGU6IGZhbHNlXG59O1xuXG5leHBvcnQgY2xhc3MgU2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBDb2xvclBhbGV0dGU7XG5cdHNldHRpbmdzOiBQYWxldHRlU2V0dGluZ3M7XG5cdHJlbG9hZERlbGF5OiBudW1iZXI7XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogQ29sb3JQYWxldHRlKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdGxldCB7IHNldHRpbmdzIH0gPSB0aGlzLnBsdWdpbjtcblx0XHR0aGlzLnNldHRpbmdzID0gcGx1Z2luVG9QYWxldHRlU2V0dGluZ3Moc2V0dGluZ3MpO1xuXHRcdHRoaXMucmVsb2FkRGVsYXkgPSBzZXR0aW5ncy5yZWxvYWREZWxheTtcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInKS5zZXRUZXh0KCdHZW5lcmFsJyk7XG5cdFx0Y29udGFpbmVyRWwuYWRkQ2xhc3MoJ2NvbG9yLXBhbGV0dGUtc2V0dGluZ3MnKTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0FsaWFzIE1vZGUnKVxuXHRcdFx0LnNldERlc2MoJ1doYXQgd2lsbCBiZSBzaG93biB3aGVuIGFsaWFzZXMgb3B0aW9uIGlzIHNldCBpbiBsb2NhbCBwYWxldHRlIG9wdGlvbnMuIERlZmF1bHRzIHRvIHNob3dpbmcgYm90aCBjb2xvciBhbmQgYWxpYXMuJylcblx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0LmFkZE9wdGlvbihBbGlhc01vZGUuQm90aCwgQWxpYXNNb2RlLkJvdGgpXG5cdFx0XHRcdC5hZGRPcHRpb24oQWxpYXNNb2RlLkFsaWFzLCBBbGlhc01vZGUuQWxpYXMpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbGlhc01vZGUpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRzZXR0aW5ncy5hbGlhc01vZGUgPSB2YWx1ZSBhcyBBbGlhc01vZGU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlBhbGV0dGUgQ29ybmVyc1wiKVxuXHRcdFx0LnNldERlc2MoXCJNaW5vciBhZXN0aGV0aWMgY2hhbmdlIHdoaWNoIHRvZ2dsZXMgd2hldGhlciB0aGUgY29ybmVycyBvbiBwYWxldHRlcyBhcmUgcm91bmRlZC5cIilcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHNldHRpbmdzLmNvcm5lcnMpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRzZXR0aW5ncy5jb3JuZXJzID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlN0YWJpbGl0eSBXaGlsZSBFZGl0aW5nXCIpXG5cdFx0XHQuc2V0RGVzYyhcIktlZXBzIHRoZSBwYWxldHRlIGZyb20gbW92aW5nIHdoaWxlIGluIGVkaXQgbW9kZS5cIilcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHNldHRpbmdzLnN0YWJpbGl0eVdoaWxlRWRpdGluZylcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHNldHRpbmdzLnN0YWJpbGl0eVdoaWxlRWRpdGluZyA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJSZWxvYWQgRGVsYXlcIilcblx0XHRcdC5zZXREZXNjKFwiSG93IGxvbmcgaXQgdGFrZXMgaW4gbWlsbGlzZWNvbmRzIGZvciBwYWxldHRlcyB0byBiZSB1cGRhdGVkIGFmdGVyIGNoYW5nZXMgaGF2ZSBiZWVuIG1hZGUgKExhcmdlciB2YWx1ZXMgYXJlIGxlc3MgcmVzcG9uc2l2ZSkuXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5yZWxvYWREZWxheS50b1N0cmluZygpKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIHZhbGlkIG51bWJlclxuXHRcdFx0XHRcdFx0aWYoIU51bWJlci5pc05hTihOdW1iZXIodmFsdWUpKSkge1xuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5yZWxvYWREZWxheSA9IE51bWJlcih2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBlbnRlciBhIG51bWJlci4nKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y2F0Y2goZSkge1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdDb3B5IEZvcm1hdCcpXG5cdFx0XHQuc2V0RGVzYygnQ2hvaWNlIG9mIGZvcm1hdCB3aGVuIGNvcHlpbmcgY29sb3JzLicpXG5cdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdC5hZGRPcHRpb24oQ29weUZvcm1hdC5SYXcsIENvcHlGb3JtYXQuUmF3KVxuXHRcdFx0XHQuYWRkT3B0aW9uKENvcHlGb3JtYXQuVmFsdWUsIENvcHlGb3JtYXQuVmFsdWUpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb3B5Rm9ybWF0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0c2V0dGluZ3MuY29weUZvcm1hdCA9IHZhbHVlIGFzIENvcHlGb3JtYXQ7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJykuc2V0VGV4dCgnRGVmYXVsdHMnKTtcblx0XHRcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdIZWlnaHQnKVxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0dGV4dFxuXHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuaGVpZ2h0LnRvU3RyaW5nKCkpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdmFsaWQgbnVtYmVyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighTnVtYmVyLmlzTmFOKE51bWJlcih2YWx1ZSkpKSB7XG5cdFx0XHRcdFx0XHRcdHNldHRpbmdzLmhlaWdodCA9IE51bWJlcih2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBlbnRlciBhIG51bWJlci4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnV2lkdGgnKVxuXHRcdFx0LnNldERlc2MoJ0NhdXRpb24gLSBNaWdodCBjYXVzZSBwYWxldHRlcyB0byBkaXNwbGF5IGluY29ycmVjdGx5LicpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy53aWR0aC50b1N0cmluZygpKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHZhbGlkIG51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIU51bWJlci5pc05hTihOdW1iZXIodmFsdWUpKSkge1xuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy53aWR0aCA9IE51bWJlcih2YWx1ZSk7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBlbnRlciBhIG51bWJlci4nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRGlyZWN0aW9uJylcblx0XHRcdC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcblx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0LmFkZE9wdGlvbihEaXJlY3Rpb24uQ29sdW1uLCBEaXJlY3Rpb24uQ29sdW1uKVxuXHRcdFx0XHQuYWRkT3B0aW9uKERpcmVjdGlvbi5Sb3csIERpcmVjdGlvbi5Sb3cpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaXJlY3Rpb24pXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRzZXR0aW5ncy5kaXJlY3Rpb24gPSB2YWx1ZSBhcyBEaXJlY3Rpb25cblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdH0pXG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdHcmFkaWVudCcpXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ncmFkaWVudClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHNldHRpbmdzLmdyYWRpZW50ID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkhvdmVyXCIpXG5cdFx0XHQuc2V0RGVzYyhcIlRvZ2dsZXMgd2hldGhlciBwYWxldHRlcyBjYW4gYmUgaG92ZXJlZFwiKVxuXHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUoc2V0dGluZ3MuaG92ZXIpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRzZXR0aW5ncy5ob3ZlciA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJIaWRlIFRleHRcIilcblx0XHRcdC5zZXREZXNjKFwiRGlzYWJsZXMgY29sb3IgYW5kIGFsaWFzIHZpc2liaWxpdHlcIilcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHNldHRpbmdzLmhpZGVUZXh0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0c2V0dGluZ3MuaGlkZVRleHQgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdH0pXG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKFwiT3ZlcnJpZGVcIilcblx0XHRcdC5zZXREZXNjKFwiRGlzYWJsZXMgY29sb3IgdmFsaWRhdGlvbiBmb3IgZnVsbCBjb250cm9sIChhZHZhbmNlZClcIilcblx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHNldHRpbmdzLm92ZXJyaWRlKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0c2V0dGluZ3Mub3ZlcnJpZGUgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdH0pXG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInKS5zZXRUZXh0KCdPdGhlcicpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIlBhbGV0dGUgRXJyb3IgUHVsc2VcIilcblx0XHRcdC5zZXREZXNjKFwiV2hldGhlciB0aGUgYWZmZWN0ZWQgcGFsZXR0ZSBzaG91bGQgcHVsc2Ugd2hlbiBlbmNvdW50ZXJpbmcgYW4gZXJyb3IuXCIpXG5cdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdC5zZXRWYWx1ZShzZXR0aW5ncy5lcnJvclB1bHNlKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0c2V0dGluZ3MuZXJyb3JQdWxzZSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoXCJOb3RpY2UgRHVyYXRpb25cIilcblx0XHRcdC5zZXREZXNjKFwiSG93IGxvbmcgcGFsZXR0ZSBlcnJvciBtZXNzYWdlcyBhcmUgc2hvdyBmb3IgaW4gc2Vjb25kcyAoMCBmb3IgaW5kZWZpbml0ZSkuXCIpXG5cdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHR0ZXh0XG5cdFx0XHRcdC5zZXRWYWx1ZSgoc2V0dGluZ3Mubm90aWNlRHVyYXRpb24gLyAxMDAwKS50b1N0cmluZygpKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHZhbGlkIG51bWJlclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIU51bWJlci5pc05hTihOdW1iZXIodmFsdWUpKSkge1xuXHRcdFx0XHRcdFx0XHRzZXR0aW5ncy5ub3RpY2VEdXJhdGlvbiA9IE51bWJlcih2YWx1ZSkgKiAxMDAwO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgZW50ZXIgYSBudW1iZXIuJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2goZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRG9uYXRlJylcblx0XHRcdC5zZXREZXNjKCdJZiB5b3UgbGlrZSB0aGlzIHBsdWdpbiwgY29uc2lkZXIgZG9uYXRpbmcgdG8gc3VwcG9ydCBjb250aW51ZWQgZGV2ZWxvcG1lbnQuJylcblx0XHRcdC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuXHRcdFx0XHRidXR0b25cblx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4gb3BlbignaHR0cHM6Ly9naXRodWIuY29tL3Nwb25zb3JzL0FMZWdlbmRzVGFsZScpKVxuXHRcdFx0XHQuc2V0Q2xhc3MoJ2NvbG9yLXBhbGV0dGUtZG9uYXRlJylcblx0XHRcdFx0XG5cdFx0XHRcdGNvbnN0IGltYWdlID0gYnV0dG9uLmJ1dHRvbkVsLmFwcGVuZENoaWxkKGNyZWF0ZUVsKCdpbWcnKSk7XG5cdFx0XHRcdGltYWdlLnNyYyA9ICdodHRwczovL2ltZy5zaGllbGRzLmlvL2JhZGdlL1Nwb25zb3ItJUUyJTlEJUE0LSUyM0VBNEFBQT9zdHlsZT1mbGF0JmxvZ289R2l0aHViJztcblx0XHRcdH0pXG5cdFx0XHQuYWRkQnV0dG9uKChidXR0b24pID0+IHtcblx0XHRcdFx0YnV0dG9uXG5cdFx0XHRcdC5vbkNsaWNrKCgpID0+IG9wZW4oJ2h0dHBzOi8vd3d3LnBheXBhbC5jb20vZG9uYXRlLz9ob3N0ZWRfYnV0dG9uX2lkPUJISEZNR1g4MjJLNFMnKSlcblx0XHRcdFx0LnNldENsYXNzKCdjb2xvci1wYWxldHRlLWRvbmF0ZScpXG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCBpbWFnZSA9IGJ1dHRvbi5idXR0b25FbC5hcHBlbmRDaGlsZChjcmVhdGVFbCgnaW1nJykpO1xuXHRcdFx0XHRpbWFnZS5zcmMgPSAnaHR0cHM6Ly9pbWcuc2hpZWxkcy5pby9iYWRnZS9QYXlwYWwtJTIzMDAzMDg3P3N0eWxlPWZsYXQmbG9nbz1QYXlwYWwnO1xuXHRcdFx0fSlcblx0fVxuXG5cdC8vIENhbGxlZCB3aGVuIHNldHRpbmdzIGFyZSBleGl0ZWRcblx0aGlkZSgpIHtcblx0XHRjb25zdCBzZXR0aW5nc0NoYW5nZWQgPSBKU09OLnN0cmluZ2lmeSh0aGlzLnNldHRpbmdzKSAhPT0gSlNPTi5zdHJpbmdpZnkocGx1Z2luVG9QYWxldHRlU2V0dGluZ3ModGhpcy5wbHVnaW4uc2V0dGluZ3MpKTtcblx0XHRjb25zdCByZWxvYWREZWxheUNoYW5nZWQgPSB0aGlzLnJlbG9hZERlbGF5ICE9PSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWxvYWREZWxheTtcblx0XHQvLyBVcGRhdGUgcGFsZXR0ZXMgaWYgUGFsZXR0ZVNldHRpbmdzIGhhdmUgY2hhbmdlZFxuXHRcdGlmICh0aGlzLnBsdWdpbj8ucGFsZXR0ZXMgJiYgKHNldHRpbmdzQ2hhbmdlZCB8fCByZWxvYWREZWxheUNoYW5nZWQpKSB7XG5cdFx0XHRmb3IgKGxldCBwYWxldHRlTVJDIG9mIHRoaXMucGx1Z2luLnBhbGV0dGVzKSB7XG5cdFx0XHRcdHBhbGV0dGVNUkMudXBkYXRlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG4iLCAiaW1wb3J0IGNvbG9yc2VhIGZyb20gXCJjb2xvcnNlYVwiO1xyXG5pbXBvcnQgeyBQYWxldHRlU2V0dGluZ3MgfSBmcm9tIFwiY29tcG9uZW50cy9QYWxldHRlXCI7XHJcbmltcG9ydCB7IE5vdGljZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBDb2xvclBhbGV0dGVTZXR0aW5ncywgQ29weUZvcm1hdCwgZGVmYXVsdFNldHRpbmdzIH0gZnJvbSBcInNldHRpbmdzXCI7XHJcblxyXG4vKipcclxuICogR2V0IHNldHRpbmdzIHdpdGhvdXQgdGhlaXIgZGVmYXVsdCB2YWx1ZXNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRNb2RpZmllZFNldHRpbmdzIChzZXR0aW5nczogUGFsZXR0ZVNldHRpbmdzKSB7XHJcbiAgICBsZXQgbmV3U2V0dGluZ3M6IFBhcnRpYWw8UGFsZXR0ZVNldHRpbmdzPiA9IHt9O1xyXG5cclxuICAgIGZvcihjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoc2V0dGluZ3MpKSB7XHJcbiAgICAgICAgY29uc3QgZGVmYXVsdFZhbCA9IGRlZmF1bHRTZXR0aW5nc1trZXkgYXMga2V5b2YgQ29sb3JQYWxldHRlU2V0dGluZ3NdO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiBzZXR0aW5nIGlzIGEga2V5IGluIGRlZmF1bHRTZXR0aW5nc1xyXG4gICAgICAgIGlmKGtleSBpbiBkZWZhdWx0U2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgc2V0dGluZyBpcyBlcXVhbCB0byBkZWZhdWx0ICYga2VlcCBzZXR0aW5nIGlmIG5vdCBlcXVhbFxyXG4gICAgICAgICAgICBpZih2YWx1ZSAhPT0gZGVmYXVsdFZhbCkgbmV3U2V0dGluZ3MgPSB7IC4uLm5ld1NldHRpbmdzLCBba2V5XTogdmFsdWV9O1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBZGQgYWxsIG90aGVyIHNldHRpbmdzIG5vdCBkZWZpbmVkIGluIGRlZmF1bHRzXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEJyZWFrIGlmIGVtcHR5IGFycmF5XHJcbiAgICAgICAgICAgIGlmKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkgJiYgdmFsdWUubGVuZ3RoID09PSAwKSBicmVhaztcclxuICAgICAgICAgICAgLy8gQWRkIHNldHRpbmdcclxuICAgICAgICAgICAgZWxzZSBuZXdTZXR0aW5ncyA9IHsgLi4ubmV3U2V0dGluZ3MsIFtrZXldOiB2YWx1ZSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm4gbnVsbCBpZiBuZXdTZXR0aW5ncyBpcyBlbXB0eVxyXG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG5ld1NldHRpbmdzKS5sZW5ndGggIT09IDAgPyBuZXdTZXR0aW5ncyA6IHVuZGVmaW5lZDtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoZWNrcyBpZiBhbGwgc2V0dGluZ3MgYXJlIHNldCB0byB0aGVpciBkZWZhdWx0IHZhbHVlc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFyZVNldHRpbmdzRGVmYXVsdCAoc2V0dGluZ3M6IFBhbGV0dGVTZXR0aW5ncyB8IENvbG9yUGFsZXR0ZVNldHRpbmdzKSB7XHJcbiAgICBmb3IoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNldHRpbmdzKSkge1xyXG4gICAgICAgIC8vIElnbm9yZSBzZXR0aW5ncyB0aGF0IGRvbid0IGhhdmUgYSBkZWZhdWx0IGNvdW50ZXJwYXJ0XHJcbiAgICAgICAgaWYoIShrZXkgaW4gZGVmYXVsdFNldHRpbmdzKSkgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgYW55IHNldHRpbmdzIGFyZSBub3QgZGVmYXVsdFxyXG4gICAgICAgIGlmKHZhbHVlICE9PSBkZWZhdWx0U2V0dGluZ3Nba2V5IGFzIGtleW9mIENvbG9yUGFsZXR0ZVNldHRpbmdzXSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBtb2RpZmllZCBzZXR0aW5ncyBhcyBhIHN0cmluZ1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldE1vZGlmaWVkU2V0dGluZ3NBc1N0cmluZyAoc2V0dGluZ3M6IFBhbGV0dGVTZXR0aW5ncykge1xyXG4gICAgY29uc3QgbW9kZGVkU2V0dGluZ3MgPSBnZXRNb2RpZmllZFNldHRpbmdzKHNldHRpbmdzKTtcclxuICAgIGlmKG1vZGRlZFNldHRpbmdzKSByZXR1cm4gSlNPTi5zdHJpbmdpZnkobW9kZGVkU2V0dGluZ3MpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY29udmVydFN0cmluZ1NldHRpbmdzKHNldHRpbmdzOiBQYWxldHRlU2V0dGluZ3MpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKFxyXG4gICAgICAgIGB7XHJcbiAgICAgICAgXCJoZWlnaHRcIjogJHtzZXR0aW5ncy5oZWlnaHR9LCBcclxuICAgICAgICBcImRpcmVjdGlvblwiOiBcIiR7c2V0dGluZ3MuZGlyZWN0aW9ufVwiLCBcclxuICAgICAgICBcImdyYWRpZW50XCI6ICR7c2V0dGluZ3MuZ3JhZGllbnR9LCBcclxuICAgICAgICBcImhvdmVyXCI6ICR7c2V0dGluZ3MuaG92ZXJ9LCBcclxuXHRcdCAgXCJoaWRlVGV4dFwiOiAke3NldHRpbmdzLmhpZGVUZXh0fSxcclxuICAgICAgICBcIm92ZXJyaWRlXCI6ICR7c2V0dGluZ3Mub3ZlcnJpZGV9LCBcclxuICAgICAgICBcImFsaWFzZXNcIjogJHtKU09OLnN0cmluZ2lmeShzZXR0aW5ncy5hbGlhc2VzKX1cclxuICAgICAgICB9YFxyXG4gICAgKVxyXG59XHJcblxyXG4vKipcclxuICogUGFyc2UgaW5wdXQgdXJsICYgZXh0cmFjdCBjb2xvcnNcclxuICogQHBhcmFtIHVybCBVUkwgZnJvbSBjb2xvciBpbnB1dFxyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBjb2xvcnNcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVVybCh1cmw6IHN0cmluZykge1xyXG4gICAgLy8gQ2hlY2sgaWYgdXJsIGNvbG9ycyBjb250YWluIGRhc2hlcyBpbi1iZXR3ZWVuXHJcbiAgICBpZih1cmwuaW5jbHVkZXMoJy0nKSkge1xyXG4gICAgICAgIC8vIFJlcGxhY2UgZGFzaGVzIHdpdGggaGV4ZXMgKGNvbG9yaHVudClcclxuICAgICAgICByZXR1cm4gdXJsLnN1YnN0cmluZyh1cmwubGFzdEluZGV4T2YoJy8nKSArIDEpLnNwbGl0KCctJykubWFwKGkgPT4gJyMnICsgaSk7XHJcbiAgICB9XHJcbiAgICAvLyBBZGQgaGV4IGJldHdlZW4gVVJMIHBhdGggY29sb3JzIChjb29sb3JzKVxyXG4gICAgZWxzZSByZXR1cm4gdXJsLnN1YnN0cmluZyh1cmwubGFzdEluZGV4T2YoJy8nKSArIDEpLm1hdGNoKC8uezEsNn0vZyk/Lm1hcChpID0+ICcjJyArIGkpIHx8IFtdO1xyXG59XHJcblxyXG4vKipcclxuICogQ29udmVydHMgQ29sb3JQYWxldHRlIHBsdWdpbiBzZXR0aW5ncyB0byBQYWxldHRlIHNldHRpbmdzXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gcGx1Z2luVG9QYWxldHRlU2V0dGluZ3MocGx1Z2luU2V0dGluZ3M6IENvbG9yUGFsZXR0ZVNldHRpbmdzKTogUGFsZXR0ZVNldHRpbmdzIHtcclxuICAgIHJldHVybiB7IFxyXG4gICAgICAgIGhlaWdodDogcGx1Z2luU2V0dGluZ3MuaGVpZ2h0LCBcclxuICAgICAgICB3aWR0aDogcGx1Z2luU2V0dGluZ3Mud2lkdGgsIFxyXG4gICAgICAgIGRpcmVjdGlvbjogcGx1Z2luU2V0dGluZ3MuZGlyZWN0aW9uLCBcclxuICAgICAgICBncmFkaWVudDogcGx1Z2luU2V0dGluZ3MuZ3JhZGllbnQsIFxyXG4gICAgICAgIGhvdmVyOiBwbHVnaW5TZXR0aW5ncy5ob3ZlciwgXHJcblx0XHQgIGhpZGVUZXh0OiBwbHVnaW5TZXR0aW5ncy5oaWRlVGV4dCxcclxuICAgICAgICBvdmVycmlkZTogcGx1Z2luU2V0dGluZ3Mub3ZlcnJpZGUsIFxyXG4gICAgICAgIGFsaWFzZXM6IFtdIFxyXG4gICAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBjb2RlYmxvY2sgcGFsZXR0ZVxyXG4gKiBAcGFyYW0gaW5wdXQgRWl0aGVyIHBhbGV0dGUgaW5wdXQgb3IgY29sb3JzICYgc2V0dGluZ3Mgb2JqZWN0XHJcbiAqIEByZXR1cm5zIHBhbGV0dGUgYmxvY2sgc3RyaW5nXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUGFsZXR0ZUJsb2NrKGlucHV0OiB7IGNvbG9yczogc3RyaW5nW10sc2V0dGluZ3M/OiBQYXJ0aWFsPFBhbGV0dGVTZXR0aW5ncz4gfSB8IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBpZih0eXBlb2YgaW5wdXQgPT09ICdzdHJpbmcnKSByZXR1cm4gYFxcYFxcYFxcYHBhbGV0dGVcXG4ke2lucHV0fVxcblxcYFxcYFxcYFxcbmA7XHJcbiAgICBlbHNlIHJldHVybiBpbnB1dC5zZXR0aW5ncyA/IGBcXGBcXGBcXGBwYWxldHRlXFxuJHt0b05TdHJpbmcoaW5wdXQuY29sb3JzKX1cXG4ke0pTT04uc3RyaW5naWZ5KGlucHV0LnNldHRpbmdzKX1cXG5cXGBcXGBcXGBcXG5gIDogYFxcYFxcYFxcYHBhbGV0dGVcXG4ke3RvTlN0cmluZyhpbnB1dC5jb2xvcnMpfVxcblxcYFxcYFxcYFxcbmA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBhcHByb3ByaWF0ZSBmb3JlZ3JvdW5kIGNvbnRyYXN0IGNvbG9yXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rm9yZWdyb3VuZENvbG9yKGNvbG9yOiBSZXR1cm5UeXBlPHR5cGVvZiBjb2xvcnNlYT4pOiBzdHJpbmcge1xyXG4gICAgcmV0dXJuIChjb2xvci5yZ2IoKVswXSowLjI5OSArIGNvbG9yLnJnYigpWzFdKjAuNTg3ICsgY29sb3IucmdiKClbMl0qMC4xMTQpID4gMTg2ID8gJyMwMDAwMDAnIDogJyNmZmZmZmYnO1xyXG59XHJcblxyXG4vKipcclxuICogQ29udmVydHMgc3RyaW5nIGFycmF5IHRvIG5ld2xpbmUgc2VwYXJhdGVkIHN0cmluZ1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHRvTlN0cmluZyhhcnJheTogc3RyaW5nW10pIHtcclxuICAgIGxldCByZXN1bHQgPSAnJztcclxuICAgIGZvciAoY29uc3Qgc3RyaW5nIG9mIGFycmF5KSB7XHJcbiAgICAgICAgcmVzdWx0ICs9IHN0cmluZyArICdcXG4nO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdC50cmltKCk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb3B5VG9DbGlwYm9hcmQodGV4dDogc3RyaW5nLCBjb3B5Rm9ybWF0PzogQ29weUZvcm1hdCkge1xyXG4gICAgbGV0IGNvcGllZFRleHQgPSB0ZXh0O1xyXG5cclxuICAgIC8vIENvcHkgb25seSBjb2xvciB2YWx1ZSBpZiBDb3B5Rm9ybWF0IGlzIHNldCB0byB2YWx1ZSAmIHdoZW4gbm90IGEgY29kZWJsb2NrXHJcbiAgICBpZihjb3B5Rm9ybWF0ID09PSBDb3B5Rm9ybWF0LlZhbHVlICYmICF0ZXh0LmluY2x1ZGVzKCdgJykpIHtcclxuICAgICAgICBpZihjb3BpZWRUZXh0LmluY2x1ZGVzKCcjJykpIGNvcGllZFRleHQgPSBjb3BpZWRUZXh0LnNwbGl0KCcjJylbMV07XHJcbiAgICAgICAgZWxzZSBpZihjb3BpZWRUZXh0LmluY2x1ZGVzKCcoJykpIGNvcGllZFRleHQgPSBjb3BpZWRUZXh0LnNwbGl0KCcoJylbMV0uc3BsaXQoJyknKVswXTtcclxuICAgIH1cclxuICAgIG5ldyBOb3RpY2UoYENvcGllZCAke2NvcGllZFRleHR9YCk7XHJcbiAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChjb3BpZWRUZXh0KTtcclxufSIsICJmdW5jdGlvbiB0KHQscixuLGUpe3ZhciBvLGk9YXJndW1lbnRzLmxlbmd0aCxhPWk8Mz9yOm51bGw9PT1lP2U9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyLG4pOmU7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpYT1SZWZsZWN0LmRlY29yYXRlKHQscixuLGUpO2Vsc2UgZm9yKHZhciB1PXQubGVuZ3RoLTE7dT49MDt1LS0pKG89dFt1XSkmJihhPShpPDM/byhhKTppPjM/byhyLG4sYSk6byhyLG4pKXx8YSk7cmV0dXJuIGk+MyYmYSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHIsbixhKSxhfWZ1bmN0aW9uIHIodCxyLG4pe2lmKG58fDI9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgZSxvPTAsaT1yLmxlbmd0aDtvPGk7bysrKSFlJiZvIGluIHJ8fChlfHwoZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChyLDAsbykpLGVbb109cltvXSk7cmV0dXJuIHQuY29uY2F0KGV8fEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHIpKX12YXIgbj1mdW5jdGlvbih0LHIsbil7cmV0dXJuW3QscixuXS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybih0Lz0yNTUpPi4wNDA0NT9NYXRoLnBvdygodCsuMDU1KS8xLjA1NSwyLjQpOnQvMTIuOTJ9KSl9LGU9ZnVuY3Rpb24odCxyLG4pe3JldHVyblt0LHIsbl0ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gMjU1Kih0PD0uMDAzMDQ/MTIuOTIqdDoxLjA1NSpNYXRoLnBvdyh0LDEvMi40KS0uMDU1KX0pKX0sbz1mdW5jdGlvbih0LHIsbil7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHQsciksbil9LGk9ZnVuY3Rpb24odCxyKXtyZXR1cm4gTWF0aC5yb3VuZCgodCtOdW1iZXIuRVBTSUxPTikqTWF0aC5wb3coMTAscikpL01hdGgucG93KDEwLHIpfSxhPWZ1bmN0aW9uKHQscil7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSooci10KzEpLXQpfSx1PWZ1bmN0aW9uKHQscixuLGUpe2Zvcih2YXIgaSxhPVt0LHIsbl0sdT1cIiNcIixoPTA7aDxhLmxlbmd0aDtoKyspdSs9KGk9YVtoXSxNYXRoLnJvdW5kKG8oaSwwLDI1NSkpLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLFwiMFwiKSk7cmV0dXJuIG51bGwhPWUmJih1Kz1NYXRoLnJvdW5kKG8oZSwwLDEwMCkvMTAwKjI1NSkudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsXCIwXCIpKSx1fSxoPWZ1bmN0aW9uKHQpe3ZhciBuPXQubGVuZ3RoLGU9KHQ9ZnVuY3Rpb24odCl7dmFyIHI9KHQ9L14jLy50ZXN0KHQpP3Quc2xpY2UoMSk6dCkubGVuZ3RoO2lmKCFbMyw0LDYsOF0uaW5jbHVkZXMocikpcmV0dXJuXCIwMDAwMDBcIjtpZig2PT09cnx8OD09PXIpcmV0dXJuIHQ7aWYoMz09PXJ8fDQ9PT1yKXtmb3IodmFyIG49XCJcIixlPTA7ZTxyO2UrKyl7dmFyIG89dFtlXTtuKz1cIlwiK28rb31yZXR1cm4gbn1yZXR1cm5cIjAwMDAwMFwifSh0KS5wYWRFbmQoOCxcImZmXCIpKS5tYXRjaCgvLnsyfS9nKTtpZighZSlyZXR1cm5bMCwwLDAsMV07dmFyIG89WzAsMCwwXSxpPSExO3JldHVybiBlLmZvckVhY2goKGZ1bmN0aW9uKHQscil7cjwzP29bcl09cGFyc2VJbnQodCwxNik6aT0xMDAqcGFyc2VJbnQodCwxNikvMjU1fSkpLCExPT09aXx8bjw4P286cihyKFtdLG8sITApLFtpXSwhMSl9LGM9ZnVuY3Rpb24odCxyLG4pe3ZhciBlO2U9W3QscixuXS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiB0LzI1NX0pKSx0PWVbMF0scj1lWzFdLG49ZVsyXTt2YXIgbz0xLU1hdGgubWF4KHQscixuKSxpPW88MT8xLygxLW8pOjA7cmV0dXJuWygxLXQtbykqaSoxMDAsKDEtci1vKSppKjEwMCwoMS1uLW8pKmkqMTAwLDEwMCpvXX0sbD1mdW5jdGlvbih0LHIsbixlKXtyZXR1cm4gMTAwPT09ZT9bMCwwLDBdOihlLz0xMDAsW3QscixuXS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybih0Lz0xMDApPj0xPzA6MjU1KigxLXQpKigxLWUpfSkpKX07ZnVuY3Rpb24gcCh0LHIsbixlKXt2YXIgbzt2b2lkIDA9PT1lJiYoZT1cImxcIiksbz1bdCxyLG5dLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQvMjU1fSkpLHQ9b1swXSxyPW9bMV0sbj1vWzJdO3ZhciBpPU1hdGgubWF4KHQscixuKSxhPU1hdGgubWluKHQscixuKSx1PWZ1bmN0aW9uKHQscixuLGUpe3ZhciBvO3ZvaWQgMD09PWUmJihlPSExKSxvPVt0LHIsbl0ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdC8yNTV9KSksdD1vWzBdLHI9b1sxXSxuPW9bMl07dmFyIGk9TWF0aC5tYXgodCxyLG4pLGE9TWF0aC5taW4odCxyLG4pLHU9MDtpZihpIT09YSlpZihlKXU9KHQtcisodC1uKSkvMix1Lz1NYXRoLnNxcnQoKHQtcikqKHQtcikrKHQtbikqKHItbikpLHU9TWF0aC5hY29zKHUpLG4+ciYmKHU9MipNYXRoLlBJLXUpLHUvPTIqTWF0aC5QSTtlbHNle3ZhciBoPWktYTt1PWk9PT10PyhyLW4pL2grKHI8bj82OjApOmk9PT1yPyhuLXQpL2grMjoodC1yKS9oKzQsdS89Nn1lbHNlIHU9TmFOO3JldHVybiAzNjAqdX0odCxyLG4sXCJpXCI9PT1lKSxoPTAsYz0oaSthKS8yLGw9aS1hLHA9aSxmPSh0K3IrbikvMztyZXR1cm5cInZcIj09PWUmJihoPTA9PT1pPzA6bC9pKSxpIT09YSYmXCJsXCI9PT1lJiYoaD1jPi41P2wvKDItaS1hKTpsLyhpK2EpKSxcImlcIj09PWUmJihoPWY+MD8xLWEvZjowKSxoKj0xMDAsYyo9MTAwLGYqPTEwMCxcImxcIj09PWU/W3UsaCxjXTpcInZcIj09PWU/W3UsaCxwKj0xMDBdOlt1LGgsZl19dmFyIGY9ZnVuY3Rpb24odCxyLG4pe3JldHVybiBwKHQscixuLFwibFwiKX0scz1mdW5jdGlvbih0LHIsbil7dmFyIGUsaSxhPWZ1bmN0aW9uKHQpe3JldHVybiA2Kih0PXQ8MD90KzE6dD4xP3QtMTp0KTwxP2UrKGktZSkqdCo2OjIqdDwxP2k6Myp0PDI/ZSsoaS1lKSooMi8zLXQpKjY6ZX07cmV0dXJuIHQ9dCUzNjAvMzYwLHI9byhyLzEwMCwwLDEpLG49byhuLzEwMCwwLDEpLGU9MipuLShpPW48PS41P24qKHIrMSk6bityLW4qciksWzI1NSphKHQrMS8zKSwyNTUqYSh0KSwyNTUqYSh0LTEvMyldfSx2PWZ1bmN0aW9uKHQscixuKXtyZXR1cm4gcCh0LHIsbixcInZcIil9LGI9ZnVuY3Rpb24odCxyLG4pe3ZhciBlLG8saT1bbi89MTAwLG4qKDEtKHIvPTEwMCkpLG4qKDEtKG89KHQ9dCUzNjAvMzYwKjM2MCkvNjAtKGU9TWF0aC5mbG9vcih0LzYwJTYpKSkqciksbiooMS0oMS1vKSpyKV0sYT1bWzAsMywxXSxbMiwwLDFdLFsxLDAsM10sWzEsMiwwXSxbMywxLDBdLFswLDEsMl1dO3JldHVyblsyNTUqaVthW2VdWzBdXSwyNTUqaVthW2VdWzFdXSwyNTUqaVthW2VdWzJdXV19LHk9ZnVuY3Rpb24odCxyLG4pe3JldHVybiBwKHQscixuLFwiaVwiKX0sZD1mdW5jdGlvbih0LHIsbil7dmFyIGUsaSxhLHU7ci89MTAwLG4vPTEwMCxpc05hTih0KSYmKHQ9MCksaXNOYU4ocikmJihyPTApO3ZhciBoPWZ1bmN0aW9uKHQpe3JldHVybigxK3IqTWF0aC5jb3MoMipNYXRoLlBJKnQpL01hdGguY29zKE1hdGguUEkvMy0yKk1hdGguUEkqdCkpLzN9O3JldHVybih0PSgzNjArdCklMzYwLzM2MCk8MS8zP2E9MS0oKHU9KDEtcikvMykrKGk9aCh0KSkpOnQ8Mi8zP3U9MS0oKGk9KDEtcikvMykrKGE9aCh0LT0xLzMpKSk6aT0xLSgoYT0oMS1yKS8zKSsodT1oKHQtPTIvMykpKSxlPVtpLGEsdV0ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gMjU1Km8obip0KjMsMCwxKX0pKSxbaT1lWzBdLGE9ZVsxXSx1PWVbMl1dfSxnPWZ1bmN0aW9uKHQscixuKXtyZXR1cm5bZih0LHIsbilbMF0sMTAwKihNYXRoLm1pbih0LHIsbikvMjU1KSwxMDAqKDEtTWF0aC5tYXgodCxyLG4pLzI1NSldfTtmdW5jdGlvbiB3KHQscixuKXtyZXR1cm4gci89MTAwLG4vPTEwMCxzKHQsMTAwLDUwKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiAyNTUqKHQvMjU1KigxLXItbikrcil9KSl9dmFyIG09e3g6Wy40MTI0NTY0LC4zNTc1NzYxLC4xODA0Mzc1XSx5OlsuMjEyNjcyOSwuNzE1MTUyMiwuMDcyMTc1XSx6OlsuMDE5MzMzOSwuMTE5MTkyLC45NTAzMDQxXX0sTT17cjpbMy4yNDA0NTQyLC0xLjUzNzEzODUsLS40OTg1MzE0XSxnOlstLjk2OTI2NiwxLjg3NjAxMDgsLjA0MTU1Nl0sYjpbLjA1NTY0MzQsLS4yMDQwMjU5LDEuMDU3MjI1Ml19LHg9Ljk1MDQ3LF89MSxDPTEuMDg4ODMsST0uMjA2ODk2NTUyLGs9LjAwODg1NjQ1MixFPTI0Mzg5LzI3LHo9ZnVuY3Rpb24odCxyLGUpe3ZhciBvPW4odCxyLGUpO3JldHVyblsxMDAqbS54LnJlZHVjZSgoZnVuY3Rpb24odCxyLG4pe3JldHVybiB0K3Iqb1tuXX0pLDApLDEwMCptLnkucmVkdWNlKChmdW5jdGlvbih0LHIsbil7cmV0dXJuIHQrcipvW25dfSksMCksMTAwKm0uei5yZWR1Y2UoKGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gdCtyKm9bbl19KSwwKV19LE49ZnVuY3Rpb24odCxyLG4pe3ZhciBvPVt0LHIsbl0saT1NLnIucmVkdWNlKChmdW5jdGlvbih0LHIsbil7cmV0dXJuIHQrcipvW25dfSksMCkvMTAwLGE9TS5nLnJlZHVjZSgoZnVuY3Rpb24odCxyLG4pe3JldHVybiB0K3Iqb1tuXX0pLDApLzEwMCx1PU0uYi5yZWR1Y2UoKGZ1bmN0aW9uKHQscixuKXtyZXR1cm4gdCtyKm9bbl19KSwwKS8xMDA7cmV0dXJuIGUoaSxhLHUpfSxPPWZ1bmN0aW9uKHQscixuKXt2YXIgZTtyZXR1cm4gZT1bdD10L3gvMTAwLHI9ci9fLzEwMCxuPW4vQy8xMDBdLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuIHQ+az9NYXRoLnBvdyh0LDEvMyk6KEUqdCsxNikvMTE2fSkpLHQ9ZVswXSxyPWVbMV0sbj1lWzJdLFtNYXRoLm1heCgwLDExNipyLTE2KSw1MDAqKHQtciksMjAwKihyLW4pXX0sUD1mdW5jdGlvbih0LHIsbil7dmFyIGUsbz0odCsxNikvMTE2LGk9aXNOYU4ocik/bzpvK3IvNTAwLGE9aXNOYU4obik/bzpvLW4vMjAwO3JldHVybiBlPVtpLG8sYV0ubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gdD5JP01hdGgucG93KHQsMyk6KDExNip0LTE2KS9FfSkpLGk9ZVswXSxvPWVbMV0sYT1lWzJdLFtpKngqMTAwLG8qXyoxMDAsYSpDKjEwMF19LGo9ZnVuY3Rpb24odCxyLG4pe3JldHVybiBOLmFwcGx5KHZvaWQgMCxQKHQscixuKSl9LFM9ZnVuY3Rpb24odCxyLG4pe3I9byhyLC0xMDAsMTAwKSxuPW8obiwtMTAwLDEwMCk7dmFyIGU9TWF0aC5zcXJ0KHIqcituKm4pLGk9KDE4MCpNYXRoLmF0YW4yKG4scikvTWF0aC5QSSszNjApJTM2MDtyZXR1cm4gMD09PU1hdGgucm91bmQoMWU0KmUpJiYoaT1OdW1iZXIuTmFOKSxbdCxlLGldfSxBPWZ1bmN0aW9uKHQscixuKXtyZXR1cm4gaXNOYU4obikmJihuPTApLG4qPU1hdGguUEkvMTgwLFt0LE1hdGguY29zKG4pKnIsTWF0aC5zaW4obikqcl19LEw9ZnVuY3Rpb24odCxyLG4pe3JldHVybiBQLmFwcGx5KHZvaWQgMCxBKHQscixuKSl9LEg9ZnVuY3Rpb24odCxyLG4pe3ZhciBlPXQrcituLG89MCxpPTA7cmV0dXJuIGU+MCYmKG89dC9lLGk9ci9lKSxbbyxpLHJdfSxZPU9iamVjdC5mcmVlemUoe19fcHJvdG9fXzpudWxsLGxpbmVhcjJyZ2I6ZSxyZ2IybGluZWFyOm4scmdiMmhleDp1LGhleDJyZ2I6aCxyZ2IyY215azpjLGNteWsycmdiOmwscmdiMmhzbDpmLGhzbDJyZ2I6cyxyZ2IyaHN2OnYsaHN2MnJnYjpiLHJnYjJoc2k6eSxoc2kycmdiOmQscmdiMmh3YjpnLGh3YjJyZ2I6dyxyZ2IyeHl6OnoseHl6MnJnYjpOLHh5ejJsYWI6TyxsYWIyeHl6OlAscmdiMmxhYjpmdW5jdGlvbih0LHIsbil7cmV0dXJuIE8uYXBwbHkodm9pZCAwLHoodCxyLG4pKX0sbGFiMnJnYjpqLGxjaDJsYWI6QSxsYWIybGNoOlMseHl6MmxjaDpmdW5jdGlvbih0LHIsbil7cmV0dXJuIFMuYXBwbHkodm9pZCAwLE8odCxyLG4pKX0sbGNoMnh5ejpMLHh5WTJ4eXo6ZnVuY3Rpb24odCxyLG4pe3JldHVybiAwPT09cj9bMCwwLDBdOlt0KihuL3IpLG4sbi9yKigxLXQtcildfSx4eXoyeHlZOkh9KTtmdW5jdGlvbiBSKHQsbil7cmV0dXJuIHZvaWQgMD09PW4mJihuPSExKSxmdW5jdGlvbihlLG8saSl7dmFyIGE9aS52YWx1ZTtpLnZhbHVlPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLG89MDtvPGFyZ3VtZW50cy5sZW5ndGg7bysrKWVbb109YXJndW1lbnRzW29dO2lmKGUubGVuZ3RoPjAmJm4pe3ZhciBpPUpTT04uc3RyaW5naWZ5KGUpO3QrPWl9aWYodGhpcy5jYWNoZS5oYXModCkpcmV0dXJuIHRoaXMuY2FjaGUuZ2V0KHQpO3ZhciB1PWEuY2FsbC5hcHBseShhLHIoW3RoaXNdLGUsITEpKTtyZXR1cm4gdGhpcy5jYWNoZS5zZXQodCx1KSx1fX19ZnVuY3Rpb24gcSh0LG4sZSxvKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9WzAsMiwyXSksdm9pZCAwPT09biYmKG49MCksdm9pZCAwPT09ZSYmKGU9ITApLHZvaWQgMD09PW8mJihvPTApLGZ1bmN0aW9uKGEsdSxoKXt2YXIgYz1oLnZhbHVlO2gudmFsdWU9ZnVuY3Rpb24oKXtmb3IodmFyIGE9W10sdT0wO3U8YXJndW1lbnRzLmxlbmd0aDt1KyspYVt1XT1hcmd1bWVudHNbdV07dmFyIGg9dm9pZCAwPT09YVtvXT9lOmFbb10sbD1jLmNhbGwuYXBwbHkoYyxyKFt0aGlzXSxhLCExKSk7aWYoITE9PT1oKXJldHVybiBsO3ZhciBwPVwibnVtYmVyXCI9PXR5cGVvZiBoP01hdGgucm91bmQoaCk6MCxmPVwibnVtYmVyXCI9PXR5cGVvZiB0P25ldyBBcnJheShsLmxlbmd0aCkuZmlsbCh0KTp0LHM9Zi5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiAxPT09bj9cIm51bWJlclwiPT10eXBlb2YgaD9wOnQ6dCtwfSkpO3JldHVybiBsLm1hcCgoZnVuY3Rpb24odCxyKXtyZXR1cm4gaSh0LHNbcl0pfSkpfX19dmFyIEQ9ZnVuY3Rpb24odCxyLG4pe3ZhciBlPXQgaW5zdGFuY2VvZiBmdD90Om5ldyBmdCh0KSxpPXIgaW5zdGFuY2VvZiBmdD9yOm5ldyBmdChyKSxhPW8obiwwLDEwMCkvMTAwLHU9MiphLTEsaD1lLmFscGhhKCktaS5hbHBoYSgpLGM9KCh1Kmg9PS0xP3U6KHUraCkvKDErdSpoKSkrMSkvMixsPTEtYyxwPVtNYXRoLnJvdW5kKG8oZS5yZWQoKSpjK2kucmVkKCkqbCwwLDI1NSkpLE1hdGgucm91bmQobyhlLmdyZWVuKCkqYytpLmdyZWVuKCkqbCwwLDI1NSkpLE1hdGgucm91bmQobyhlLmJsdWUoKSpjK2kuYmx1ZSgpKmwsMCwyNTUpKV0sZj1lLmFscGhhKCkqYStpLmFscGhhKCkqKDEtYSk7cmV0dXJuIG5ldyBmdChwLGYpfSxGPU1hdGguc3FydCxVPU1hdGgucG93LCQ9TWF0aC5jb3MsSj1NYXRoLmFicyxaPU1hdGguc2luLEI9TWF0aC5leHAsRz1NYXRoLmF0YW4yLEs9TWF0aC5QSSxRPWZ1bmN0aW9uKHQpe3JldHVybiBLKnQvMTgwfSxUPWZ1bmN0aW9uKHQscixuKXt2b2lkIDA9PT1uJiYobj0hMCk7dmFyIGU9RyhyLHQpO3JldHVybiBuJiYoZT0oZT0oZT0xODAqZS9LKT4wP2U6ZSszNjApPjM2MD9lLTM2MDplKSxlfSxWPWZ1bmN0aW9uKHQscil7dm9pZCAwPT09ciYmKHI9ITApO3ZhciBuPXQubGFiKCExKSxlPW5bMF0sbz1uWzFdLGk9blsyXTtyZXR1cm5bZSxGKFUobywyKStVKGksMikpLFQobyxpLHIpLG8saV19LFc9W1wiQ01DXCIsXCJDSUVcIixcIkNJRTIwMDBcIixcIkNJRTE5OTRcIixcIkNJRTE5NzZcIl0sWD1cIkNNQ1wiLHR0PVwiQ0lFMjAwMFwiLHJ0PVwiQ0lFMTk5NFwiLG50PVwiQ0lFMTk3NlwiLGV0PWZ1bmN0aW9uKHQscixuLGUpe3ZvaWQgMD09PW4mJihuPVwiQ0lFXCIpO3ZhciBvPWZ1bmN0aW9uKHQpe3ZhciByPXQudG9VcHBlckNhc2UoKTtyZXR1cm4gVy5pbmNsdWRlcyhyKSYmXCJDSUVcIiE9PXI/cjp0dH0obik7aWYoZT1lfHx7fSxvPT09WCl7dmFyIGk9T2JqZWN0LmFzc2lnbih7fSx7bDoxLGM6MX0sZSk7cmV0dXJuIGZ1bmN0aW9uKHQscixuLGUpe3ZvaWQgMD09PW4mJihuPTEpLHZvaWQgMD09PWUmJihlPTEpO3ZhciBvPVYodCwhMCksaT1vWzBdLGE9b1sxXSx1PW9bMl0saD1vWzNdLGM9b1s0XSxsPVYocikscD1sWzBdLGY9bFsxXSxzPWxbM10sdj1hLWYsYj1pLXAseT1jLWxbNF0sZD1GKFUoaC1zLDIpK1UoeSwyKS1VKHYsMikpLGc9aTwxNj8uNTExOi4wNDA5NzUqaS8oMSsuMDE3NjUqaSksdz0uMDYzOCphLygxKy4wMTMxKmEpKy42MzgsbT0xNjQ8PXUmJnU8PTM0NT8uNTYrSiguMiokKFEodSsxNjgpKSk6LjM2K0ooLjQqJChRKHUrMzUpKSksTT1GKFUoYSw0KS8oVShhLDQpKzE5MDApKSx4PXcqKE0qbSsxLU0pO3JldHVybiBGKFUoYi8obipnKSwyKStVKHYvKGUqdyksMikrVShkL3gsMikpfSh0LHIsaS5sLGkuYyl9aWYobz09PXJ0KXt2YXIgYT17a0w6MSxrQzoxLGtIOjEsY2F0ZTpcImdyYXBoaWNcIn0sdT1PYmplY3QuYXNzaWduKHt9LGEsZSk7cmV0dXJuIGZ1bmN0aW9uKHQscixuLGUsbyxpKXt2b2lkIDA9PT1uJiYobj0xKSx2b2lkIDA9PT1lJiYoZT0xKSx2b2lkIDA9PT1vJiYobz0xKSx2b2lkIDA9PT1pJiYoaT1cImdyYXBoaWNcIik7dmFyIGE9XCJ0ZXh0aWxlc1wiPT09aT8uMDQ4Oi4wNDUsdT1cInRleHRpbGVzXCI9PT1pPy4wMTQ6LjAxNTtuPVwidGV4dGlsZXNcIj09PWk/MjpuO3ZhciBoPVYodCksYz1oWzBdLGw9aFsxXSxwPWhbM10sZj1oWzRdLHM9VihyKSx2PXNbMF0sYj1zWzFdLHk9c1szXSxkPWMtdixnPWwtYix3PWYtc1s0XSxtPTErYSpsLE09MSt1KmwseD1GKFUocC15LDIpK1UodywyKS1VKGcsMikpO3JldHVybiBGKFUoZC8oMSpuKSwyKStVKGcvKGUqbSksMikrVSh4LyhvKk0pLDIpKX0odCxyLHUua0wsdS5rQyx1LmtILHUuY2F0ZSl9aWYobz09PW50KXJldHVybiBmdW5jdGlvbih0LHIpe3ZhciBuPXQubGFiKCExKSxlPW5bMF0sbz1uWzFdLGk9blsyXSxhPXIubGFiKCExKSx1PWFbMF0saD1hWzFdLGM9YVsyXTtyZXR1cm4gRihVKGUtdSwyKStVKG8taCwyKStVKGktYywyKSl9KHQscik7dmFyIGg9e2tMOjEsa0M6MSxrSDoxfSxjPU9iamVjdC5hc3NpZ24oe30saCxlKTtyZXR1cm4gZnVuY3Rpb24odCxyLG4sZSxvKXt2b2lkIDA9PT1uJiYobj0xKSx2b2lkIDA9PT1lJiYoZT0xKSx2b2lkIDA9PT1vJiYobz0xKTt2YXIgaT1WKHQpLGE9aVswXSx1PWlbMV0saD1pWzNdLGM9aVs0XSxsPVYocikscD1sWzBdLGY9bFsxXSxzPWxbM10sdj1sWzRdLGI9KGErcCkvMix5PSh1K2YpLzIsZD0oMS1GKFUoeSw3KS8oVSh5LDcpK1UoMjUsNykpKSkvMixnPWgqKDErZCksdz1zKigxK2QpLG09RihVKGcsMikrVShjLDIpKSxNPUYoVSh3LDIpK1UodiwyKSkseD1UKGcsYywhMCksXz1UKHcsdiwhMCksQz0obStNKS8yLEk9Sih4LV8pPjE4MD8oeCtfKzM2MCkvMjooeCtfKS8yLGs9MS0uMTcqJChRKEktMzApKSsuMjQqJChRKDIqSSkpKy4zMiokKFEoMypJKzYpKS0uMiokKFEoNCpJLTYzKSksRT1KKF8teCk8PTE4MD9fLXg6SihfLXgpPjE4MCYmXzw9eD9fLXgrMzYwOl8teC0zNjAsej1wLWEsTj1mLXUsTz0yKkYobSpNKSpaKFEoRSkvMiksUD0xKy4wMTUqVShiLTUwLDIpL0YoMjArVShiLTUwLDIpKSxqPTErLjA0NSpDLFM9MSsuMDE1KkMqayxBPTMwKkIoLVUoKEktMjc1KS8yNSwyKSksTD0tMipGKFUoQyw3KS8oVShDLDcpK1UoMjUsNykpKSpaKDIqUShBKSk7cmV0dXJuIEYoVSh6LyhuKlApLDIpK1UoTi8oZSpqKSwyKStVKE8vKG8qUyksMikrTCooTi8oZSpqKSkqKE8vKG8qUykpKX0odCxyLGMua0wsYy5rQyxjLmtIKX0sb3Q9ZnVuY3Rpb24odCxyLG4pe3ZhciBlPU1hdGguYWJzLG89TWF0aC5tYXgsaT1NYXRoLm1pbixhPXQgaW5zdGFuY2VvZiBmdD90Om5ldyBmdCh0KSx1PXIgaW5zdGFuY2VvZiBmdD9yOm5ldyBmdChyKSxoPU9iamVjdC5hc3NpZ24oe30se2I6MTI1LGM6NTAwfSxuKTtyZXR1cm4hKGUoMjU1KmEuYnJpZ2h0bmVzcygpLzEwMC0yNTUqdS5icmlnaHRuZXNzKCkvMTAwKTw9aC5iKSYmIShvKGEucmVkKCksdS5yZWQoKSktaShhLnJlZCgpLHUucmVkKCkpKyhvKGEuZ3JlZW4oKSx1LmdyZWVuKCkpLWkoYS5ncmVlbigpLHUuZ3JlZW4oKSkpKyhvKGEuYmx1ZSgpLHUuYmx1ZSgpKS1pKGEuYmx1ZSgpLHUuYmx1ZSgpKSk8PWguYyl9LGl0PWZ1bmN0aW9uKHQscixuKXt2YXIgZSxpPWZ1bmN0aW9uKHQpe3JldHVybiBvKHQsMCwxMDApfSxhPWZ1bmN0aW9uKHQpe3JldHVybiBvKHQsMCwyNTUpfSx1PXtoOlswLGZ1bmN0aW9uKHQpe3JldHVybiB0JTM2MH1dLHM6WzEsaV0sbDpbMixpXSxyOlswLGFdLGc6WzEsYV0sYjpbMixhXX0saD11W3JdWzBdO2lmKFtcImhcIixcInNcIixcImxcIl0uaW5jbHVkZXMocikpe3ZhciBjPXQuaHNsKCk7aWYodm9pZCAwPT09bilyZXR1cm4gY1toXTtuPXVbcl1bMV0obiksY1toXT1uLGU9cy5hcHBseSh2b2lkIDAsYyl9ZWxzZXtpZihlPXQucmdiKCksdm9pZCAwPT09bilyZXR1cm4gZVtoXTtuPXVbcl1bMV0obiksZVtoXT1ufXJldHVybiBuZXcgZnQoZSx0LmFscGhhKCkpfSxhdD17fSx1dD1uZXcgU2V0KFtcInJnYlwiLFwicmdiYVwiLFwiY215a1wiLFwibGFiXCIsXCJoc2xcIixcImhzbGFcIixcImhzdlwiLFwiaHN2YVwiLFwiaHNpXCIsXCJoc2lhXCIsXCJ4eXpcIixcImxjaFwiLFwiaHdiXCIsXCJod2JhXCJdKSxodD0vXihbYS16QS1aXSspXFwoKFtcXHNcXFNdKylcXCkkLyxjdD1mdW5jdGlvbih0KXtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgdD8tMT09PXQuaW5kZXhPZihcIiVcIik/Y3QoTnVtYmVyKHQudHJpbSgpKSk6KHQ9dC5zcGxpdChcIiVcIilbMF0sKHQ9TnVtYmVyKHQudHJpbSgpKSl8fDApOk1hdGguYWJzKHQpPDE/MTAwKnQ6dH0sbHQ9ZnVuY3Rpb24odCxyKXt2b2lkIDA9PT1yJiYocj1uZXcgU2V0KTt2YXIgbj1cInN0cmluZ1wiPT10eXBlb2YgdD90OnQuam9pbihcIixcIik7aWYoci5oYXMobikpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBDb2xvclwiKTtyLmFkZChuKTt2YXIgZT1cInJnYlwiLG89WzAsMCwwXSxpPTEwMDtpZihBcnJheS5pc0FycmF5KHQpKXtpZih0Lmxlbmd0aDwzKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgQ29sb3JcIik7Zm9yKHZhciBhPTA7YTx0Lmxlbmd0aDthKyspaWYoYTwzKW9bYV09dFthXTtlbHNle2lmKDMhPT1hfHx2b2lkIDA9PT10WzNdKWJyZWFrO2k9dFszXX19ZWxzZXt2YXIgdT0hMSxjPXQudHJpbSgpLm1hdGNoKGh0KTtpZihjfHwodT0hMCksYyl7dmFyIGw9Y1sxXS50b0xvY2FsZUxvd2VyQ2FzZSgpO2lmKGU9bCx1dC5oYXMobCl8fCh1PSEwKSxjWzJdJiYhdSl7dmFyIHA9Y1syXSxmPS0xIT09cC5pbmRleE9mKFwiLFwiKT9cIixcIjpcIiBcIixzPXAuc3BsaXQoZik7Zm9yKGE9MDthPDM7YSsrKXZvaWQgMCE9PXNbYV0mJihbXCJsY2hcIixcImxhYlwiXS5pbmNsdWRlcyhlKSYmMD09PWF8fFtcImhzbFwiLFwiaHNsYVwiLFwiaHN2XCIsXCJoc3ZhXCIsXCJod2JcIixcImh3YmFcIixcImhzaVwiLFwiaHNpYVwiXS5pbmNsdWRlcyhlKSYmYT4wP29bYV09Y3Qoc1thXSk6b1thXT1OdW1iZXIoc1thXS50cmltKCkpKTtbXCJyZ2JhXCIsXCJoc2xhXCIsXCJoc3ZhXCIsXCJod2JhXCIsXCJoc2lhXCJdLmluY2x1ZGVzKGUpPyhlPWUuc2xpY2UoMCwtMSksdm9pZCAwIT09c1szXSYmKGk9Y3Qoc1szXSkpKTpcImNteWtcIj09PWUmJm8ucHVzaCh2b2lkIDAhPT1zWzNdP2N0KHNbM10pOjApfX1pZih1KXtpZighL14jKChbYS1mQS1GXFxkXXszfSl7MSwyfXxbYS1mQS1GXFxkXXs4fSkkLy50ZXN0KHQpKXRyeXtyZXR1cm4gdD1mdW5jdGlvbih0LHIpe2lmKHZvaWQgMD09PXImJihyPSExKSx0PXQudG9Mb3dlckNhc2UoKSx2b2lkIDA9PT1hdFt0XSl7aWYocil0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIGNvbG9yIG5hbWU6IFwiLmNvbmNhdCh0LFwiKVwiKSk7cmV0dXJuIHR9cmV0dXJuIGF0W3RdfSh0LCEwKSxsdCh0LHIpfWNhdGNoKHQpe3Rocm93IG5ldyBFcnJvcihcIkludmFsaWQgQ29sb3JcIil9bz1oKHQpfX1yZXR1cm5bZSxvLGldfSxwdD17dGhvd1BhcnNlRXJyb3I6ITF9LGZ0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbih0LHIsbil7dGhpcy5jYWNoZT1uZXcgTWFwLHRoaXMuX3JnYj1bMCwwLDBdLHRoaXMuX2FscGhhPTEwMDt2YXIgZT17dGhvd1BhcnNlRXJyb3I6cHQudGhvd1BhcnNlRXJyb3J9LGk9T2JqZWN0LmFzc2lnbih7fSxlLG51bGwhPW4/bjp7fSk7dHJ5e3ZhciBhPWZ1bmN0aW9uKHQpe3ZhciByLG49e2xhYjJyZ2I6aixoc2wycmdiOnMsaHN2MnJnYjpiLHh5ejJyZ2I6Tixod2IycmdiOncsaHNpMnJnYjpkfSxlPWx0KHQpLGk9ZVswXSxhPWVbMV0sdT1lWzJdO2lmKFwicmdiXCI9PT1pKXJldHVyblthLHVdO1wibGNoXCI9PT1pJiYoaT0ocj1bXCJ4eXpcIixMKGFbMF0sYVsxXSxhWzJdKV0pWzBdLGE9clsxXSk7dmFyIGg9YVswXSxjPWFbMV0scD1hWzJdLGY9YVszXTtpZihcImNteWtcIj09PWkpcmV0dXJuW2woaCxjLHAsZikubWFwKChmdW5jdGlvbih0KXtyZXR1cm4gbyh0LDAsMjU1KX0pKSx1XTt2YXIgdj1cIlwiLmNvbmNhdChpLFwiMnJnYlwiKTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBuW3ZdKXJldHVybltuW3ZdKGgsYyxwKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBvKHQsMCwyNTUpfSkpLHVdO3Rocm93IG5ldyBFcnJvcihcIkludmFsaWQgY29sb3JcIil9KHQpLHU9YVswXSxoPWFbMV07dGhpcy5fYWxwaGE9aCx0aGlzLl9yZ2I9dX1jYXRjaCh0KXtpZihpLnRob3dQYXJzZUVycm9yKXRocm93IHR9dm9pZCAwIT09ciYmKHRoaXMuX2FscGhhPW8ociwwLDEwMCkpfXJldHVybiBuLnByb3RvdHlwZS5yZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIGl0KHRoaXMsXCJyXCIsdCl9LG4ucHJvdG90eXBlLmdyZWVuPWZ1bmN0aW9uKHQpe3JldHVybiBpdCh0aGlzLFwiZ1wiLHQpfSxuLnByb3RvdHlwZS5ibHVlPWZ1bmN0aW9uKHQpe3JldHVybiBpdCh0aGlzLFwiYlwiLHQpfSxuLnByb3RvdHlwZS5hbHBoYT1mdW5jdGlvbih0KXtyZXR1cm4gdm9pZCAwPT09dD90aGlzLl9hbHBoYToodD1vKHQsMCwxMDApLG5ldyBuKHRoaXMucmdiKCksdCkpfSxuLnByb3RvdHlwZS5mYWRlSW49ZnVuY3Rpb24odCxyKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MTApLHQ9ciYmXCJyZWxhdGl2ZVwiPT09cj90aGlzLl9hbHBoYSp0LzEwMDp0LG5ldyBuKHRoaXMucmdiKCksbyh0aGlzLl9hbHBoYSt0LDAsMTAwKSl9LG4ucHJvdG90eXBlLmZhZGVPdXQ9ZnVuY3Rpb24odCxyKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MTApLHQ9ciYmXCJyZWxhdGl2ZVwiPT09cj90aGlzLl9hbHBoYSp0LzEwMDp0LG5ldyBuKHRoaXMucmdiKCksbyh0aGlzLl9hbHBoYS10LDAsMTAwKSl9LG4ucHJvdG90eXBlLm9wYWNpZnk9ZnVuY3Rpb24odCxyKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9MTApLHRoaXMuZmFkZUluKHQscil9LG4ucHJvdG90eXBlLnRyYW5zcGFyZW50aXplPWZ1bmN0aW9uKHQscil7cmV0dXJuIHZvaWQgMD09PXQmJih0PTEwKSx0aGlzLmZhZGVPdXQodCxyKX0sbi5wcm90b3R5cGUuaHVlPWZ1bmN0aW9uKHQpe3JldHVybiBpdCh0aGlzLFwiaFwiLHQpfSxuLnByb3RvdHlwZS5zYXR1cmF0aW9uPWZ1bmN0aW9uKHQpe3JldHVybiBpdCh0aGlzLFwic1wiLHQpfSxuLnByb3RvdHlwZS5saWdodG5lc3M9ZnVuY3Rpb24odCl7cmV0dXJuIGl0KHRoaXMsXCJsXCIsdCl9LG4ucHJvdG90eXBlLnJnYj1mdW5jdGlvbih0KXtyZXR1cm4gcihbXSx0aGlzLl9yZ2IsITApfSxuLnByb3RvdHlwZS5yZ2JhPWZ1bmN0aW9uKHQpe3JldHVybiByKHIoW10sdGhpcy5yZ2IoITEpLCEwKSxbdGhpcy5fYWxwaGFdLCExKX0sbi5wcm90b3R5cGUuY215az1mdW5jdGlvbih0KXtyZXR1cm4gYy5hcHBseSh2b2lkIDAsdGhpcy5fcmdiKX0sbi5wcm90b3R5cGUuaHNsPWZ1bmN0aW9uKHQpe3JldHVybiBmLmFwcGx5KHZvaWQgMCx0aGlzLl9yZ2IpfSxuLnByb3RvdHlwZS5oc2xhPWZ1bmN0aW9uKHQpe3JldHVybiByKHIoW10sdGhpcy5oc2woITEpLCEwKSxbdGhpcy5fYWxwaGFdLCExKX0sbi5wcm90b3R5cGUuaHN2PWZ1bmN0aW9uKHQpe3JldHVybiB2LmFwcGx5KHZvaWQgMCx0aGlzLl9yZ2IpfSxuLnByb3RvdHlwZS5oc2k9ZnVuY3Rpb24odCl7cmV0dXJuIHkuYXBwbHkodm9pZCAwLHRoaXMuX3JnYil9LG4ucHJvdG90eXBlLmh3Yj1mdW5jdGlvbih0KXtyZXR1cm4gZy5hcHBseSh2b2lkIDAsdGhpcy5fcmdiKX0sbi5wcm90b3R5cGUueHl6PWZ1bmN0aW9uKHQpe3JldHVybiB6LmFwcGx5KHZvaWQgMCx0aGlzLl9yZ2IpfSxuLnByb3RvdHlwZS5sYWI9ZnVuY3Rpb24odCl7cmV0dXJuIE8uYXBwbHkodm9pZCAwLHRoaXMueHl6KCExKSl9LG4ucHJvdG90eXBlLmxjaD1mdW5jdGlvbih0KXtyZXR1cm4gUy5hcHBseSh2b2lkIDAsdGhpcy5sYWIoITEpKX0sbi5wcm90b3R5cGUueHlZPWZ1bmN0aW9uKHQpe3JldHVybiBILmFwcGx5KHZvaWQgMCx0aGlzLnh5eighMSkpfSxuLnByb3RvdHlwZS5oZXg9ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9Mik7dmFyIG49MD09PXQ/dm9pZCAwOjE9PT10P3RoaXMuX2FscGhhOjEwMD09PXRoaXMuX2FscGhhP3ZvaWQgMDp0aGlzLl9hbHBoYSxlPVwiY29sb3I6aGV4OnBhcmFtX1wiLmNvbmNhdCh0KTtpZih0aGlzLmNhY2hlLmhhcyhlKSlyZXR1cm4gdGhpcy5jYWNoZS5nZXQoZSk7dmFyIG89dS5hcHBseSh2b2lkIDAscihyKFtdLHRoaXMuX3JnYiwhMSksW25dLCExKSk7cmV0dXJuIHRoaXMuY2FjaGUuc2V0KGUsbyksb30sbi5wcm90b3R5cGUubGlnaHRlbj1mdW5jdGlvbih0LHIpe3ZvaWQgMD09PXQmJih0PTUpO3ZhciBlPXRoaXMuaHNsKCExKSxpPWVbMF0sYT1lWzFdLHU9ZVsyXTtyZXR1cm4gdT1vKHUrPXZvaWQgMCE9PXImJlwicmVsYXRpdmVcIj09PXI/dSoodC8xMDApOnQsMCwxMDApLG5ldyBuKHMoaSxhLHUpLHRoaXMuX2FscGhhKX0sbi5wcm90b3R5cGUuZGFya2VuPWZ1bmN0aW9uKHQscil7cmV0dXJuIHZvaWQgMD09PXQmJih0PTUpLHRoaXMubGlnaHRlbigtdCxyKX0sbi5wcm90b3R5cGUuc2F0dXJhdGU9ZnVuY3Rpb24odCxyKXt2b2lkIDA9PT10JiYodD01KTt2YXIgZT10aGlzLmhzbCghMSksaT1lWzBdLGE9ZVsxXSx1PWVbMl07cmV0dXJuIGE9byhhKz12b2lkIDAhPT1yJiZcInJlbGF0aXZlXCI9PT1yP2EqKHQvMTAwKTp0LDAsMTAwKSxuZXcgbihzKGksYSx1KSx0aGlzLl9hbHBoYSl9LG4ucHJvdG90eXBlLmRlc2F0dXJhdGU9ZnVuY3Rpb24odCxyKXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9NSksdGhpcy5zYXR1cmF0ZSgtdCxyKX0sbi5wcm90b3R5cGUuc3Bpbj1mdW5jdGlvbih0KXt2YXIgcj10aGlzLmhzbCghMSksZT1yWzBdLG89clsxXSxpPXJbMl07cmV0dXJuIG5ldyBuKHMoZT0oZSt0JTM2MCszNjApJTM2MCxvLGkpLHRoaXMuX2FscGhhKX0sbi5wcm90b3R5cGUuYWRqdXN0SHVlPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLnNwaW4odCl9LG4ucHJvdG90eXBlLmNvbXBsZW1lbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zcGluKDE4MCl9LG4ucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX3JnYi5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiAyNTUtdH0pKTtyZXR1cm4gbmV3IG4oW3RbMF0sdFsxXSx0WzJdXSx0aGlzLl9hbHBoYSl9LG4ucHJvdG90eXBlLm1peD1mdW5jdGlvbih0LHIpe3JldHVybiB2b2lkIDA9PT1yJiYocj01MCksRCh0aGlzLHQsMTAwLW8ociwwLDEwMCkpfSxuLnByb3RvdHlwZS5sdW1hPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fcmdiLm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuKHQvPTI1NSk8PS4wMzkyOD90LzEyLjkyOk1hdGgucG93KCh0Ky4wNTUpLzEuMDU1LDIuNCl9KSk7cmV0dXJuLjIxMjYqdFswXSsuNzE1Mip0WzFdKy4wNzIyKnRbMl19LG4ucHJvdG90eXBlLmJyaWdodG5lc3M9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9yZ2I7cmV0dXJuIGZ1bmN0aW9uKHQscixuKXtyZXR1cm4oMjk5KnQrNTg3KnIrMTE0Km4pLzFlMy8yNTUqMTAwfSh0WzBdLHRbMV0sdFsyXSl9LG4ucHJvdG90eXBlLmRlbHRhRT1mdW5jdGlvbih0LHIsbil7cmV0dXJuIHZvaWQgMD09PXImJihyPVwiQ01DXCIpLGV0KHRoaXMsdCxyLG4pfSxuLnByb3RvdHlwZS52aXNpYmlsaXR5PWZ1bmN0aW9uKHQscil7cmV0dXJuIG90KHRoaXMsdCxyKX0sdChbcSgwLDEsITAsMCksUihcImNvbG9yOnJnYlwiKV0sbi5wcm90b3R5cGUsXCJyZ2JcIixudWxsKSx0KFtxKDAsMSwhMCwwKV0sbi5wcm90b3R5cGUsXCJyZ2JhXCIsbnVsbCksdChbcSgwLDEsITAsMCksUihcImNvbG9yOmNteWtcIildLG4ucHJvdG90eXBlLFwiY215a1wiLG51bGwpLHQoW3EoMCwxLCEwLDApLFIoXCJjb2xvcjpoc2xcIildLG4ucHJvdG90eXBlLFwiaHNsXCIsbnVsbCksdChbcSgwLDEsITAsMCldLG4ucHJvdG90eXBlLFwiaHNsYVwiLG51bGwpLHQoW3EoMCwxLCEwLDApLFIoXCJjb2xvcjpoc3ZcIildLG4ucHJvdG90eXBlLFwiaHN2XCIsbnVsbCksdChbcSgwLDEsITAsMCksUihcImNvbG9yOmhzaVwiKV0sbi5wcm90b3R5cGUsXCJoc2lcIixudWxsKSx0KFtxKDAsMSwhMCwwKSxSKFwiY29sb3I6IGh3YlwiKV0sbi5wcm90b3R5cGUsXCJod2JcIixudWxsKSx0KFtxKDIsMSwhMCwwKSxSKFwiY29sb3I6eHl6XCIpXSxuLnByb3RvdHlwZSxcInh5elwiLG51bGwpLHQoW3EoMiwxLCEwLDApLFIoXCJjb2xvcjpsYWJcIildLG4ucHJvdG90eXBlLFwibGFiXCIsbnVsbCksdChbcSgyLDEsITAsMCksUihcImNvbG9yOmxjaFwiKV0sbi5wcm90b3R5cGUsXCJsY2hcIixudWxsKSx0KFtxKDIsMSwhMCwwKSxSKFwiY29sb3I6eHlZXCIpXSxuLnByb3RvdHlwZSxcInh5WVwiLG51bGwpLHQoW1IoXCJjb2xvcjpsdW1hXCIpXSxuLnByb3RvdHlwZSxcImx1bWFcIixudWxsKSxufSgpLHN0PWZ1bmN0aW9uKHQscixuLGUpe3JldHVybiBuZXcgZnQoW3QscixuXSxlKX0sdnQ9ZnVuY3Rpb24odCxyLG4sZSl7cmV0dXJuIG5ldyBmdChzKHQscixuKSxlKX0sYnQ9ZnVuY3Rpb24odCxyLG4sZSl7cmV0dXJuIG5ldyBmdChiKHQscixuKSxlKX0seXQ9ZnVuY3Rpb24odCxyLG4sZSl7cmV0dXJuIG5ldyBmdChkKHQscixuKSxlKX0sZHQ9ZnVuY3Rpb24odCxyLG4sZSl7cmV0dXJuIG5ldyBmdCh3KHQscixuKSxlKX0sZ3Q9ZnVuY3Rpb24odCxyLG4sZSl7cmV0dXJuIG5ldyBmdChOKHQscixuKSxlKX0sd3Q9ZnVuY3Rpb24odCxyLG4sZSl7cmV0dXJuIG5ldyBmdChqKHQscixuKSxlKX0sbXQ9ZnVuY3Rpb24odCxyLG4sZSl7cmV0dXJuIG5ldyBmdChOLmFwcGx5KHZvaWQgMCxMKHQscixuKSksZSl9O2Z1bmN0aW9uIE10KHQscixuKXtyZXR1cm4gbmV3IGZ0KHQscixuKX1NdC5jb25maWc9ZnVuY3Rpb24odCl7T2JqZWN0LmFzc2lnbihwdCx0KX0sTXQucmFuZG9tPWZ1bmN0aW9uKCl7dmFyIHQ9YSgwLDI1NSkscj1hKDAsMjU1KSxuPWEoMCwyNTUpO3JldHVybiBuZXcgZnQoW3QscixuXSl9LE10LmNvbnZlcnRvcj1ZLE10LkNvbG9yPWZ0LE10LnJnYj1zdCxNdC5oc2w9dnQsTXQuaHN2PWJ0LE10LmhzaT15dCxNdC5od2I9ZHQsTXQueHl6PWd0LE10LmxhYj13dCxNdC5sY2g9bXQsTXQubWl4PUQsTXQuZGVsdGFFPWV0LE10LnV0aWxzPXtyb3VuZERlY2ltYWw6aSxyYW5kb21SYW5nZTphfSxNdC51c2VOYW1lcz1mdW5jdGlvbih0LHIpe3JldHVybiBmdW5jdGlvbih0LHIpe2lmKHZvaWQgMCE9PXImJlwiZnVuY3Rpb25cIj09dHlwZW9mIHIpe3ZhciBuPXt9O2Zvcih2YXIgZSBpbiB0KXt2YXIgbz1yKGUsdFtlXSksaT1vWzBdLGE9b1sxXTtuW2ldPWF9T2JqZWN0LmFzc2lnbihhdCxuKX1lbHNlIE9iamVjdC5hc3NpZ24oYXQsdCl9KHQsciksTXR9O2V4cG9ydHtNdCBhcyBkZWZhdWx0fTtcbiIsICJpbXBvcnQgY29sb3JzZWEgZnJvbSBcImNvbG9yc2VhXCI7XHJcbmltcG9ydCB7IEJ1dHRvbkNvbXBvbmVudCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBBbGlhc01vZGUsIERpcmVjdGlvbiB9IGZyb20gXCJzZXR0aW5nc1wiO1xyXG5pbXBvcnQgeyBnZXRGb3JlZ3JvdW5kQ29sb3IgfSBmcm9tIFwidXRpbHMvYmFzaWNVdGlsc1wiO1xyXG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tIFwidXRpbHMvRXZlbnRFbWl0dGVyXCI7XHJcblxyXG50eXBlIFBhbGV0dGVJdGVtU2V0dGluZ3MgPSB7XHJcbiAgICBhbGlhc01vZGU6IEFsaWFzTW9kZSxcclxuICAgIHN0YWJpbGl0eVdoaWxlRWRpdGluZzogYm9vbGVhbixcclxuICAgIGhlaWdodDogbnVtYmVyLFxyXG4gICAgZGlyZWN0aW9uOiBEaXJlY3Rpb24sXHJcbiAgICBob3ZlcjogYm9vbGVhbixcclxuXHQgaGlkZVRleHQ6IGJvb2xlYW4sXHJcbiAgICBhbGlhczogc3RyaW5nLFxyXG4gICAgZWRpdE1vZGU6IGJvb2xlYW4sXHJcbiAgICBjb2xvckNvdW50OiBudW1iZXIsXHJcbn1cclxuXHJcbnR5cGUgRXZlbnRNYXAgPSB7XHJcbiAgICBjbGljazogW2U6IE1vdXNlRXZlbnRdO1xyXG4gICAgdHJhc2g6IFtlOiBNb3VzZUV2ZW50XTtcclxuICAgIGFsaWFzOiBbYWxpYXM6IHN0cmluZ107XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBQYWxldHRlSXRlbSB7XHJcbiAgICBjb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xyXG4gICAgY29sb3I6IHN0cmluZztcclxuICAgIHNldHRpbmdzOiBQYWxldHRlSXRlbVNldHRpbmdzO1xyXG4gICAgcHVibGljIGVtaXR0ZXI6IEV2ZW50RW1pdHRlcjxFdmVudE1hcD5cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXI6IEhUTUxFbGVtZW50LCBjb2xvcjogc3RyaW5nLCBzZXR0aW5nczogUGFsZXR0ZUl0ZW1TZXR0aW5ncyl7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicpO1xyXG4gICAgICAgIHRoaXMuY29sb3IgPSBjb2xvci50cmltKCk7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG4gICAgICAgIHRoaXMuZW1pdHRlciA9IG5ldyBFdmVudEVtaXR0ZXI8RXZlbnRNYXA+O1xyXG5cclxuICAgICAgICB0aGlzLmxvYWQoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGxvYWQoKSB7XHJcbiAgICAgICAgY29uc3QgY3NDb2xvciA9IGNvbG9yc2VhKHRoaXMuY29sb3IpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHNldCBiYWNrZ3JvdW5kIGNvbG9yXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tcGFsZXR0ZS1iYWNrZ3JvdW5kLWNvbG9yJywgdGhpcy5jb2xvcik7XHJcbiAgICAgICAgLy8gc2V0IHdpZHRoXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoJy0tcGFsZXR0ZS1jb2x1bW4tZmxleC1iYXNpcycsICh0aGlzLnNldHRpbmdzLmhlaWdodCAvIHRoaXMuc2V0dGluZ3MuY29sb3JDb3VudCAvIDIpLnRvU3RyaW5nKCkgKyAncHgnKTtcclxuXHJcblxyXG4gICAgICAgIGNvbnN0IGluY29tcGF0aWJsZVNldHRpbmdzID0gdGhpcy5zZXR0aW5ncy5kaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Sb3c7XHJcbiAgICAgICAgLy8gQ3JlYXRlIGlmIGVkaXQgbW9kZSBpcyBhY3RpdmUgJiBpZiB0aGVyZSBhcmUgaW5jb21wYXRpYmxlU2V0dGluZ3NcclxuICAgICAgICBpZih0aGlzLnNldHRpbmdzLmVkaXRNb2RlICYmICFpbmNvbXBhdGlibGVTZXR0aW5ncykge1xyXG4gICAgICAgICAgICBuZXcgRWRpdE1vZGUodGhpcy5jb250YWluZXIsIHRoaXMuY29sb3IsIHRoaXMuc2V0dGluZ3MsIChlKSA9PiB0aGlzLmVtaXR0ZXIuZW1pdCgndHJhc2gnLCBlKSwgKGFsaWFzKSA9PiB0aGlzLmVtaXR0ZXIuZW1pdCgnYWxpYXMnLCBhbGlhcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gRGlzcGxheSBoZXggaWYgYWxpYXMgbW9kZSBpcyBzZXQgdG8gYm90aCBPUiBpZiBhbGlhcyBpcyBub3Qgc2V0XHJcbiAgICAgICAgICAgIGlmKHRoaXMuc2V0dGluZ3MuYWxpYXNNb2RlID09PSBBbGlhc01vZGUuQm90aCB8fCB0aGlzLnNldHRpbmdzLmFsaWFzID09IG51bGwgfHwgdGhpcy5zZXR0aW5ncy5hbGlhcy50cmltKCkgPT09ICcnKXtcclxuICAgICAgICAgICAgICAgIGxldCBjaGlsZFRleHQgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogdGhpcy5jb2xvci50b1VwcGVyQ2FzZSgpIH0pO1xyXG4gICAgICAgICAgICAgICAgY2hpbGRUZXh0LnN0eWxlLnNldFByb3BlcnR5KCctLXBhbGV0dGUtY29sb3InLCBnZXRGb3JlZ3JvdW5kQ29sb3IoY3NDb2xvcikpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgY2hpbGRBbGlhcyA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyB0ZXh0OiB0aGlzLnNldHRpbmdzLmFsaWFzIH0pO1xyXG4gICAgICAgICAgICBjaGlsZEFsaWFzLnN0eWxlLnNldFByb3BlcnR5KCctLXBhbGV0dGUtY29sb3InLCBnZXRGb3JlZ3JvdW5kQ29sb3IoY3NDb2xvcikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy5lbWl0dGVyLmVtaXQoJ2NsaWNrJywgZSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVtb3ZlcyBsaXN0ZW5lcnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHVubG9hZCgpIHtcclxuICAgICAgICB0aGlzLmVtaXR0ZXIuY2xlYXIoKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgRWRpdE1vZGUge1xyXG4gICAgY29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcclxuICAgIHNwYW46IEhUTUxTcGFuRWxlbWVudDtcclxuICAgIHRyYXNoOiBCdXR0b25Db21wb25lbnQ7XHJcbiAgICBzdG9yZWRBbGlhczogc3RyaW5nO1xyXG4gICAgY29sb3I6IHN0cmluZztcclxuICAgIHNldHRpbmdzOiBQYWxldHRlSXRlbVNldHRpbmdzO1xyXG4gICAgcHJpdmF0ZSBvblRyYXNoOiAoZTogTW91c2VFdmVudCkgPT4gdm9pZDtcclxuICAgIHByaXZhdGUgb25BbGlhczogKGFsaWFzOiBzdHJpbmcpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoY29sb3JDb250YWluZXI6IEhUTUxEaXZFbGVtZW50LCBjb2xvcjogc3RyaW5nLCBzZXR0aW5nczogUGFsZXR0ZUl0ZW1TZXR0aW5ncywgb25UcmFzaDogKGU6IE1vdXNlRXZlbnQpID0+IHZvaWQsIG9uQWxpYXM6IChhbGlhczogc3RyaW5nKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcclxuICAgICAgICB0aGlzLm9uVHJhc2ggPSBvblRyYXNoO1xyXG4gICAgICAgIHRoaXMub25BbGlhcyA9IG9uQWxpYXM7XHJcblxyXG4gICAgICAgIGNvbnN0IGNzQ29sb3IgPSBjb2xvcnNlYShjb2xvcik7XHJcbiAgICAgICAgY29uc3QgY29udHJhc3RDb2xvciA9IGdldEZvcmVncm91bmRDb2xvcihjc0NvbG9yKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb2xvckNvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVFbCgnZGl2JykpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENsYXNzKCdlZGl0LWNvbnRhaW5lcicpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KCctLWVkaXQtYmFja2dyb3VuZC1jb2xvcicsIGNvbG9yKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1lZGl0LWNvbG9yJywgY29udHJhc3RDb2xvcik7XHJcblxyXG4gICAgICAgIHRoaXMuc3BhbiA9IHRoaXMuY29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJyk7XHJcbiAgICAgICAgdGhpcy5zcGFuLnNldFRleHQoc2V0dGluZ3MuYWxpYXMgfHwgY29sb3IudG9VcHBlckNhc2UoKSk7XHJcbiAgICAgICAgdGhpcy5zcGFuLnN0eWxlLnNldFByb3BlcnR5KCctLWVkaXQtZm9udC1zaXplJywgYCR7dGhpcy5nZXRBZGp1c3RlZEZvbnRTaXplKHNldHRpbmdzLmNvbG9yQ291bnQpfXB4YCk7XHJcblxyXG4gICAgICAgIHRoaXMudHJhc2ggPSBuZXcgQnV0dG9uQ29tcG9uZW50KHRoaXMuY29udGFpbmVyKVxyXG4gICAgICAgICAgICAuc2V0SWNvbigndHJhc2gtMicpXHJcbiAgICAgICAgICAgIC5zZXRUb29sdGlwKCdSZW1vdmUnKVxyXG4gICAgICAgICAgICAub25DbGljaygoZSkgPT4gdGhpcy5vblRyYXNoKGUpKVxyXG4gICAgICAgIHRoaXMudHJhc2guYnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50cmFzaC5zZXRDdGEoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIHRoaXMudHJhc2guYnV0dG9uRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRyYXNoLnJlbW92ZUN0YSgpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIC8vIEZvY3VzIGNvbG9yICYgYWxsb3cgZm9yIGVkaXRpbmcgYWxpYXNcclxuICAgICAgICB0aGlzLnNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEVkaXRhYmxlKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLnNwYW4uZm9jdXMoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIFJlbW92ZSBhbGlhcyBvbiByaWdodCBjbGlja1xyXG4gICAgICAgIHRoaXMuc3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3Bhbi5zZXRUZXh0KHRoaXMuY29sb3IudG9VcHBlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuYWxpYXMgPSAnJztcclxuICAgICAgICAgICAgdGhpcy5vbkFsaWFzKHRoaXMuc2V0dGluZ3MuYWxpYXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5zcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2tleXByZXNzJywgKGUpID0+IHtcclxuICAgICAgICAgICAgaWYoZS5rZXkgPT09ICdFbnRlcicpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0QWxpYXMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RWRpdGFibGUoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAvLyBTZXQgYWxpYXMgaWYgY2hhbmdlZCAmIGRlLWZvY3VzXHJcbiAgICAgICAgdGhpcy5zcGFuLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3Vzb3V0JywgKGUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5zZXRBbGlhcygpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEVkaXRhYmxlKGZhbHNlKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuc3RvcmVkQWxpYXMgPSB0aGlzLnNwYW4uZ2V0VGV4dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEFsaWFzKCkge1xyXG4gICAgICAgIC8vIFJlc2V0IHNwYW4gdGV4dCB0byBvcmlnaW5hbCBpZiB1c2VyIGxlZnQgaXQgZW1wdHlcclxuICAgICAgICBpZih0aGlzLnNwYW4uZ2V0VGV4dCgpLnRyaW0oKSA9PT0gJycpIHRoaXMuc3Bhbi5zZXRUZXh0KHRoaXMuc3RvcmVkQWxpYXMpO1xyXG4gICAgICAgIC8vIFNldCBhbGlhcyBjb2xvciBpZiB1c2VyIG1vZGlmaWVkIHRleHRcclxuICAgICAgICBlbHNlIGlmKHRoaXMuc3Bhbi5nZXRUZXh0KCkgIT09IHRoaXMuY29sb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5hbGlhcyA9IHRoaXMuc3Bhbi5nZXRUZXh0KCk7XHJcbiAgICAgICAgICAgIHRoaXMub25BbGlhcyh0aGlzLnNldHRpbmdzLmFsaWFzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RWRpdGFibGUoZWRpdGFibGU6IGJvb2xlYW4pIHtcclxuICAgICAgICBpZihlZGl0YWJsZSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3JlZEFsaWFzID0gdGhpcy5zcGFuLmdldFRleHQoKTtcclxuICAgICAgICAgICAgdGhpcy5zcGFuLnNldFRleHQoJycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNwYW4uY29udGVudEVkaXRhYmxlID0gYCR7ZWRpdGFibGV9YDtcclxuICAgICAgICB0aGlzLnNwYW4udG9nZ2xlQ2xhc3MoJ2NvbG9yLXNwYW4tZWRpdGFibGUnLCBlZGl0YWJsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxjdWxhdGUgZm9udCBzaXplIGJhc2VkIG9uIG51bWJlciBvZiBjb2xvcnNcclxuICAgICAqL1xyXG4gICAgZ2V0QWRqdXN0ZWRGb250U2l6ZShjb2xvcnNDb3VudDogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgbWluRm9udFNpemUgPSAxMDtcclxuICAgICAgICBjb25zdCBiYXNlRm9udFNpemUgPSAxNjtcclxuICAgICAgICByZXR1cm4gTWF0aC5tYXgobWluRm9udFNpemUsIGJhc2VGb250U2l6ZSAtIGNvbG9yc0NvdW50KTtcclxuICAgIH1cclxufSIsICJleHBvcnQgdHlwZSBMaXN0ZW5lcjxUIGV4dGVuZHMgQXJyYXk8YW55Pj4gPSAoLi4uYXJnczogVCkgPT4gdm9pZDtcclxuXHJcbmV4cG9ydCBjbGFzcyBFdmVudEVtaXR0ZXI8RXZlbnRNYXAgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBBcnJheTxhbnk+Pj4ge1xyXG4gICAgcHJpdmF0ZSBldmVudExpc3RlbmVyczogeyBbSyBpbiBrZXlvZiBFdmVudE1hcF0/OiBTZXQ8TGlzdGVuZXI8RXZlbnRNYXBbS10+Pn0gPSB7fTtcclxuXHJcbiAgICBwdWJsaWMgb248SyBleHRlbmRzIGtleW9mIEV2ZW50TWFwPihldmVudE5hbWU6IEssIGxpc3RlbmVyOiBMaXN0ZW5lcjxFdmVudE1hcFtLXT4pIHtcclxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50TmFtZV0gPz8gbmV3IFNldCgpO1xyXG4gICAgICAgIGxpc3RlbmVycy5hZGQobGlzdGVuZXIpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRMaXN0ZW5lcnNbZXZlbnROYW1lXSA9IGxpc3RlbmVycztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgb2ZmPEsgZXh0ZW5kcyBrZXlvZiBFdmVudE1hcD4oZXZlbnROYW1lOiBLLCBsaXN0ZW5lcjogTGlzdGVuZXI8RXZlbnRNYXBbS10+KSB7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5ldmVudExpc3RlbmVyc1tldmVudE5hbWVdID8/IG5ldyBTZXQoKTtcclxuICAgICAgICBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgICAgICB0aGlzLmV2ZW50TGlzdGVuZXJzW2V2ZW50TmFtZV0gPSBsaXN0ZW5lcnM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGVtaXQ8SyBleHRlbmRzIGtleW9mIEV2ZW50TWFwPihldmVudE5hbWU6IEssIC4uLmFyZ3M6IEV2ZW50TWFwW0tdKSB7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5ldmVudExpc3RlbmVyc1tldmVudE5hbWVdID8/IG5ldyBTZXQoKTtcclxuICAgICAgICBmb3IoY29uc3QgbGlzdGVuZXIgb2YgbGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGxpc3RlbmVyKC4uLmFyZ3MpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudExpc3RlbmVycyA9IHt9O1xyXG4gICAgfVxyXG59IiwgImludGVyZmFjZSBSZXN1bHQge1xyXG4gICAgYmVmb3JlRWxlbWVudDogRWxlbWVudCB8IG51bGxcclxuICAgIGluc2VydGVkRWxlbWVudDogRWxlbWVudCB8IG51bGxcclxuICAgIGFmdGVyRWxlbWVudDogRWxlbWVudCB8IG51bGxcclxuICAgIG9yZGVyOiBFbGVtZW50W11cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIERyYWdEcm9wIHtcclxuXHRkcm9wem9uZXM6IEVsZW1lbnRbXTtcclxuXHRkcmFnZ2FibGVzOiBFbGVtZW50W107XHJcbiAgICByZXN1bHQ6IFJlc3VsdDtcclxuICAgIG9uRHJvcDogKGU6IERyYWdFdmVudCwgcmVzOiBSZXN1bHQpID0+IHZvaWQ7XHJcbiAgICBcclxuXHRjb25zdHJ1Y3Rvcihkcm9wem9uZXM6IEVsZW1lbnRbXSwgZHJhZ2dhYmxlczogRWxlbWVudFtdLCBvbkRyb3A6IChlOiBEcmFnRXZlbnQsIHJlczogUmVzdWx0KSA9PiB2b2lkKSB7XHJcbiAgICAgICAgdGhpcy5kcm9wem9uZXMgPSBkcm9wem9uZXM7XHJcbiAgICAgICAgdGhpcy5kcmFnZ2FibGVzID0gZHJhZ2dhYmxlcztcclxuICAgICAgICB0aGlzLnJlc3VsdCA9IHsgYmVmb3JlRWxlbWVudDogbnVsbCwgaW5zZXJ0ZWRFbGVtZW50OiBudWxsLCBhZnRlckVsZW1lbnQ6IG51bGwsIG9yZGVyOiB0aGlzLmRyYWdnYWJsZXMgfTtcclxuICAgICAgICB0aGlzLm9uRHJvcCA9IG9uRHJvcDtcclxuXHJcbiAgICAgICAgdGhpcy5sb2FkKCk7XHJcblx0fVxyXG5cclxuICAgIHByaXZhdGUgZHJhZ1N0YXJ0KGRyYWdnYWJsZTogRWxlbWVudCwgZTogRHJhZ0V2ZW50KSB7XHJcbiAgICAgICAgZHJhZ2dhYmxlLnRvZ2dsZUNsYXNzKCdpcy1kcmFnZ2luZycsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgZHJhZ092ZXIoZHJvcHpvbmU6IEVsZW1lbnQsIGU6IERyYWdFdmVudCkge1xyXG4gICAgICAgIGlmKGUuZGF0YVRyYW5zZmVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhc0VsZW1lbnQgPSBBcnJheS5mcm9tKGUuZGF0YVRyYW5zZmVyLml0ZW1zKS5zb21lKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbS5raW5kICE9PSAnZWxlbWVudCc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBSZXR1cm4gZWFybHkgaWYgZWxlbWVudCBiZWluZyBkcmFnZ2VkIGlzIG5vdCBhbiBlbGVtZW50XHJcbiAgICAgICAgICAgIGlmKGhhc0VsZW1lbnQpIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLnJlc3VsdC5iZWZvcmVFbGVtZW50ID0gdGhpcy5nZXREcmFnQmVmb3JlRWxlbWVudChlLmNsaWVudFgpO1xyXG4gICAgICAgIHRoaXMucmVzdWx0Lmluc2VydGVkRWxlbWVudCA9IHRoaXMuZ2V0RHJhZ2dpbmdFbGVtZW50KCk7XHJcbiAgICAgICAgdGhpcy5yZXN1bHQuYWZ0ZXJFbGVtZW50ID0gdGhpcy5nZXREcmFnQWZ0ZXJFbGVtZW50KGUuY2xpZW50WCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGluc2VydGVkSW5kZXggPSB0aGlzLmRyYWdnYWJsZXMuaW5kZXhPZih0aGlzLnJlc3VsdC5pbnNlcnRlZEVsZW1lbnQpO1xyXG5cclxuICAgICAgICAvLyBJZiBhdCB0aGUgZW5kIG9mIGRyYWdnYWJsZXNcclxuICAgICAgICBpZiAodGhpcy5yZXN1bHQuYWZ0ZXJFbGVtZW50ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIEFwcGVuZCBlbGVtZW50XHJcbiAgICAgICAgICAgIGRyb3B6b25lLmFwcGVuZENoaWxkKHRoaXMucmVzdWx0Lmluc2VydGVkRWxlbWVudCk7XHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBlbGVtZW50IGZyb20gb3JkZXJcclxuICAgICAgICAgICAgdGhpcy5yZXN1bHQub3JkZXIuc3BsaWNlKGluc2VydGVkSW5kZXgsIDEpO1xyXG4gICAgICAgICAgICAvLyBBZGQgdG8gZW5kIG9mIG9yZGVyXHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0Lm9yZGVyLnB1c2godGhpcy5yZXN1bHQuaW5zZXJ0ZWRFbGVtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFBsYWNlIGVsZW1lbnQgYmV0d2VlblxyXG4gICAgICAgICAgICBkcm9wem9uZS5pbnNlcnRCZWZvcmUodGhpcy5yZXN1bHQuaW5zZXJ0ZWRFbGVtZW50LCB0aGlzLnJlc3VsdC5hZnRlckVsZW1lbnQpO1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgZWxlbWVudCBmcm9tIG9yZGVyXHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0Lm9yZGVyLnNwbGljZShpbnNlcnRlZEluZGV4LCAxKTtcclxuICAgICAgICAgICAgLy8gR2V0IHRoZSBhZnRlciBpbmRleCwgcG9zdCBlbGVtZW50IHJlbW92YWxcclxuICAgICAgICAgICAgY29uc3QgYWZ0ZXJJbmRleCA9IHRoaXMuZHJhZ2dhYmxlcy5pbmRleE9mKHRoaXMucmVzdWx0LmFmdGVyRWxlbWVudCk7XHJcbiAgICAgICAgICAgIC8vIEluc2VydCB0aGUgZWxlbWVudCBiZWZvcmUgdGhlIGFmdGVyIGluZGV4XHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0Lm9yZGVyLnNwbGljZShhZnRlckluZGV4LCAwLCB0aGlzLnJlc3VsdC5pbnNlcnRlZEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGRyYWdFbmQoZHJhZ2dhYmxlOiBFbGVtZW50LCBlOiBEcmFnRXZlbnQpIHtcclxuICAgICAgICBkcmFnZ2FibGUudG9nZ2xlQ2xhc3MoJ2lzLWRyYWdnaW5nJywgZmFsc2UpO1xyXG4gICAgICAgIHRoaXMub25Ecm9wKGUsIHRoaXMucmVzdWx0KTtcclxuICAgICAgICB0aGlzLnJlc3VsdCA9IHsgYmVmb3JlRWxlbWVudDogbnVsbCwgaW5zZXJ0ZWRFbGVtZW50OiBudWxsLCBhZnRlckVsZW1lbnQ6IG51bGwsIG9yZGVyOiB0aGlzLmRyYWdnYWJsZXMgfTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgbG9hZCgpIHtcclxuICAgICAgICBmb3IobGV0IGRyYWdnYWJsZSBvZiB0aGlzLmRyYWdnYWJsZXMpIHtcclxuICAgICAgICAgICAgLy8gSW1wb3J0YW50LCBzbyB0aGF0IGFsbCB0eXBlcyBvZiBlbGVtZW50cyBjYW4gYmUgZHJhZ2dlZCwgaW5jbHVkaW5nIGRpdnMgJiBzcGFuc1xyXG4gICAgICAgICAgICBkcmFnZ2FibGUuc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCBcInRydWVcIik7XHJcblxyXG4gICAgICAgICAgICBkcmFnZ2FibGUuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCAoZTogRHJhZ0V2ZW50KSA9PiB0aGlzLmRyYWdTdGFydChkcmFnZ2FibGUsIGUpKTtcclxuICAgICAgICAgICAgZHJhZ2dhYmxlLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW5kXCIsIChlOiBEcmFnRXZlbnQpID0+IHRoaXMuZHJhZ0VuZChkcmFnZ2FibGUsIGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvcihsZXQgZHJvcHpvbmUgb2YgdGhpcy5kcm9wem9uZXMpIHtcclxuICAgICAgICAgICAgZHJvcHpvbmUuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIChlOiBEcmFnRXZlbnQpID0+IHRoaXMuZHJhZ092ZXIoZHJvcHpvbmUsIGUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVubG9hZCgpIHtcclxuICAgICAgICBmb3IobGV0IGRyYWdnYWJsZSBvZiB0aGlzLmRyYWdnYWJsZXMpIHtcclxuICAgICAgICAgICAgZHJhZ2dhYmxlLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2RyYWdzdGFydCcsIChlOiBEcmFnRXZlbnQpID0+IHRoaXMuZHJhZ1N0YXJ0KGRyYWdnYWJsZSwgZSkpO1xyXG4gICAgICAgICAgICBkcmFnZ2FibGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ2VuZCcsIChlOiBEcmFnRXZlbnQpID0+IHRoaXMuZHJhZ0VuZChkcmFnZ2FibGUsIGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvcihsZXQgZHJvcHpvbmUgb2YgdGhpcy5kcm9wem9uZXMpIHtcclxuICAgICAgICAgICAgZHJvcHpvbmUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZHJhZ292ZXInLCAoZTogRHJhZ0V2ZW50KSA9PiB0aGlzLmRyYWdPdmVyKGRyb3B6b25lLCBlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHJldHVybnMgVGhlIGVsZW1lbnQgd2hpY2ggaXMgYmVpbmcgZHJhZ2dlZFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0RHJhZ2dpbmdFbGVtZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRyYWdnYWJsZXMuZmlsdGVyKChkcmFnZ2FibGUpID0+IGRyYWdnYWJsZS5oYXNDbGFzcygnaXMtZHJhZ2dpbmcnKSlbMF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBAcmV0dXJucyBBbGwgZHJhZ2dhYmxlIGVsZW1lbnRzIG5vdCBiZWluZyBkcmFnZ2VkXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXREcmFnZ2FibGVFbGVtZW50cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5kcmFnZ2FibGVzLmZpbHRlcigoZHJhZ2dhYmxlKSA9PiAhZHJhZ2dhYmxlLmhhc0NsYXNzKCdpcy1kcmFnZ2luZycpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIGNsb3Nlc3QgZWxlbWVudCBiZWZvcmUgdGhlIGRyYWdnZWQgZWxlbWVudFxyXG4gICAgICovXHJcblx0cHJpdmF0ZSBnZXREcmFnQmVmb3JlRWxlbWVudCh4OiBudW1iZXIpIHtcclxuXHRcdHJldHVybiB0aGlzLmdldERyYWdnYWJsZUVsZW1lbnRzKCkucmVkdWNlKChjbG9zZXN0LCBjaGlsZCkgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHJlY3QgPSBjaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxlZnRQb3NpdGlvbiA9IHggLSByZWN0LmxlZnQ7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoYWxmQ2hpbGRXaWR0aCA9IHJlY3Qud2lkdGggLyAyO1xyXG5cclxuXHRcdFx0XHRjb25zdCBvZmZzZXQgPSBsZWZ0UG9zaXRpb24gLSBoYWxmQ2hpbGRXaWR0aDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSZXR1cm4gdGhlIGNsb3Nlc3QgZWxlbWVudCB0byB0aGUgcmlnaHQgb2YgdGhlIGN1cnNvclxyXG5cdFx0XHRcdGlmIChvZmZzZXQgPiAwICYmIG9mZnNldCA8IGNsb3Nlc3Qub2Zmc2V0KSByZXR1cm4geyBvZmZzZXQsIGVsZW1lbnQ6IGNoaWxkIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIGNsb3Nlc3Q7XHJcbiAgICAgICAgICAgIH0sIFxyXG4gICAgICAgICAgICAvLyBJbml0aWFsIGNsb3Nlc3QgdmFsdWVcclxuICAgICAgICAgICAgeyBvZmZzZXQ6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgZWxlbWVudDogbnVsbCB9XHJcbiAgICAgICAgKVxyXG4gICAgICAgIC5lbGVtZW50O1xyXG5cdH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIGNsb3Nlc3QgZWxlbWVudCBhZnRlciB0aGUgZHJhZ2dlZCBlbGVtZW50XHJcbiAgICAgKi9cclxuXHRwcml2YXRlIGdldERyYWdBZnRlckVsZW1lbnQoeDogbnVtYmVyKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5nZXREcmFnZ2FibGVFbGVtZW50cygpLnJlZHVjZSgoY2xvc2VzdCwgY2hpbGQpID0+IHtcclxuXHRcdFx0XHRjb25zdCByZWN0ID0gY2hpbGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsZWZ0UG9zaXRpb24gPSB4IC0gcmVjdC5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGFsZkNoaWxkV2lkdGggPSByZWN0LndpZHRoIC8gMjtcclxuXHJcblx0XHRcdFx0Y29uc3Qgb2Zmc2V0ID0gbGVmdFBvc2l0aW9uIC0gaGFsZkNoaWxkV2lkdGg7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBjbG9zZXN0IGVsZW1lbnQgdG8gdGhlIGxlZnQgb2YgdGhlIGN1cnNvclxyXG5cdFx0XHRcdGlmIChvZmZzZXQgPCAwICYmIG9mZnNldCA+IGNsb3Nlc3Qub2Zmc2V0KSByZXR1cm4geyBvZmZzZXQsIGVsZW1lbnQ6IGNoaWxkIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgcmV0dXJuIGNsb3Nlc3Q7XHJcbiAgICAgICAgICAgIH0sIFxyXG4gICAgICAgICAgICAvLyBJbml0aWFsIGNsb3Nlc3QgdmFsdWVcclxuICAgICAgICAgICAgeyBvZmZzZXQ6IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgZWxlbWVudDogbnVsbCB9XHJcbiAgICAgICAgKVxyXG4gICAgICAgIC5lbGVtZW50O1xyXG5cdH1cclxufVxyXG4iLCAiaW1wb3J0IHsgRGlyZWN0aW9uIH0gZnJvbSBcInNldHRpbmdzXCI7XHJcbmltcG9ydCBjb2xvcnNlYSBmcm9tIFwiY29sb3JzZWFcIjtcclxuaW1wb3J0IHZhbGlkYXRlQ29sb3IgZnJvbSBcInZhbGlkYXRlLWNvbG9yXCI7XHJcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gXCIuL0V2ZW50RW1pdHRlclwiO1xyXG5cclxudHlwZSBFdmVudE1hcCA9IHtcclxuICAgIGNsaWNrOiBbaGV4OiBzdHJpbmddLFxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FudmFzIHtcclxuICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgICBjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xyXG4gICAgdG9vbHRpcDogSFRNTEVsZW1lbnQ7XHJcbiAgICB0b29sdGlwVGV4dDogSFRNTFNwYW5FbGVtZW50O1xyXG4gICAgY29udGV4dDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xyXG4gICAgZW1pdHRlcjogRXZlbnRFbWl0dGVyPEV2ZW50TWFwPjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3MoJ3BhbGV0dGUtY2FudmFzJyk7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjb250YWluZXIuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJykpO1xyXG4gICAgICAgIHRoaXMudG9vbHRpcCA9IGNvbnRhaW5lci5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWN0aW9uJykpO1xyXG4gICAgICAgIC8vIHRvb2x0aXAgaXMgYW4gT2JzaWRpYW4gY2xhc3NcclxuICAgICAgICB0aGlzLnRvb2x0aXAuYWRkQ2xhc3NlcyhbJ3Rvb2x0aXAnLCAncGFsZXR0ZS10b29sdGlwJ10pO1xyXG4gICAgICAgIHRoaXMudG9vbHRpcFRleHQgPSB0aGlzLnRvb2x0aXAuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpKTtcclxuICAgICAgICAvLyBOb24tbnVsbCBhc3NlcnRlZCBjb250ZXh0XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnLCB7d2lsbFJlYWRGcmVxdWVudGx5OiB0cnVlLCBhbHBoYTogdHJ1ZX0pITtcclxuICAgICAgICB0aGlzLmVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPEV2ZW50TWFwPigpO1xyXG5cclxuICAgICAgICAvLyBDaGVjayBpZiB0b3VjaCBkZXZpY2UgJiBhZGQgdGhlIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBlbGVtZW50IHRvIHRyYWNrIHBvc2l0aW9uIGZvciB0aGUgdG9vbHRpcFxyXG4gICAgICAgIGlmKCF0aGlzLmlzVG91Y2hFbmFibGVkKCkpIHRoaXMuY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgKGUpID0+IHRoaXMuc2V0VG9vbHRpcFBvc2l0aW9uKGUuY2xpZW50WCwgZS5jbGllbnRZKSk7XHJcbiAgICAgICAgZWxzZSB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsIChlKSA9PiB0aGlzLnNldFRvb2x0aXBQb3NpdGlvbihlLnRvdWNoZXNbMF0uY2xpZW50WCwgZS50b3VjaGVzWzBdLmNsaWVudFkpKTtcclxuXHJcbiAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gdGhpcy5lbWl0dGVyLmVtaXQoJ2NsaWNrJywgdGhpcy5nZXRDYW52YXNIZXgoZS5jbGllbnRYLCBlLmNsaWVudFkpKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGdyYWRpZW50IGNhbnZhc1xyXG4gICAgICogQHBhcmFtIGNvbG9ycyBcclxuICAgICAqIEBwYXJhbSB3aWR0aCBcclxuICAgICAqIEBwYXJhbSBoZWlnaHQgXHJcbiAgICAgKiBAcGFyYW0gZGlyZWN0aW9uXHJcbiAgICAgKiBAcGFyYW0gb25DbGljayBjYW52YXMgY2xpY2sgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgcHVibGljIGNyZWF0ZUdyYWRpZW50KGNvbG9yczogc3RyaW5nW10sIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyLCBkaXJlY3Rpb246IERpcmVjdGlvbikge1xyXG4gICAgICAgIHRoaXMuY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG5cclxuICAgICAgICBsZXQgZ3JhZGllbnQgPSBkaXJlY3Rpb24gPT09IERpcmVjdGlvbi5Db2x1bW4gPyB0aGlzLmNvbnRleHQuY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgMCwgd2lkdGgsIDApIDogdGhpcy5jb250ZXh0LmNyZWF0ZUxpbmVhckdyYWRpZW50KDAsIDAsIDAsIGhlaWdodCk7XHJcblxyXG4gICAgICAgIGxldCBjb2xvclN0b3BzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgIGZvcihjb25zdFtpLCBjb2xvcl0gb2YgY29sb3JzLmVudHJpZXMoKSl7XHJcbiAgICAgICAgICAgIC8vIFNraXAgbm9uLWNvbG9ycywgZXZlbiB3aXRoIG92ZXJyaWRlIGVuYWJsZWQuIFRoaXMgcHJldmVudHMgZXJyb3JzLCBlc3BlY2lhbGx5IGRlYWxpbmcgd2l0aCBjc3MtdmFyaWFibGVzIHdoaWNoIGNhbm5vdCBiZSBwYXJzZWQgYXQgcnVuLXRpbWUuXHJcbiAgICAgICAgICAgIGlmKHZhbGlkYXRlQ29sb3IoY29sb3IpKSB7XHJcbiAgICAgICAgICAgICAgICBncmFkaWVudC5hZGRDb2xvclN0b3AoaSAvIChjb2xvcnMubGVuZ3RoIC0gMSksIGNvbG9yKTtcclxuICAgICAgICAgICAgICAgIGNvbG9yU3RvcHMucHVzaChjb2xvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKGNvbG9yU3RvcHMubGVuZ3RoIDw9IDEpIHRocm93IG5ldyBFcnJvcignVGhlcmUgYXJlIG5vdCBlbm91Z2ggdmFsaWQgY29sb3Igc3RvcHMgdG8gY3JlYXRlIHRoZSBncmFkaWVudC4nKTtcclxuXHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGxTdHlsZSA9IGdyYWRpZW50IHx8ICcjMDAwJztcclxuICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcblxyXG4gICAgICAgIHRoaXMuY2FudmFzLnRvZ2dsZUNsYXNzKCdncmFkaWVudCcsIHRydWUpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLnN0eWxlLnNldFByb3BlcnR5KCctLXBhbGV0dGUtY29sdW1uLWZsZXgtYmFzaXMnLCAoaGVpZ2h0IC8gY29sb3JzLmxlbmd0aCAvIDIpLnRvU3RyaW5nKCkgKyAncHgnKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXRyaWV2ZXMgdGhlIGhleCBmcm9tIHRoZSBtb3VzZSBwb3NpdGlvblxyXG4gICAgcHVibGljIGdldENhbnZhc0hleChjbGllbnRYOiBudW1iZXIsIGNsaWVudFk6IG51bWJlcikge1xyXG4gICAgICAgIGNvbnN0IGNhbnZhc0JvdW5kcyA9IHRoaXMuY2FudmFzLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgIGxldCB4ID0gY2xpZW50WCAtIGNhbnZhc0JvdW5kcy5sZWZ0O1xyXG4gICAgICAgIGxldCB5ID0gY2xpZW50WSAtIGNhbnZhc0JvdW5kcy50b3A7XHJcbiAgICAgICAgbGV0IFtyLCBnLCBiLCBhXSA9IHRoaXMuY29udGV4dC5nZXRJbWFnZURhdGEoeCwgeSwgMSwgMSkuZGF0YTtcclxuICAgICAgICAvLyBDb252ZXJ0IGFscGhhIGZyb20gMC0yNTUgdG8gMC0xXHJcbiAgICAgICAgY29uc3QgYWxwaGEgPSBNYXRoLnJvdW5kKChhLzI1NSkgKiAxMDApO1xyXG4gICAgICAgIC8vIEhpZGUgYWxwaGEgdmFsdWUgaWYgbm90IGFuIGFscGhhIGNvbG9yXHJcbiAgICAgICAgbGV0IGhleCA9IGFscGhhICE9PSAyNTUgPyBjb2xvcnNlYShbciwgZywgYiwgYWxwaGFdKS5oZXgoKSA6IGNvbG9yc2VhKFtyLCBnLCBiXSkuaGV4KCk7XHJcbiAgICAgICAgcmV0dXJuIGhleDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHRvb2x0aXAgcG9zaXRpb24gYmFzZWQgb24gY3VycmVudCBjdXJzb3Igb3IgdG91Y2ggcG9zaXRpb25cclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldFRvb2x0aXBQb3NpdGlvbihjbGllbnRYOiBudW1iZXIsIGNsaWVudFk6IG51bWJlcikge1xyXG4gICAgICAgIC8vIENhbnZhcyBib3VuZHNcclxuICAgICAgICBjb25zdCByZWN0ID0gdGhpcy5jYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgIC8vIEdldCB0b29sdGlwIGJvdW5kc1xyXG4gICAgICAgIGxldCB0b29sdGlwV2lkdGggPSB0aGlzLnRvb2x0aXAub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgbGV0IHRvb2x0aXBIZWlnaHQgPSB0aGlzLnRvb2x0aXAub2Zmc2V0SGVpZ2h0O1xyXG5cclxuICAgICAgICAvLyBTZXQgdG9vbHRpcCBwb3NpdGlvbiBsZWZ0IG9yIHJpZ2h0IHNpZGUgb2YgbW91c2UgYmFzZWQgb24gd2hldGhlciBjdXJzb3IgaXMgaGFsZndheVxyXG4gICAgICAgIGxldCBsZWZ0UG9zaXRpb24gPSBjbGllbnRYIC0gcmVjdC5sZWZ0ID4gcmVjdC53aWR0aCAvIDIgPyAoY2xpZW50WCAtIHJlY3QubGVmdCAtIDU2KSA6IChjbGllbnRYIC0gcmVjdC5sZWZ0ICsgNjQpO1xyXG4gICAgICAgIGxldCBoYWxmVG9vbHRpcFdpZHRoID0gdG9vbHRpcFdpZHRoIC8gMjtcclxuICAgICAgICAvLyBDbGFtcCB0byBsZWZ0IGVkZ2VcclxuICAgICAgICBpZiAobGVmdFBvc2l0aW9uIDwgMCArIGhhbGZUb29sdGlwV2lkdGgpIGxlZnRQb3NpdGlvbiA9IDAgKyBoYWxmVG9vbHRpcFdpZHRoO1xyXG4gICAgICAgIGVsc2UgaWYgKGxlZnRQb3NpdGlvbiArIHRvb2x0aXBXaWR0aCA+IHJlY3Qud2lkdGggKyBoYWxmVG9vbHRpcFdpZHRoKSBsZWZ0UG9zaXRpb24gPSByZWN0LndpZHRoIC0gdG9vbHRpcFdpZHRoICsgaGFsZlRvb2x0aXBXaWR0aDtcclxuICAgICAgICB0aGlzLnRvb2x0aXAuc3R5bGUubGVmdCA9IGxlZnRQb3NpdGlvbiArIFwicHhcIjtcclxuXHJcbiAgICAgICAgLy8gR2V0IGN1cnNvciBwb3NpdGlvbiAmIGFsaWduIHRvb2x0aXAgY2VudGVyZWQgdG8gY3Vyc29yICgxLzQgdG9vbHRpcCBoZWlnaHQpXHJcbiAgICAgICAgbGV0IHRvcFBvc2l0aW9uID0gY2xpZW50WSAtIHJlY3QudG9wIC0gKHRvb2x0aXBIZWlnaHQgLyA0KTtcclxuICAgICAgICAvLyBDbGFtcCB0byB0b3AgZWRnZVxyXG4gICAgICAgIGlmICh0b3BQb3NpdGlvbiA8IDApIHRvcFBvc2l0aW9uID0gMDtcclxuICAgICAgICAvLyBDbGFtcCB0byBib3R0b20gZWRnZVxyXG4gICAgICAgIGVsc2UgaWYgKHRvcFBvc2l0aW9uICsgdG9vbHRpcEhlaWdodCA+IHJlY3QuaGVpZ2h0KSB0b3BQb3NpdGlvbiA9IHJlY3QuaGVpZ2h0IC0gdG9vbHRpcEhlaWdodDtcclxuICAgICAgICB0aGlzLnRvb2x0aXAuc3R5bGUudG9wID0gdG9wUG9zaXRpb24gKyBcInB4XCI7XHJcblxyXG4gICAgICAgIGNvbnN0IGhleCA9IHRoaXMuZ2V0Q2FudmFzSGV4KGNsaWVudFgsIGNsaWVudFkpO1xyXG4gICAgICAgIHRoaXMudG9vbHRpcFRleHQuc2V0VGV4dChoZXgudG9VcHBlckNhc2UoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDaGVja3MgZm9yIHRvdWNoIGRldmljZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgaXNUb3VjaEVuYWJsZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuICggJ29udG91Y2hzdGFydCcgaW4gd2luZG93ICkgfHwgKCBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAwICk7XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCBjb2xvcnNlYSBmcm9tIFwiY29sb3JzZWFcIjtcclxuaW1wb3J0IHsgUGFsZXR0ZVNldHRpbmdzIH0gZnJvbSBcImNvbXBvbmVudHMvUGFsZXR0ZVwiO1xyXG5cclxuZXhwb3J0IGVudW0gQ29tYmluYXRpb24ge1xyXG4gICAgQ29tcGxpbWVudGFyeSA9IFwiQ29tcGxpbWVudGFyeVwiLFxyXG4gICAgTW9ub2Nocm9tYXRpYyA9IFwiTW9ub2Nocm9tYXRpY1wiLFxyXG4gICAgQW5hbG9nb3VzID0gXCJBbmFsb2dvdXNcIixcclxuICAgIFRyaWFkaWMgPSBcIlRyaWFkaWNcIixcclxuICAgIFRldHJhZGljID0gXCJUZXRyYWRpY1wiLFxyXG4gICAgUmFuZG9tID0gXCJSYW5kb21cIlxyXG59XHJcblxyXG50eXBlIE9wdGlvbmFsUGFyYW1zID0ge1xyXG4gICAgYmFzZUNvbG9yPzogUmV0dXJuVHlwZTx0eXBlb2YgY29sb3JzZWE+XHJcbiAgICBzZXR0aW5ncz86IFBhbGV0dGVTZXR0aW5nc1xyXG59XHJcblxyXG4vKipcclxuICogR2VuZXJhdGUgY29sb3JzIGJhc2VkIG9uIGNvbG9yIHRoZW9yeVxyXG4gKiBAcGFyYW0gYmFzZUNvbG9yIEluaXRpYWwgY29sb3IgdG8gZ2VuZXJhdGUgdGhlIHJlc3QgZnJvbVxyXG4gKiBAcGFyYW0gY29tYmluYXRpb24gVGhlIHR5cGUgb2YgY29sb3IgdGhlb3J5IGNvbWJpbmF0aW9uIHRvIHVzZVxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgVGhlIHNldHRpbmdzIGZvciB0aGUgcGFsZXR0ZVxyXG4gKiBAcmV0dXJucyBHZW5lcmF0ZWQgY29sb3JzICYgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUNvbG9ycyhjb21iaW5hdGlvbjogQ29tYmluYXRpb24sIG9wdGlvbmFsOiBPcHRpb25hbFBhcmFtcyA9IHsgYmFzZUNvbG9yOiBjb2xvcnNlYS5yYW5kb20oKSB9KSB7XHJcbiAgICBsZXQgeyBiYXNlQ29sb3IsIHNldHRpbmdzIH0gPSBvcHRpb25hbDtcclxuICAgIC8vIE5ldmVyIGNhbGxlZCBiZWNhdXNlIGJhc2VDb2xvciBpcyBzZXQgYnkgZGVmYXVsdCBpbiBwYXJhbWV0ZXJzXHJcbiAgICBpZighYmFzZUNvbG9yKSBiYXNlQ29sb3IgPSBjb2xvcnNlYS5yYW5kb20oKTtcclxuICAgIGxldCBjb2xvcnM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgc3dpdGNoKGNvbWJpbmF0aW9uKSB7XHJcbiAgICAgICAgY2FzZSBDb21iaW5hdGlvbi5Db21wbGltZW50YXJ5OlxyXG4gICAgICAgICAgICBjb2xvcnMgPSBbYmFzZUNvbG9yLmhleCgpLCBiYXNlQ29sb3IuY29tcGxlbWVudCgpLmhleCgpXTtcclxuICAgICAgICAgICAgaWYoc2V0dGluZ3MpIHNldHRpbmdzLmFsaWFzZXMgPSBbJ0Jhc2UnLCAnQ29tcGxpbWVudGFyeSBDb2xvciddO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIENvbWJpbmF0aW9uLk1vbm9jaHJvbWF0aWM6XHJcbiAgICAgICAgICAgIGNvbnN0IGxpZ2h0ZXN0ID0gYmFzZUNvbG9yLmxpZ2h0ZW4oMjApO1xyXG4gICAgICAgICAgICBjb25zdCBsaWdodGVyID0gYmFzZUNvbG9yLmxpZ2h0ZW4oMTApO1xyXG4gICAgICAgICAgICBjb25zdCBkYXJrZXIgPSBiYXNlQ29sb3IuZGFya2VuKDEwKTtcclxuICAgICAgICAgICAgY29uc3QgZGFya2VzdCA9IGJhc2VDb2xvci5kYXJrZW4oMjApO1xyXG4gICAgICAgICAgICBjb2xvcnMgPSBbbGlnaHRlc3QuaGV4KCksIGxpZ2h0ZXIuaGV4KCksIGJhc2VDb2xvci5oZXgoKSwgZGFya2VyLmhleCgpLCBkYXJrZXN0LmhleCgpXTtcclxuICAgICAgICAgICAgaWYoc2V0dGluZ3MpIHNldHRpbmdzLmFsaWFzZXMgPSBbJ0xpZ2h0ZXN0JywgJ0xpZ2h0ZXInLCAnQmFzZScsICdEYXJrZXInLCAnRGFya2VzdCddO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIENvbWJpbmF0aW9uLkFuYWxvZ291czpcclxuICAgICAgICAgICAgY29uc3QgZWFzdCA9IGJhc2VDb2xvci5hZGp1c3RIdWUoLTI1KTtcclxuICAgICAgICAgICAgY29uc3Qgd2VzdCA9IGJhc2VDb2xvci5hZGp1c3RIdWUoMjUpO1xyXG4gICAgICAgICAgICBjb2xvcnMgPSBbZWFzdC5oZXgoKSwgYmFzZUNvbG9yLmhleCgpLCB3ZXN0LmhleCgpXTtcclxuICAgICAgICAgICAgaWYoc2V0dGluZ3MpIHNldHRpbmdzLmFsaWFzZXMgPSBbJ0FuYWxvZ291cyBFYXN0JywgJ0Jhc2UnLCAnQW5hbG9nb3VzIFdlc3QnXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBDb21iaW5hdGlvbi5UcmlhZGljOlxyXG4gICAgICAgICAgICBjb25zdCBoZXgxMjAgPSBiYXNlQ29sb3Iuc3BpbigxMjApO1xyXG4gICAgICAgICAgICBjb25zdCBoZXgyNDAgPSBiYXNlQ29sb3Iuc3BpbigyNDApO1xyXG4gICAgICAgICAgICBjb2xvcnMgPSBbYmFzZUNvbG9yLmhleCgpLCBoZXgxMjAuaGV4KCksIGhleDI0MC5oZXgoKV07XHJcbiAgICAgICAgICAgIGlmKHNldHRpbmdzKSBzZXR0aW5ncy5hbGlhc2VzID0gWydUcmlhZGljIEZpcnN0JywgJ0Jhc2UnLCAnVHJpYWRpYyBUaGlyZCddO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIENvbWJpbmF0aW9uLlRldHJhZGljOlxyXG4gICAgICAgICAgICBjb25zdCBoZXg5MCA9IGJhc2VDb2xvci5zcGluKDkwKTtcclxuICAgICAgICAgICAgY29uc3QgaGV4MTgwID0gYmFzZUNvbG9yLnNwaW4oMTgwKTtcclxuICAgICAgICAgICAgY29uc3QgaGV4MjcwID0gYmFzZUNvbG9yLnNwaW4oMjcwKTtcclxuICAgICAgICAgICAgY29sb3JzID0gW2Jhc2VDb2xvci5oZXgoKSwgaGV4OTAuaGV4KCksIGhleDE4MC5oZXgoKSwgaGV4MjcwLmhleCgpXTtcclxuICAgICAgICAgICAgaWYoc2V0dGluZ3MpIHNldHRpbmdzLmFsaWFzZXMgPSBbJ0Jhc2UnLCAnVGV0cmFkaWMgU2Vjb25kJywgJ1RldHJhZGljIFRoaXJkJywgJ1RldHJhZGljIEZvdXJ0aCddO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIENvbWJpbmF0aW9uLlJhbmRvbTpcclxuICAgICAgICAgICAgLy8gQ2xhbXAgdG8gYSBtaW5pbXVtIHZhbHVlIG9mIDJcclxuICAgICAgICAgICAgY29uc3QgcmFuZG9tTnVtYmVyID0gTWF0aC5tYXgoTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTApLCAyKTtcclxuICAgICAgICAgICAgbGV0IHJhbmRvbUNvbG9yczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHJhbmRvbU51bWJlcjsgaSsrKXtcclxuICAgICAgICAgICAgICAgIHJhbmRvbUNvbG9ycy5wdXNoKGNvbG9yc2VhLnJhbmRvbSgpLmhleCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb2xvcnMgPSByYW5kb21Db2xvcnM7XHJcbiAgICAgICAgICAgIGlmKHNldHRpbmdzKSBzZXR0aW5ncy5hbGlhc2VzID0gW107XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB7IGNvbG9ycywgc2V0dGluZ3MgfTtcclxufSIsICJpbXBvcnQgcXVhbnRpemUsIHsgUmdiUGl4ZWwgfSBmcm9tIFwicXVhbnRpemVcIjtcclxuaW1wb3J0IHsgQ2FudmFzIH0gZnJvbSBcIi4vY2FudmFzVXRpbHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbnZhc0ltYWdlIGV4dGVuZHMgQ2FudmFzIHtcclxuICAgIGltYWdlOiBIVE1MSW1hZ2VFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBsb2FkaW5nOiBib29sZWFuO1xyXG4gICAgd2lkdGg6IG51bWJlcjtcclxuICAgIGhlaWdodDogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGltYWdlVVJMPzogc3RyaW5nLCBzbW9vdGhpbmcgPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKGNvbnRhaW5lcik7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuYWRkQ2xhc3MoJ2ltYWdlJyk7XHJcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmltYWdlID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgLy8gQWxsb3dzIENPUlMgcmVxdWVzdHMgZm9yIGltYWdlcyBmcm9tIGRpZmZlcmVudCBkb21haW5zXHJcbiAgICAgICAgdGhpcy5pbWFnZS5jcm9zc09yaWdpbiA9ICdhbm9ueW1vdXMnO1xyXG4gICAgICAgIGlmKGltYWdlVVJMKSB0aGlzLmltYWdlLnNyYyA9IGltYWdlVVJMO1xyXG4gICAgICAgIHRoaXMuaW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIChlKSA9PiB0aGlzLmxvYWRpbmcgPSBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5pbWFnZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIFVSTCBwcm92aWRlZCBjb3VsZCBub3QgYmUgbG9hZGVkLicpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHNtb290aGluZztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgJiBsb2FkcyB0aGUgY2FudmFzIGltYWdlLlxyXG4gICAgICogQXR0ZW1wdHMgdG8gcHJlc2VydmUgYXNwZWN0IHJhdGlvIGJhc2VkIG9uIHdpZHRoLlxyXG4gICAgICogQHBhcmFtIHdpZHRoIFRoZSBjYW52YXMgd2lkdGhcclxuICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGNhbnZhcyBoZWlnaHRcclxuICAgICAqL1xyXG4gICAgcHVibGljIHVwZGF0ZShpbWFnZVVSTDogc3RyaW5nLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xyXG4gICAgICAgIC8vIFNldCBVUkxcclxuICAgICAgICB0aGlzLmltYWdlLnNyYyA9IGltYWdlVVJMO1xyXG5cclxuICAgICAgICAvLyBXYWl0IGZvciBpbWFnZSB0byBsb2FkIGJlZm9yZSBjYWxjdWxhdGluZyBkaW1lbnNpb25zICYgZHJhd2luZyBpbWFnZSB0byBjYW52YXNcclxuICAgICAgICB0aGlzLndhaXRGb3JMb2FkaW5nKCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgbmV3IGhlaWdodCBiYXNlZCBvbiB0aGUgYXNwZWN0IHJhdGlvXHJcbiAgICAgICAgICAgIGNvbnN0IGFzcGVjdFJhdGlvID0gdGhpcy5pbWFnZS5uYXR1cmFsSGVpZ2h0IC8gdGhpcy5pbWFnZS5uYXR1cmFsV2lkdGg7XHJcblxyXG4gICAgICAgICAgICBsZXQgbmV3V2lkdGggPSB3aWR0aDtcclxuICAgICAgICAgICAgbGV0IG5ld0hlaWdodCA9IG5ld1dpZHRoICogYXNwZWN0UmF0aW87XHJcblxyXG4gICAgICAgICAgICAvLyBFbnN1cmUgdGhlIG5ldyBoZWlnaHQgZml0cyB3aXRoaW4gdGhlIGNhbnZhcyBoZWlnaHRcclxuICAgICAgICAgICAgaWYgKG5ld0hlaWdodCA+IGhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWRqdXN0IHdpZHRoIGlmIGhlaWdodCBleGNlZWRzIGNhbnZhcyBoZWlnaHRcclxuICAgICAgICAgICAgICAgIG5ld1dpZHRoID0gaGVpZ2h0IC8gYXNwZWN0UmF0aW87XHJcbiAgICAgICAgICAgICAgICBuZXdIZWlnaHQgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMud2lkdGggPSB0aGlzLmNhbnZhcy53aWR0aCA9IG5ld1dpZHRoO1xyXG4gICAgICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuY2FudmFzLmhlaWdodCA9IG5ld0hlaWdodDtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmRyYXdJbWFnZSh0aGlzLmltYWdlLCAwLCAwLCBuZXdXaWR0aCwgbmV3SGVpZ2h0KTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgbW9zdCBmcmVxdWVudCBjb2xvcnMgaW4gYW4gaW1hZ2VcclxuICAgICAqIEBwYXJhbSBudW1Db2xvcnMgTnVtYmVyIG9mIGNvbG9ycyB0byByZXR1cm5cclxuICAgICAqIEBwYXJhbSBxdWFsaXR5IEFydGlmaWNpYWxseSByZWR1Y2UgbnVtYmVyIG9mIHBpeGVscyAoaGlnaGVyID0gbGVzcyBhY2N1cmF0ZSBidXQgZmFzdGVyKVxyXG4gICAgICogQHJldHVybnMgTW9zdCBmcmVxdWVudCBjb2xvcnNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGdldFBhbGV0dGUobnVtQ29sb3JzID0gNywgcXVhbGl0eSA9IDEwKSB7XHJcbiAgICAgICAgLypcclxuICAgICAgICBRdWFudGl6ZSBoYXMgYW4gaXNzdWUgd2l0aCBudW1iZXIgb2YgY29sb3JzIHdoaWNoIGhhcyBiZWVuIGFkZHJlc3NlZCBoZXJlIGh0dHBzOi8vZ2l0aHViLmNvbS9vbGl2aWVybGVzbmlja2kvcXVhbnRpemUvaXNzdWVzLzlcclxuICAgICAgICBgbkNvbG9yc2AgaXMgYSBzaW1wbGUgZml4IGZvciB0aGlzLlxyXG4gICAgICAgICovXHJcbiAgICAgICAgY29uc3QgbkNvbG9ycyA9IG51bUNvbG9ycyA8PSA3ID8gbnVtQ29sb3JzIDogbnVtQ29sb3JzICsgMTtcclxuXHJcbiAgICAgICAgLy8gV2FpdCBmb3IgaW1hZ2UgdG8gbG9hZFxyXG4gICAgICAgIGF3YWl0IHRoaXMud2FpdEZvckxvYWRpbmcoKTtcclxuXHJcbiAgICAgICAgLy8gR2V0IGFuIGFycmF5IG9mIHBpeGVsc1xyXG4gICAgICAgIGNvbnN0IHBpeGVscyA9IGF3YWl0IHRoaXMuY3JlYXRlUGl4ZWxBcnJheShxdWFsaXR5KTtcclxuICAgICAgICBpZighcGl4ZWxzKSByZXR1cm4gbnVsbDtcclxuXHJcbiAgICAgICAgLy8gUmVkdWNlIHBpeGVscyBhcnJheSB0byBhIHNtYWxsIG51bWJlciBvZiB0aGUgbW9zdCBjb21tb24gY29sb3JzXHJcbiAgICAgICAgY29uc3QgY29sb3JNYXAgPSBxdWFudGl6ZShwaXhlbHMsIG5Db2xvcnMpO1xyXG4gICAgXHJcbiAgICAgICAgLy8gUmV0dXJuIHBhbGV0dGVcclxuICAgICAgICByZXR1cm4gY29sb3JNYXAgPyBjb2xvck1hcC5wYWxldHRlKCkgOiBbXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgcGl4ZWxzIGZyb20gdGhlIGltYWdlXHJcbiAgICAgKiBJbnNwaXJlZCBieSBjb2xvcnRoaWVmXHJcbiAgICAgKiBAcGFyYW0gcXVhbGl0eSBBcnRpZmljaWFsbHkgcmVkdWNlIG51bWJlciBvZiBwaXhlbHMgKGhpZ2hlciA9IGxlc3MgYWNjdXJhdGUgYnV0IGZhc3RlcilcclxuICAgICAqIEByZXR1cm5zIFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgY3JlYXRlUGl4ZWxBcnJheShxdWFsaXR5OiBudW1iZXIpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLndhaXRGb3JMb2FkaW5nKCk7XHJcbiAgICAgICAgY29uc3QgcGl4ZWxBcnJheTogbnVtYmVyW11bXSA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGltYWdlRGF0YSA9ICAoYXdhaXQgdGhpcy5nZXRJbWFnZURhdGEoKSk/LmRhdGE7XHJcbiAgICAgICAgaWYoIWltYWdlRGF0YSkgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgLy8gR2V0IG51bWJlciBvZiBwaXhlbHMgaW4gaW1hZ2VcclxuICAgICAgICBjb25zdCBwaXhlbENvdW50ID0gdGhpcy5oZWlnaHQgKiB0aGlzLndpZHRoO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBpeGVsQ291bnQ7IGkgKz0gcXVhbGl0eSkge1xyXG4gICAgICAgICAgICAvLyBPZmZzZXQgdG8gY29ycmVjdCBzdGFydGluZyBwb3NpdGlvbiBvZiBlYWNoIHBpeGVsXHJcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGkgKiA0O1xyXG4gICAgICAgICAgICBjb25zdCBbciwgZywgYiwgYV0gPSBbaW1hZ2VEYXRhW29mZnNldCArIDBdLCBpbWFnZURhdGFbb2Zmc2V0ICsgMV0sIGltYWdlRGF0YVtvZmZzZXQgKyAyXSwgaW1hZ2VEYXRhW29mZnNldCArIDNdXTtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHBpeGVsIGlzIG1vc3RseSBvcGFxdWUgYW5kIG5vdCB3aGl0ZVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGEgPT09ICd1bmRlZmluZWQnIHx8IGEgPj0gMTI1KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIShyID4gMjUwICYmIGcgPiAyNTAgJiYgYiA+IDI1MCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwaXhlbEFycmF5LnB1c2goW3IsIGcsIGJdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGl4ZWxBcnJheSBhcyBSZ2JQaXhlbFtdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0cyB0aGUgaW1hZ2UgZGF0YSBmcm9tIHRoZSBjYW52YXNcclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGdldEltYWdlRGF0YSh4ID0gMCwgeSA9IDApIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLndhaXRGb3JMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQuZ2V0SW1hZ2VEYXRhKHgsIHksIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2goZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZXQgaW1hZ2UgZGF0YS4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBXYWl0cyBmb3IgbG9hZGluZyB2YXJpYWJsZSB0byBlcXVhbCB0cnVlXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgd2FpdEZvckxvYWRpbmcgPSAoKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICBjb25zdCBjaGVja0xvYWRpbmcgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5sb2FkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGNoZWNrTG9hZGluZyk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgIH0pXHJcbn0iLCAiaW1wb3J0IHsgQXBwLCBFZGl0b3IsIE5vdGljZSwgU3VnZ2VzdE1vZGFsIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IFBhbGV0dGVTZXR0aW5ncyB9IGZyb20gXCIuL1BhbGV0dGVcIjtcclxuaW1wb3J0IHsgQ29sb3JQYWxldHRlU2V0dGluZ3MgfSBmcm9tIFwic2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgQ29tYmluYXRpb24sIGdlbmVyYXRlQ29sb3JzIH0gZnJvbSBcInV0aWxzL2dlbmVyYXRlVXRpbHNcIjtcclxuaW1wb3J0IHZhbGlkYXRlQ29sb3IgZnJvbSBcInZhbGlkYXRlLWNvbG9yXCI7XHJcbmltcG9ydCBjb2xvcnNlYSBmcm9tIFwiY29sb3JzZWFcIjtcclxuaW1wb3J0IEVkaXRvclV0aWxzIGZyb20gXCJ1dGlscy9lZGl0b3JVdGlsc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVQYWxldHRlQmxvY2ssIGdldE1vZGlmaWVkU2V0dGluZ3MsIHBsdWdpblRvUGFsZXR0ZVNldHRpbmdzIH0gZnJvbSBcInV0aWxzL2Jhc2ljVXRpbHNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBHZW5lcmF0ZU1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPENvbWJpbmF0aW9uPiB7XHJcbiAgICBlZGl0b3I6IEVkaXRvcjtcclxuICAgIHNldHRpbmdzOiBQYWxldHRlU2V0dGluZ3NcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgZWRpdG9yOiBFZGl0b3IsIHBsdWdpblNldHRpbmdzOiBDb2xvclBhbGV0dGVTZXR0aW5ncykge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHBsdWdpblRvUGFsZXR0ZVNldHRpbmdzKHBsdWdpblNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZXR1cm5zIGFsbCBhdmFpbGFibGUgc3VnZ2VzdGlvbnMuXHJcbiAgICBnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogQ29tYmluYXRpb25bXSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKENvbWJpbmF0aW9uKS5maWx0ZXIoKGNvbWJpbmF0aW9uKSA9PlxyXG4gICAgICAgICAgICBjb21iaW5hdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgKSBhcyBDb21iaW5hdGlvbltdO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgLy8gUmVuZGVycyBlYWNoIHN1Z2dlc3Rpb24gaXRlbS5cclxuICAgIHJlbmRlclN1Z2dlc3Rpb24oY29tYmluYXRpb246IENvbWJpbmF0aW9uLCBlbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBlbC5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBjb21iaW5hdGlvbiB9KTtcclxuICAgIH1cclxuICBcclxuICAgIC8vIFBlcmZvcm0gYWN0aW9uIG9uIHRoZSBzZWxlY3RlZCBzdWdnZXN0aW9uLlxyXG4gICAgb25DaG9vc2VTdWdnZXN0aW9uKGNvbWJpbmF0aW9uOiBDb21iaW5hdGlvbiwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlbFRleHRPckxpbmUgPSB0aGlzLmVkaXRvci5zb21ldGhpbmdTZWxlY3RlZCgpID8gdGhpcy5lZGl0b3IuZ2V0U2VsZWN0aW9uKCkgOiB0aGlzLmVkaXRvci5nZXRMaW5lKHRoaXMuZWRpdG9yLmdldEN1cnNvcigpLmxpbmUpO1xyXG4gICAgICAgICAgICBjb25zdCBpc0xpbmVFbXB0eSA9IHRoaXMuZWRpdG9yLmdldExpbmUodGhpcy5lZGl0b3IuZ2V0Q3Vyc29yKCkubGluZSkubGVuZ3RoID09PSAwO1xyXG4gICAgICAgICAgICBjb25zdCBpc0NvbG9yID0gdmFsaWRhdGVDb2xvcihzZWxUZXh0T3JMaW5lKTtcclxuICAgICAgICAgICAgY29uc3QgeyBjb2xvcnMsIHNldHRpbmdzIH0gPSBpc0NvbG9yID8gZ2VuZXJhdGVDb2xvcnMoY29tYmluYXRpb24sIHsgYmFzZUNvbG9yOiBjb2xvcnNlYShzZWxUZXh0T3JMaW5lKSwgc2V0dGluZ3M6IHRoaXMuc2V0dGluZ3MgfSkgOiBnZW5lcmF0ZUNvbG9ycyhjb21iaW5hdGlvbiwgeyBzZXR0aW5nczogdGhpcy5zZXR0aW5ncyB9KTtcclxuICAgICAgICAgICAgY29uc3QgbmV3QmxvY2sgPSBjcmVhdGVQYWxldHRlQmxvY2soeyBjb2xvcnMsIHNldHRpbmdzOiBzZXR0aW5ncyA/IGdldE1vZGlmaWVkU2V0dGluZ3Moc2V0dGluZ3MpIDogdW5kZWZpbmVkIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBlZGl0b3JVdGlscyA9IG5ldyBFZGl0b3JVdGlscyh0aGlzLmVkaXRvcik7XHJcbiAgICAgICAgICAgIGVkaXRvclV0aWxzLmluc2VydENvbnRlbnQobmV3QmxvY2ssICFpc0NvbG9yICYmICFpc0xpbmVFbXB0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgRWRpdG9yIH0gZnJvbSBcIm9ic2lkaWFuXCJcclxuXHJcbnR5cGUgT3B0aW9ucyA9IHtcclxuICAgIGxpbmU/OiBudW1iZXIsXHJcbiAgICBvZmZzZXQ/OiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWRpdG9yVXRpbHMge1xyXG4gICAgZWRpdG9yOiBFZGl0b3JcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihlZGl0b3I6IEVkaXRvcikge1xyXG4gICAgICAgIHRoaXMuZWRpdG9yID0gZWRpdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVwbGFjZXMgc2VsZWN0aW9uIG9yIHRleHQgYXQgdGhlIGN1cnNvclxyXG4gICAgICogQHBhcmFtIGNvbnRlbnQgVGhlIGNvbnRlbnQgdG8gYmUgaW5zZXJ0ZWRcclxuICAgICAqIEBwYXJhbSBpbnNlcnRBZnRlciBJbnNlcnRzIHRoZSBjb250ZW50IGFmdGVyIHRoZSBjdXJyZW50IGxpbmVcclxuICAgICAqL1xyXG4gICAgcHVibGljIGluc2VydENvbnRlbnQoY29udGVudDogc3RyaW5nLCBpbnNlcnRBZnRlciA9IGZhbHNlKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXRDdXJzb3JQb3N0Q2FsbGJhY2soKGxpbmUpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc29tZXRoaW5nU2VsZWN0ZWQoKSA/XHJcbiAgICAgICAgICAgIHRoaXMuZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oY29udGVudClcclxuICAgICAgICAgICAgOlxyXG4gICAgICAgICAgICBpbnNlcnRBZnRlciA/XHJcbiAgICAgICAgICAgIHRoaXMuaW5zZXJ0TGluZShjb250ZW50LCAnYWZ0ZXInKVxyXG4gICAgICAgICAgICA6XHJcbiAgICAgICAgICAgIHRoaXMucmVwbGFjZUxpbmUoY29udGVudCwgbGluZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXRzIHRoZSBjdXJzb3IgdG8gYSBwb3NpdGlvbiBhZnRlciBjYWxsYmFjayBlZGl0b3IgY2hhbmdlc1xyXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIENoYW5nZXMgdG8gcGVyZm9ybSB0byB0aGUgZWRpdG9yXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5saW5lIERlZmF1bHRzIHRvIHRoZSBjdXJyZW50IGN1cnNvciBsaW5lXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucy5vZmZzZXQgVGhlIG51bWJlciBvZiBsaW5lcyB0byBvZmZzZXQgKGNhbGN1bGF0ZXMgZHVyaW5nIGZ1bmN0aW9uIHVubGVzcyB1c2VyIHNwZWNpZmllZClcclxuICAgICAqL1xyXG4gICAgcHVibGljIHNldEN1cnNvclBvc3RDYWxsYmFjayhjYWxsYmFjazogKCBsaW5lOiBudW1iZXIgKSA9PiB2b2lkLCB7IGxpbmUgPSB0aGlzLmVkaXRvci5nZXRDdXJzb3IoKS5saW5lLCBvZmZzZXQgfTogT3B0aW9ucyA9IHt9KSB7XHJcbiAgICAgICAgLy8gTnVtYmVyIG9mIGxpbmVzIGJlZm9yZSBhZGRpbmcgY29udGVudFxyXG4gICAgICAgIGNvbnN0IHByZUxpbmVzQ291bnQgPSB0aGlzLmVkaXRvci5saW5lQ291bnQoKTtcclxuXHJcbiAgICAgICAgY2FsbGJhY2sobGluZSk7XHJcblxyXG4gICAgICAgIC8vIE51bWJlciBvZiBsaW5lcyBhZnRlciBhZGRpbmcgY29udGVudFxyXG4gICAgICAgIGNvbnN0IHBvc3RMaW5lc0NvdW50ID0gdGhpcy5lZGl0b3IubGluZUNvdW50KCkgLSBwcmVMaW5lc0NvdW50O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNldCBvZmZzZXQgdG8gcG9zdExpbmVzQ291bnQgaWYgbm90IHNwZWNpZmllZFxyXG4gICAgICAgIG9mZnNldCA9IG9mZnNldCB8fCBwb3N0TGluZXNDb3VudDtcclxuXHJcbiAgICAgICAgdGhpcy5lZGl0b3Iuc2V0Q3Vyc29yKHsgY2g6IDAsIGxpbmU6IGxpbmUgKyBvZmZzZXQgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBvcHRpb25zLmxpbmUgVGhlIGxpbmUgdG8gcmV0cmlldmUgdGhlIGxhc3QgY2hhcmFjdGVyIGluZGV4IGZyb21cclxuICAgICAqIEBwYXJhbSBvcHRpb25zLm9mZnNldCBUaGUgb2Zmc2V0IHVzZWQgZnJvbSB0aGUgbGluZSAoZm9yIGV4YW1wbGUsIDEgY291bGQgYmUgdXNlZCB0byBnZXQgdGhlIGxhc3QgY2hhcmFjdGVyIGluZGV4IG9uIHRoZSBsaW5lIGJlbG93IHRoZSBjdXJzb3IpXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgbGFzdCBjaGFyYWN0ZXIncyBpbmRleCBvbiB0aGUgbGluZVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgZ2V0TGFzdENoKHsgbGluZSA9IHRoaXMuZWRpdG9yLmdldEN1cnNvcigpLmxpbmUsIG9mZnNldCA9IDAgfTogT3B0aW9ucyA9IHt9KTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lZGl0b3IuZ2V0TGluZShsaW5lICsgb2Zmc2V0KS5sZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXBsYWNlcyBhIHNpbmdsZSBsaW5lXHJcbiAgICAgKiBAcGFyYW0gY29udGVudCBUaGUgY29udGVudCB0byByZXBsYWNlIHRoZSBsaW5lIHdpdGhcclxuICAgICAqIEBwYXJhbSBsaW5lIFRoZSBsaW5lIHRvIHJlcGxhY2VcclxuICAgICAqL1xyXG4gICAgcHVibGljIHJlcGxhY2VMaW5lKGNvbnRlbnQ6IHN0cmluZywgbGluZTogbnVtYmVyKSB7XHJcbiAgICAgICAgY29uc3QgbGluZUNvbnRlbnQgPSB0aGlzLmVkaXRvci5nZXRMaW5lKGxpbmUpO1xyXG4gICAgICAgIHRoaXMuZWRpdG9yLnJlcGxhY2VSYW5nZShjb250ZW50LCB7IGxpbmU6IGxpbmUsIGNoOiAwIH0sIHsgbGluZTogbGluZSwgY2g6IGxpbmVDb250ZW50Lmxlbmd0aH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogSW5zZXJ0cyBjb250ZW50IGludG8gZWRpdG9yIGJlZm9yZSBvciBhZnRlciB0aGUgbGluZVxyXG4gICAgICogQHBhcmFtIGNvbnRlbnQgVGhlIGNvbnRlbnQgdG8gaW5zZXJ0XHJcbiAgICAgKiBAcGFyYW0gbG9jYXRpb24gV2hlcmUgdG8gaW5zZXJ0IHRoZSBjb250ZW50LCBiZWZvcmUgb3IgYWZ0ZXIgdGhlIGxpbmVcclxuICAgICAqIEBwYXJhbSBvcHRpb25zLmxpbmUgRGVmYXVsdHMgdG8gY3Vyc29yIGxpbmVcclxuICAgICAqIEBwYXJhbSBvcHRpb25zLmNoIERlZmF1bHRzIHRvIDBcclxuICAgICAqL1xyXG4gICAgcHVibGljIGluc2VydExpbmUoY29udGVudDogc3RyaW5nLCBsb2NhdGlvbjogJ2JlZm9yZScgfCAnYWZ0ZXInID0gJ2JlZm9yZScsIHsgbGluZSA9IHRoaXMuZWRpdG9yLmdldEN1cnNvcigpLmxpbmUsIGNoID0gMCB9ID0ge30pIHtcclxuICAgICAgICBpZihsb2NhdGlvbiA9PT0gJ2JlZm9yZScpIHtcclxuICAgICAgICAgICAgdGhpcy5lZGl0b3IucmVwbGFjZVJhbmdlKGNvbnRlbnQsIHsgbGluZSwgY2ggfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGxvY2F0aW9uID09PSAnYWZ0ZXInKSB7XHJcbiAgICAgICAgICAgIC8vIElmIGxhc3QgbGluZSwgYWRkIGEgbmV3bGluZSBiZWZvcmUgYWRkaW5nIGNvbnRlbnRcclxuICAgICAgICAgICAgdGhpcy5lZGl0b3IucmVwbGFjZVJhbmdlKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0b3IubGFzdExpbmUoKSA9PT0gbGluZSA/ICdcXG4nICsgY29udGVudCA6IGNvbnRlbnQgKyAnXFxuJywgXHJcbiAgICAgICAgICAgICAgICB7IGxpbmU6IGxpbmUgKyAxLCBjaCB9XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IHsgTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgTWFya2Rvd25SZW5kZXJDaGlsZCwgTWFya2Rvd25WaWV3LCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IENvbG9yUGFsZXR0ZSwgeyB1cmxSZWdleCB9IGZyb20gXCJtYWluXCI7XHJcbmltcG9ydCB7IENvbG9yUGFsZXR0ZVNldHRpbmdzIH0gZnJvbSBcInNldHRpbmdzXCI7XHJcbmltcG9ydCB7IFBhbGV0dGUsIFBhbGV0dGVTZXR0aW5ncywgU3RhdHVzIH0gZnJvbSBcIi4vUGFsZXR0ZVwiO1xyXG5pbXBvcnQgeyBjcmVhdGVQYWxldHRlQmxvY2ssIGdldE1vZGlmaWVkU2V0dGluZ3MsIHBhcnNlVXJsLCBwbHVnaW5Ub1BhbGV0dGVTZXR0aW5ncyB9IGZyb20gXCJ1dGlscy9iYXNpY1V0aWxzXCI7XHJcbmltcG9ydCB2YWxpZGF0ZUNvbG9yIGZyb20gXCJ2YWxpZGF0ZS1jb2xvclwiO1xyXG5pbXBvcnQgeyBQYWxldHRlTWVudSB9IGZyb20gXCIuL1BhbGV0dGVNZW51XCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUGFsZXR0ZU1SQyBleHRlbmRzIE1hcmtkb3duUmVuZGVyQ2hpbGQge1xyXG4gICAgcGx1Z2luOiBDb2xvclBhbGV0dGU7XHJcbiAgICBwbHVnaW5TZXR0aW5nczogQ29sb3JQYWxldHRlU2V0dGluZ3M7XHJcblx0aW5wdXQ6IHN0cmluZztcclxuICAgIHBhbGV0dGU6IFBhbGV0dGVcclxuICAgIGNvbnRleHQ6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQ7XHJcbiAgICBlZGl0TW9kZUNoYW5nZXM6IHsgY29sb3JzOiBzdHJpbmdbXSwgc2V0dGluZ3M6IFBhcnRpYWw8UGFsZXR0ZVNldHRpbmdzPiB8IHVuZGVmaW5lZCB9O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IENvbG9yUGFsZXR0ZSwgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBpbnB1dDogc3RyaW5nLCBjb250ZXh0OiBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0KSB7XHJcbiAgICAgICAgc3VwZXIoY29udGFpbmVyRWwpO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIHRoaXMucGx1Z2luU2V0dGluZ3MgPSBwbHVnaW4uc2V0dGluZ3M7XHJcbiAgICAgICAgdGhpcy5pbnB1dCA9IGlucHV0O1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcblx0fVxyXG5cclxuICAgIG9ubG9hZCgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICAgIC8vIEFkZCBuZXcgcGFsZXR0ZSB0byBzdGF0ZVxyXG4gICAgICAgIHRoaXMucGx1Z2luLnBhbGV0dGVzPy5wdXNoKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbnRleHRtZW51JywgKGUpID0+IHtcclxuICAgICAgICAgICAgLy8gRW5zdXJlIHBhbGV0dGUgaXMgdmFsaWQgYmVmb3JlIGNyZWF0aW5nIGEgbmV3IG1lbnVcclxuICAgICAgICAgICAgaWYodGhpcy5wYWxldHRlLnN0YXR1cyA9PT0gU3RhdHVzLlZBTElEKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYWxldHRlTWVudSA9IG5ldyBQYWxldHRlTWVudSh0aGlzLnBsdWdpbi5hcHAsIHRoaXMuY29udGV4dCwgdGhpcy5wYWxldHRlLCAoY29sb3JzLCBzZXR0aW5ncykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGNvbG9ycyA9PSB1bmRlZmluZWQpIHRoaXMuc2V0UGFsZXR0ZUlucHV0KCcnKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHRoaXMuc2V0UGFsZXR0ZUlucHV0KGNyZWF0ZVBhbGV0dGVCbG9jayh7IGNvbG9ycywgc2V0dGluZ3MgfSkpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBwYWxldHRlTWVudS5zaG93QXRNb3VzZUV2ZW50KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICB1bmxvYWQoKTogdm9pZCB7XHJcbiAgICAgICAgLy8gUmVtb3ZlIHBhbGV0dGUgbGlzdGVuZXJzIG9uIHVubG9hZFxyXG4gICAgICAgIHRoaXMucGFsZXR0ZS51bmxvYWQoKTtcclxuICAgICAgICAvLyBSZW1vdmUgcGFsZXR0ZSBmcm9tIHN0YXRlXHJcbiAgICAgICAgdGhpcy5wbHVnaW4ucGFsZXR0ZXM/LnJlbW92ZSh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZXMgdGhlIHBhbGV0dGUgY29udGVudHNcclxuICAgICAqL1xyXG4gICAgcHVibGljIHVwZGF0ZSgpIHtcclxuICAgICAgICAvLyBSZW1vdmUgY3VycmVudCBwYWxldHRlXHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICAvLyBDYWxjdWxhdGUgY29sb3JzICYgc2V0dGluZ3NcclxuICAgICAgICBjb25zdCB7IGNvbG9ycywgc2V0dGluZ3MgfSA9IHRoaXMuY2FsY0NvbG9yc0FuZFNldHRpbmdzKHRoaXMuaW5wdXQpO1xyXG5cclxuICAgICAgICAvLyBTZXQgZWRpdE1vZGVDaGFuZ2VzIGluaXRpYWwgdmFsdWVzIGlmIHZhbGlkXHJcbiAgICAgICAgaWYodHlwZW9mIGNvbG9ycyAhPT0gJ3N0cmluZycgJiYgdHlwZW9mIHNldHRpbmdzICE9PSAnc3RyaW5nJykgdGhpcy5lZGl0TW9kZUNoYW5nZXMgPSB7Y29sb3JzLCBzZXR0aW5nc307XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBuZXcgcGFsZXR0ZVxyXG4gICAgICAgIHRoaXMucGFsZXR0ZSA9IG5ldyBQYWxldHRlKGNvbG9ycywgc2V0dGluZ3MsIHRoaXMuY29udGFpbmVyRWwsIHRoaXMucGx1Z2luU2V0dGluZ3MpO1xyXG4gICAgICAgIHRoaXMucGFsZXR0ZS5lbWl0dGVyLm9uKCdjaGFuZ2VkJywgKGNvbG9ycywgc2V0dGluZ3MpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbW9kaWZpZWRTZXR0aW5ncyA9IGdldE1vZGlmaWVkU2V0dGluZ3Moc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAvLyBTYXZlIHN0b3JlZCBjaGFuZ2VzXHJcbiAgICAgICAgICAgIHRoaXMuZWRpdE1vZGVDaGFuZ2VzID0geyBjb2xvcnMsIHNldHRpbmdzOiBtb2RpZmllZFNldHRpbmdzIH07XHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGlzLnBhbGV0dGUuZW1pdHRlci5vbignZWRpdE1vZGUnLCAoZWRpdE1vZGUpID0+IHtcclxuICAgICAgICAgICAgaWYoIWVkaXRNb2RlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTZXQgcGFsZXR0ZSBpbnB1dCB0byBzdG9yZWQgY2hhbmdlc1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQYWxldHRlSW5wdXQoY3JlYXRlUGFsZXR0ZUJsb2NrKHsgY29sb3JzOiB0aGlzLmVkaXRNb2RlQ2hhbmdlcy5jb2xvcnMsIHNldHRpbmdzOiB0aGlzLmVkaXRNb2RlQ2hhbmdlcy5zZXR0aW5ncyB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIGlucHV0ICYgZXh0cmFjdHMgc2V0dGluZ3NcclxuICAgICAqIEBwYXJhbSBpbnB1dCBzZXR0aW5ncyBmcm9tIGNvZGVibG9ja1xyXG4gICAgICogQHJldHVybnMgUGFsZXR0ZVNldHRpbmdzIG9yIFN0YXR1cyBpZiBzZXR0aW5ncyBhcmUgbm90IHZhbGlkXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcGFyc2VTZXR0aW5ncyhpbnB1dDogc3RyaW5nKTogUGFsZXR0ZVNldHRpbmdzIHwgU3RhdHVzIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBFeHRyYWN0IEpTT04gc2V0dGluZ3MgZnJvbSB0aGUgcGFsZXR0ZVxyXG4gICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTdGF0dXMuSU5WQUxJRF9TRVRUSU5HUztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgaW5wdXQgJiBleHRyYWN0cyBjb2xvcnMgYmFzZWQgb24gY29sb3Igc3BhY2Ugb3IgVVJMXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgY29sb3JzIGZyb20gY29kZWJsb2NrXHJcbiAgICAgKiBAcmV0dXJucyBBcnJheSBvZiBjb2xvcnMgb3IgU3RhdHVzIGlmIGNvbG9ycyBhcmUgbm90IHZhbGlkXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcGFyc2VDb2xvcnMoaW5wdXQ6IHN0cmluZ1tdLCBvdmVycmlkZTogYm9vbGVhbik6IHN0cmluZ1tdIHwgU3RhdHVzIHsgICAgICAgIFxyXG4gICAgICAgIGxldCBjb2xvcnMgPSBpbnB1dC5mbGF0TWFwKChjb2xvcikgPT4ge1xyXG4gICAgICAgICAgICAvLyBTcGxpdCBSR0IgLyBIU0wgZGVsaW1pdGVkIGJ5IHNlbWljb2xvbnNcclxuICAgICAgICAgICAgaWYoY29sb3IuaW5jbHVkZXMoJygnKSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3Iuc3BsaXQoJzsnKS5mbGF0TWFwKChwb3N0U3BsaXRDb2xvcikgPT4gcG9zdFNwbGl0Q29sb3IudHJpbSgpKVxyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHdoaXRlc3BhY2UgZWxlbWVudHMgZnJvbSBhcnJheVxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoY29sb3IpID0+IGNvbG9yICE9PSAnJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gU3BsaXQgY29sb3JzIGRlbGltaXRlZCBieSBjb21tYXNcclxuICAgICAgICAgICAgcmV0dXJuIGNvbG9yLnNwbGl0KCcsJykuZmxhdE1hcCgocG9zdFNwbGl0Q29sb3IpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwb3N0U3BsaXRDb2xvci50cmltKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgLy8gUmVtb3ZlIHNlbWljb2xvbnNcclxuICAgICAgICB9KS5mbGF0TWFwKChjb2xvcikgPT4gY29sb3IudHJpbSgpLnJlcGxhY2UoJzsnLCAnJykpO1xyXG5cclxuICAgICAgICAvLyBDb21iaW5lIGNvbG9ycyBhcnJheSBpbnRvIHN0cmluZ1xyXG4gICAgICAgIGNvbnN0IHJhd0NvbG9ycyA9IGNvbG9ycy5qb2luKCcnKTtcclxuXHJcbiAgICAgICAgLy8gSWYgVVJMIHBhcnNlIGFuZCByZXR1cm5cclxuICAgICAgICBpZihyYXdDb2xvcnMubWF0Y2godXJsUmVnZXgpKSByZXR1cm4gcGFyc2VVcmwocmF3Q29sb3JzKTtcclxuXHJcbiAgICAgICAgLy8gUmV0dXJuIHN0YXR1cyBpZiBjb2xvcnMgYXJlIGludmFsaWRcclxuICAgICAgICBpZiAoIW92ZXJyaWRlKSB7XHJcbiAgICAgICAgICAgIGZvcihsZXQgY29sb3Igb2YgY29sb3JzKSB7XHJcbiAgICAgICAgICAgICAgICBpZighdmFsaWRhdGVDb2xvcihjb2xvcikpIHJldHVybiBTdGF0dXMuSU5WQUxJRF9DT0xPUlM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFJldHVybiBmaW5hbCBjb2xvcnMgYXJyYXlcclxuICAgICAgICByZXR1cm4gY29sb3JzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ2FsY3VsYXRlcyBjb2xvcnMgYW5kIHNldHRpbmdzIGJhc2VkIG9uIGNvZGVibG9jayBjb250ZW50c1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNhbGNDb2xvcnNBbmRTZXR0aW5ncyhpbnB1dDogc3RyaW5nKSB7XHJcbiAgICAgICAgLy8gU3BsaXRzIGlucHV0IGJ5IG5ld2xpbmUgY3JlYXRpbmcgYW4gYXJyYXlcclxuICAgICAgICBjb25zdCBzcGxpdCA9IGlucHV0LnNwbGl0KCdcXG4nKVxyXG4gICAgICAgIC8vIFJldHVybnMgdHJ1ZSBpZiBwYWxldHRlIHNldHRpbmdzIGFyZSBkZWZpbmVkXHJcbiAgICAgICAgY29uc3QgaGFzU2V0dGluZ3MgPSBzcGxpdC5zb21lKCh2YWwpID0+IHZhbC5pbmNsdWRlcygoJ3snKSkpO1xyXG5cclxuICAgICAgICAvLyBSZW1vdmUgYW5kIHBhcnNlIHRoZSBsYXN0IHNwbGl0IGluZGV4IChzZXR0aW5ncyBhcmUgYWx3YXlzIGRlZmluZWQgb24gdGhlIGxhc3QgaW5kZXgpXHJcbiAgICAgICAgbGV0IHNldHRpbmdzID0gaGFzU2V0dGluZ3MgPyB0aGlzLnBhcnNlU2V0dGluZ3Moc3BsaXQucG9wKCkgfHwgJycpIDogdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAvLyBHZXQgUGFsZXR0ZVNldHRpbmdzIGlmIHZhbGlkIG9yIHBsdWdpbiBkZWZhdWx0cyBpZiBpbnZhbGlkXHJcbiAgICAgICAgbGV0IHNldHRpbmdzT2JqID0gdHlwZW9mIHNldHRpbmdzID09PSAnb2JqZWN0JyA/IHNldHRpbmdzIDogcGx1Z2luVG9QYWxldHRlU2V0dGluZ3ModGhpcy5wbHVnaW5TZXR0aW5ncyk7XHJcblxyXG4gICAgICAgIHJldHVybiB7IGNvbG9yczogdGhpcy5wYXJzZUNvbG9ycyhzcGxpdCwgc2V0dGluZ3NPYmoub3ZlcnJpZGUpLCBzZXR0aW5nczogc2V0dGluZ3MgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldHMgdGhlIHBhbGV0dGUgY29kZWJsb2NrIGlucHV0XHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRQYWxldHRlSW5wdXQoKSB7XHJcbiAgICAgICAgbGV0IGVkaXRvciA9IHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpPy5lZGl0b3I7XHJcbiAgICAgICAgLy8gUGFsZXR0ZSBsaW5lIHN0YXJ0ICYgbGluZSBlbmRcclxuICAgICAgICBjb25zdCBwYWxldHRlU2VjdGlvbiA9IHRoaXMuY29udGV4dC5nZXRTZWN0aW9uSW5mbyh0aGlzLnBhbGV0dGUuY29udGFpbmVyRWwpO1xyXG4gICAgICAgIGlmKHBhbGV0dGVTZWN0aW9uICYmIGVkaXRvcikgcmV0dXJuIHtcclxuICAgICAgICAgICAgbGluZXM6IHtcclxuICAgICAgICAgICAgICAgIGxpbmVTdGFydDogcGFsZXR0ZVNlY3Rpb24ubGluZVN0YXJ0LCBcclxuICAgICAgICAgICAgICAgIGxpbmVFbmQ6IHBhbGV0dGVTZWN0aW9uLmxpbmVFbmRcclxuICAgICAgICAgICAgfSwgXHJcbiAgICAgICAgICAgIGlucHV0OiBlZGl0b3IuZ2V0UmFuZ2UoXHJcbiAgICAgICAgICAgICAgICB7bGluZTogcGFsZXR0ZVNlY3Rpb24ubGluZVN0YXJ0LCBjaDogMH0sIFxyXG4gICAgICAgICAgICAgICAge2xpbmU6IHBhbGV0dGVTZWN0aW9uLmxpbmVFbmQgKyAxLCBjaDogMH1cclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVOb3RpY2UoJ1RoZSBlZGl0b3IgaGFzIG5vdCBmdWxseSBsb2FkZWQgeWV0LicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIHBhbGV0dGUgY29kZWJsb2NrIGlucHV0IHdpdGggYHJlcGxhY2VtZW50YFxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc2V0UGFsZXR0ZUlucHV0KHJlcGxhY2VtZW50OiBzdHJpbmcpIHtcclxuICAgICAgICBsZXQgZWRpdG9yID0gdGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk/LmVkaXRvcjtcclxuICAgICAgICAvLyBQYWxldHRlIGxpbmUgc3RhcnQgJiBsaW5lIGVuZFxyXG4gICAgICAgIGNvbnN0IHBhbGV0dGVTZWN0aW9uID0gdGhpcy5jb250ZXh0LmdldFNlY3Rpb25JbmZvKHRoaXMucGFsZXR0ZS5jb250YWluZXJFbCk7XHJcbiAgICAgICAgaWYocGFsZXR0ZVNlY3Rpb24gJiYgZWRpdG9yKSB7XHJcbiAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UocmVwbGFjZW1lbnQsIHtsaW5lOiBwYWxldHRlU2VjdGlvbi5saW5lU3RhcnQsIGNoOiAwfSwge2xpbmU6IHBhbGV0dGVTZWN0aW9uLmxpbmVFbmQgKyAxLCBjaDogMH0pO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgbGluZVN0YXJ0OiBwYWxldHRlU2VjdGlvbi5saW5lU3RhcnQsIFxyXG4gICAgICAgICAgICAgICAgbGluZUVuZDogcGFsZXR0ZVNlY3Rpb24ubGluZUVuZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVOb3RpY2UoJ1RoZSBlZGl0b3IgaGFzIG5vdCBmdWxseSBsb2FkZWQgeWV0LicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBuZXcgbm90aWNlIHVzaW5nIHByZS1zZXQgc2V0dGluZ3NcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlIE1lc3NhZ2UgdG8gZGlzcGxheVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgY3JlYXRlTm90aWNlKG1lc3NhZ2U6IHN0cmluZykge1xyXG4gICAgICAgIG5ldyBOb3RpY2UobWVzc2FnZSwgdGhpcy5wbHVnaW5TZXR0aW5ncy5ub3RpY2VEdXJhdGlvbik7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IGNvbG9yc2VhIGZyb20gXCJjb2xvcnNlYVwiO1xyXG5pbXBvcnQgeyBBcHAsIFN1Z2dlc3RNb2RhbCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBQYWxldHRlLCBQYWxldHRlU2V0dGluZ3MgfSBmcm9tIFwiLi9QYWxldHRlXCI7XHJcbmltcG9ydCB7IGdldE1vZGlmaWVkU2V0dGluZ3MgfSBmcm9tIFwidXRpbHMvYmFzaWNVdGlsc1wiO1xyXG5cclxuZW51bSBSZW9yZGVyIHtcclxuICAgIEh1ZSA9ICdIdWUnLFxyXG4gICAgU2F0dXJhdGlvbiA9ICdTYXR1cmF0aW9uJyxcclxuICAgIExpZ2h0bmVzcyA9ICdMaWdodG5lc3MnLFxyXG4gICAgUmVkID0gJ1JlZCcsXHJcbiAgICBHcmVlbiA9ICdHcmVlbicsXHJcbiAgICBCbHVlID0gJ0JsdWUnLFxyXG4gICAgQWxwaGEgPSAnQWxwaGEnXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBSZW9yZGVyTW9kYWwgZXh0ZW5kcyBTdWdnZXN0TW9kYWw8UmVvcmRlcj57XHJcbiAgICBwYWxldHRlOiBQYWxldHRlO1xyXG4gICAgb25TdWJtaXQ6IChjb2xvcnM6IHN0cmluZ1tdLCBzZXR0aW5nczogUGFydGlhbDxQYWxldHRlU2V0dGluZ3M+IHwgdW5kZWZpbmVkKSA9PiB2b2lkO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwYWxldHRlOiBQYWxldHRlLCBvblN1Ym1pdDogKGNvbG9yczogc3RyaW5nW10sIHNldHRpbmdzOiBQYXJ0aWFsPFBhbGV0dGVTZXR0aW5ncz4gfCB1bmRlZmluZWQpID0+IHZvaWQpIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMucGFsZXR0ZSA9IHBhbGV0dGU7XHJcbiAgICAgICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFJldHVybnMgYWxsIGF2YWlsYWJsZSBzdWdnZXN0aW9ucy5cclxuICAgIGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBSZW9yZGVyW10ge1xyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhSZW9yZGVyKS5maWx0ZXIoKGNvbWJpbmF0aW9uKSA9PlxyXG4gICAgICAgICAgICBjb21iaW5hdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5LnRvTG93ZXJDYXNlKCkpXHJcbiAgICAgICAgKSBhcyBSZW9yZGVyW107XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyU3VnZ2VzdGlvbihvcmRlcjogUmVvcmRlciwgZWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgZWwuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogb3JkZXIgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DaG9vc2VTdWdnZXN0aW9uKGl0ZW06IFJlb3JkZXIsIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHtcclxuICAgICAgICAvLyBDcmVhdGUgY29sb3JzZWEgYXJyYXlcclxuICAgICAgICBjb25zdCBjc0NvbG9ycyA9IHRoaXMucGFsZXR0ZS5jb2xvcnMubWFwKChjb2xvcikgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gY29sb3JzZWEoY29sb3IpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgbGV0IGNvbG9yczogc3RyaW5nW10gPSBbXVxyXG4gICAgICAgIHN3aXRjaChpdGVtKXtcclxuICAgICAgICAgICAgY2FzZSBSZW9yZGVyLkh1ZTpcclxuICAgICAgICAgICAgICAgIGNvbG9ycyA9IGNzQ29sb3JzLnNvcnQoKGEsIGIpID0+IGEuaHVlKCkgLSBiLmh1ZSgpKS5tYXAoKGNvbG9yKSA9PiBjb2xvci5oZXgoKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBSZW9yZGVyLlNhdHVyYXRpb246XHJcbiAgICAgICAgICAgICAgICBjb2xvcnMgPSBjc0NvbG9ycy5zb3J0KChhLCBiKSA9PiBhLnNhdHVyYXRpb24oKSAtIGIuc2F0dXJhdGlvbigpKS5tYXAoKGNvbG9yKSA9PiBjb2xvci5oZXgoKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBSZW9yZGVyLkxpZ2h0bmVzczpcclxuICAgICAgICAgICAgICAgIGNvbG9ycyA9IGNzQ29sb3JzLnNvcnQoKGEsIGIpID0+IGEubGlnaHRuZXNzKCkgLSBiLmxpZ2h0bmVzcygpKS5tYXAoKGNvbG9yKSA9PiBjb2xvci5oZXgoKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBSZW9yZGVyLlJlZDpcclxuICAgICAgICAgICAgICAgIGNvbG9ycyA9IGNzQ29sb3JzLnNvcnQoKGEsIGIpID0+IGEucmVkKCkgLSBiLnJlZCgpKS5tYXAoKGNvbG9yKSA9PiBjb2xvci5oZXgoKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBSZW9yZGVyLkdyZWVuOlxyXG4gICAgICAgICAgICAgICAgY29sb3JzID0gY3NDb2xvcnMuc29ydCgoYSwgYikgPT4gYS5ncmVlbigpIC0gYi5ncmVlbigpKS5tYXAoKGNvbG9yKSA9PiBjb2xvci5oZXgoKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBSZW9yZGVyLkJsdWU6XHJcbiAgICAgICAgICAgICAgICBjb2xvcnMgPSBjc0NvbG9ycy5zb3J0KChhLCBiKSA9PiBhLmJsdWUoKSAtIGIuYmx1ZSgpKS5tYXAoKGNvbG9yKSA9PiBjb2xvci5oZXgoKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBSZW9yZGVyLkFscGhhOlxyXG4gICAgICAgICAgICAgICAgY29sb3JzID0gY3NDb2xvcnMuc29ydCgoYSwgYikgPT4gYS5hbHBoYSgpIC0gYi5hbHBoYSgpKS5tYXAoKGNvbG9yKSA9PiBjb2xvci5oZXgoKSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU3VibWl0XHJcbiAgICAgICAgdGhpcy5vblN1Ym1pdCggY29sb3JzLCBnZXRNb2RpZmllZFNldHRpbmdzKHRoaXMucGFsZXR0ZS5zZXR0aW5ncykpO1xyXG4gICAgfVxyXG59IiwgImltcG9ydCB7IEVkaXRvck1vZGFsIH0gZnJvbSBcIi4vRWRpdG9yTW9kYWxcIjtcclxuaW1wb3J0IHsgUmVvcmRlck1vZGFsIH0gZnJvbSBcIi4vUmVvcmRlck1vZGFsXCI7XHJcbmltcG9ydCBjb2xvcnNlYSBmcm9tIFwiY29sb3JzZWFcIjtcclxuaW1wb3J0IHsgQXBwLCBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0LCBNZW51LCBOb3RpY2UgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgUGFsZXR0ZSwgUGFsZXR0ZVNldHRpbmdzIH0gZnJvbSBcIi4vUGFsZXR0ZVwiO1xyXG5pbXBvcnQgeyBEaXJlY3Rpb24gfSBmcm9tIFwic2V0dGluZ3NcIjtcclxuaW1wb3J0IHsgY29weVRvQ2xpcGJvYXJkLCBjcmVhdGVQYWxldHRlQmxvY2ssIGdldE1vZGlmaWVkU2V0dGluZ3MgfSBmcm9tIFwidXRpbHMvYmFzaWNVdGlsc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhbGV0dGVNZW51IGV4dGVuZHMgTWVudSB7XHJcbiAgICBhcHA6IEFwcDtcclxuICAgIGNvbnRleHQ6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQ7XHJcbiAgICBwYWxldHRlOiBQYWxldHRlO1xyXG4gICAgcHJpdmF0ZSBvbkNoYW5nZTogKGNvbG9yczogc3RyaW5nW10gfCB1bmRlZmluZWQsIHNldHRpbmdzOiBQYXJ0aWFsPFBhbGV0dGVTZXR0aW5ncz4gfCB1bmRlZmluZWQpID0+IHZvaWQ7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGNvbnRleHQ6IE1hcmtkb3duUG9zdFByb2Nlc3NvckNvbnRleHQsIHBhbGV0dGU6IFBhbGV0dGUsIG9uQ2hhbmdlOiAoY29sb3JzOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCwgc2V0dGluZ3M6IFBhcnRpYWw8UGFsZXR0ZVNldHRpbmdzPiB8IHVuZGVmaW5lZCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcclxuICAgICAgICB0aGlzLnBhbGV0dGUgPSBwYWxldHRlO1xyXG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSBvbkNoYW5nZTtcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVNZW51KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVNZW51KCkge1xyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJSZW9yZGVyXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0SWNvbihcImFycm93LWxlZnQtcmlnaHRcIilcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBSZW9yZGVyTW9kYWwodGhpcy5hcHAsIHRoaXMucGFsZXR0ZSwgKGNvbG9ycywgc2V0dGluZ3MpID0+IHRoaXMub25DaGFuZ2UoY29sb3JzLCBzZXR0aW5ncykpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbC5zZXRJbnN0cnVjdGlvbnMoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IGNvbW1hbmQ6ICdcdTIxOTFcdTIxOTMnLCBwdXJwb3NlOiAndG8gbmF2aWdhdGUnIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgY29tbWFuZDogJ1x1MjFCNScsIHB1cnBvc2U6ICd0byB1c2UnfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyBjb21tYW5kOiAnZXNjJywgcHVycG9zZTogJ3RvIGRpc21pc3MnfSxcclxuICAgICAgICAgICAgICAgICAgICBdKTtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbC5zZXRQbGFjZWhvbGRlcignQ2hvb3NlIGEgc3BhY2UgdG8gcmVvcmRlciBwYWxldHRlJyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgICAgIHRoaXMuYWRkSXRlbSgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJFZGl0IE1vZGVcIilcclxuICAgICAgICAgICAgICAgIC5zZXRJY29uKCdwYWxldHRlJylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgRWRpdG9yTW9kYWwodGhpcy5hcHAsIHRoaXMucGFsZXR0ZS5wbHVnaW5TZXR0aW5ncywgKGNvbG9ycywgc2V0dGluZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhbGV0dGVTZWN0aW9uID0gdGhpcy5jb250ZXh0LmdldFNlY3Rpb25JbmZvKHRoaXMucGFsZXR0ZS5jb250YWluZXJFbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihwYWxldHRlU2VjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25DaGFuZ2UoY29sb3JzLCBzZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCB0aGlzLnBhbGV0dGUpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9wZW4oKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIE9ubHkgc2hvdyB0b2dnbGUgZWRpdCBtb2RlIG9wdGlvbiB3aGVuIHBhbGV0dGUgaXMgbm90IGEgZ3JhZGllbnQgb3IgY29sdW1uc1xyXG4gICAgICAgIGlmKCF0aGlzLnBhbGV0dGUuc2V0dGluZ3MuZ3JhZGllbnQgJiYgdGhpcy5wYWxldHRlLnNldHRpbmdzLmRpcmVjdGlvbiAhPT0gRGlyZWN0aW9uLlJvdykge1xyXG4gICAgICAgICAgICB0aGlzLmFkZEl0ZW0oKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoXCJRdWljayBFZGl0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ2JydXNoJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0Q2hlY2tlZCh0aGlzLnBhbGV0dGUuZ2V0RWRpdE1vZGUoKSlcclxuICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRvZ2dsZSBwYWxldHRlIGVkaXQgbW9kZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhbGV0dGUuc2V0RWRpdE1vZGUoIXRoaXMucGFsZXR0ZS5nZXRFZGl0TW9kZSgpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWxldHRlLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5hZGRTZXBhcmF0b3IoKTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIkNvbnZlcnQgdG8gUkdCXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0SWNvbihcImRyb3BsZXRzXCIpXHJcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3JzID0gdGhpcy5wYWxldHRlLmNvbG9ycy5tYXAoKGNvbG9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJnYkNvbG9yID0gY29sb3JzZWEoY29sb3IpLnJnYigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYHJnYigke3JnYkNvbG9yWzBdfSwgJHtyZ2JDb2xvclsxXX0sICR7cmdiQ29sb3JbMl19KWBcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25DaGFuZ2UoY29sb3JzLCBnZXRNb2RpZmllZFNldHRpbmdzKHRoaXMucGFsZXR0ZS5zZXR0aW5ncykpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIkNvbnZlcnQgdG8gSFNMXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0SWNvbihcImRyb3BsZXRzXCIpXHJcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3JzID0gdGhpcy5wYWxldHRlLmNvbG9ycy5tYXAoKGNvbG9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhzbENvbG9yID0gY29sb3JzZWEoY29sb3IpLmhzbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYGhzbCgke2hzbENvbG9yWzBdfSAke2hzbENvbG9yWzFdfSUgJHtoc2xDb2xvclsyXX0lKWBcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25DaGFuZ2UoY29sb3JzLCBnZXRNb2RpZmllZFNldHRpbmdzKHRoaXMucGFsZXR0ZS5zZXR0aW5ncykpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIkNvbnZlcnQgdG8gSEVYXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0SWNvbihcImRyb3BsZXRzXCIpXHJcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3JzID0gdGhpcy5wYWxldHRlLmNvbG9ycy5tYXAoKGNvbG9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb2xvcnNlYShjb2xvcikuaGV4KDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNoYW5nZShjb2xvcnMsIGdldE1vZGlmaWVkU2V0dGluZ3ModGhpcy5wYWxldHRlLnNldHRpbmdzKSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZFNlcGFyYXRvcigpO1xyXG5cclxuICAgICAgICBjb25zdCBpbnB1dCA9IGNyZWF0ZVBhbGV0dGVCbG9jayh7IGNvbG9yczogdGhpcy5wYWxldHRlLmNvbG9ycywgc2V0dGluZ3M6IGdldE1vZGlmaWVkU2V0dGluZ3ModGhpcy5wYWxldHRlLnNldHRpbmdzKSB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIkN1dFwiKVxyXG4gICAgICAgICAgICAgICAgLnNldEljb24oXCJzY2lzc29yc1wiKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIENvcHkgcGFsZXR0ZSB0byBjbGlwYm9hcmRcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb3B5VG9DbGlwYm9hcmQoaW5wdXQsIHRoaXMucGFsZXR0ZS5wbHVnaW5TZXR0aW5ncy5jb3B5Rm9ybWF0KTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcGFsZXR0ZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25DaGFuZ2UodW5kZWZpbmVkLCB1bmRlZmluZWQpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuICAgICAgXHJcbiAgICAgICAgdGhpcy5hZGRJdGVtKChpdGVtKSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIkNvcHlcIilcclxuICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiY29weVwiKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIENvcHkgcGFsZXR0ZSB0byBjbGlwYm9hcmRcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb3B5VG9DbGlwYm9hcmQoaW5wdXQsIHRoaXMucGFsZXR0ZS5wbHVnaW5TZXR0aW5ncy5jb3B5Rm9ybWF0KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQSxzREFBQUEsU0FBQTtBQUFBLElBQUFBLFFBQU8sVUFBUSxTQUFTQyxJQUFFO0FBQUMsVUFBSUMsS0FBRSxDQUFDO0FBQUUsZUFBU0MsR0FBRUMsSUFBRTtBQUFDLFlBQUdGLEdBQUVFLEVBQUM7QUFBRSxpQkFBT0YsR0FBRUUsRUFBQyxFQUFFO0FBQVEsWUFBSUMsS0FBRUgsR0FBRUUsRUFBQyxJQUFFLEVBQUMsR0FBRUEsSUFBRSxHQUFFLE9BQUcsU0FBUSxDQUFDLEVBQUM7QUFBRSxlQUFPSCxHQUFFRyxFQUFDLEVBQUUsS0FBS0MsR0FBRSxTQUFRQSxJQUFFQSxHQUFFLFNBQVFGLEVBQUMsR0FBRUUs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QUFBQyxZQUFPLElBQUVDLEtBQUUsS0FBSyxJQUFJLElBQUUsS0FBSyxLQUFHRCxFQUFDLElBQUUsS0FBSyxJQUFJLEtBQUssS0FBRyxJQUFFLElBQUUsS0FBSyxLQUFHQSxFQUFDLEtBQUc7QUFBQSxFQUFDO0FBQUUsVUFBT0EsTUFBRyxNQUFJQSxNQUFHLE1BQUksT0FBSyxJQUFFLElBQUVNLEtBQUUsTUFBSUMsTUFBRyxJQUFFTixNQUFHLE1BQUlJLEtBQUVHLEdBQUVSLEVBQUMsTUFBSUEsS0FBRSxJQUFFLElBQUVPLEtBQUUsTUFBSUYsTUFBRyxJQUFFSixNQUFHLE1BQUlLLEtBQUVFLEdBQUVSLE1BQUcsSUFBRSxDQUFDLE1BQUlLLEtBQUUsTUFBSUMsTUFBRyxJQUFFTCxNQUFHLE1BQUlNLEtBQUVDLEdBQUVSLE1BQUcsSUFBRSxDQUFDLEtBQUlHLEtBQUUsQ0FBQ0UsSUFBRUMsSUFBRUMsRUFBQyxFQUFFLElBQUssU0FBU1AsSUFBRTtBQUFDLFdBQU8sTUFBSSxFQUFFRSxLQUFFRixLQUFFLEdBQUUsR0FBRSxDQUFDO0FBQUEsRUFBQyxDQUFFLEdBQUUsQ0FBQ0ssS0FBRUYsR0FBRSxDQUFDLEdBQUVHLEtBQUVILEdBQUUsQ0FBQyxHQUFFSSxLQUFFSixHQUFFLENBQUMsQ0FBQztBQUFDO0FBQTE3QixJQUE0N0IsSUFBRSxTQUFTSCxJQUFFQyxJQUFFQyxJQUFFO0FBQUMsU0FBTSxDQUFDLEVBQUVGLElBQUVDLElBQUVDLEVBQUMsRUFBRSxDQUFDLEdBQUUsT0FBSyxLQUFLLElBQUlGLElBQUVDLElBQUVDLEVBQUMsSUFBRSxNQUFLLE9BQUssSUFBRSxLQUFLLElBQUlGLElBQUVDLElBQUVDLEVBQUMsSUFBRSxJQUFJO0FBQUM7QUFBRSxTQUFTLEVBQUVGLElBQUVDLElBQUVDLElBQUU7QUFBQyxTQUFPRCxNQUFHLEtBQUlDLE1BQUcsS0FBSSxFQUFFRixJQUFFLEtBQUksRUFBRSxFQUFFLElBQUssU0FBU0EsSUFBRTtBQUFDLFdBQU8sT0FBS0EsS0FBRSxPQUFLLElBQUVDLEtBQUVDLE1B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QUFDLEdBQUVFLEdBQUUsVUFBVSxNQUFJLFNBQVNGLElBQUU7QUFBQyxXQUFPLEVBQUUsTUFBTSxRQUFPLEtBQUssSUFBSTtBQUFBLEVBQUMsR0FBRUUsR0FBRSxVQUFVLE9BQUssU0FBU0YsSUFBRTtBQUFDLFdBQU8sRUFBRSxFQUFFLENBQUMsR0FBRSxLQUFLLElBQUksS0FBRSxHQUFFLElBQUUsR0FBRSxDQUFDLEtBQUssTUFBTSxHQUFFLEtBQUU7QUFBQSxFQUFDLEdBQUVFLEdBQUUsVUFBVSxNQUFJLFNBQVNGLElBQUU7QUFBQyxXQUFPLEVBQUUsTUFBTSxRQUFPLEtBQUssSUFBSTtBQUFBLEVBQUMsR0FBRUUsR0FBRSxVQUFVLE1BQUksU0FBU0YsSUFBRTtBQUFDLFdBQU8sRUFBRSxNQUFNLFFBQU8sS0FBSyxJQUFJO0FBQUEsRUFBQyxHQUFFRSxHQUFFLFVBQVUsTUFBSSxTQUFTRixJQUFFO0FBQUMsV0FBTyxFQUFFLE1BQU0sUUFBTyxLQUFLLElBQUk7QUFBQSxFQUFDLEdBQUVFLEdBQUUsVUFBVSxNQUFJLFNBQVNGLElBQUU7QUFBQyxXQUFPLEVBQUUsTUFBTSxRQUFPLEtBQUssSUFBSTtBQUFBLEVBQUMsR0FBRUUsR0FBRSxVQUFVLE1BQUksU0FBU0YsSUFBRTtBQUFDLFdBQU8sRUFBRSxNQUFNLFFBQU8sS0FBSyxJQUFJLEtBQUUsQ0FBQztBQUFBLEVBQUMsR0FBRUUsR0FBRSxVQUFVLE1BQUksU0FBU0YsSUFBRTtBQUFDLFdBQU8sRUFBRSxNQUFNLFFBQU8sS0FBSyxJQUFJLEtBQUUsQ0FBQztBQUFBLEVBQUMsR0FBRUUsR0FBRSxVQUFVLE1BQUksU0FBU0YsSUFBRTtBQUFDLFdBQU8sRUFBRSxNQUFNLFFBQU8sS0FBSyxJQUFJLEtBQUUsQ0FBQztBQUFBLEVBQUMsR0FBRUUsR0FBRSxVQUFVLE1BQUksU0FBU0YsSUFBRTtBQUFDLGVBQVNBLE9BQUlBLEtBQUU7QUFBRyxRQUFJRSxLQUFFLE1BQUlGLEtBQUUsU0FBTyxNQUFJQSxLQUFFLEtBQUssU0FBTyxRQUFNLEtBQUssU0FBTyxT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LElBQUssU0FBU0EsSUFBRTtBQUFDLGNBQU9BLE1BQUcsUUFBTSxVQUFPQSxLQUFFLFFBQU0sS0FBSyxLQUFLQSxLQUFFLFNBQU0sT0FBTSxHQUFHO0FBQUEsSUFBQyxDQUFFO0FBQUUsV0FBTSxTQUFNQSxHQUFFLENBQUMsSUFBRSxTQUFNQSxHQUFFLENBQUMsSUFBRSxTQUFNQSxHQUFFLENBQUM7QUFBQSxFQUFDLEdBQUVFLEdBQUUsVUFBVSxhQUFXLFdBQVU7QUFBQyxRQUFJRixLQUFFLEtBQUs7QUFBSyxXQUFPLFNBQVNBLElBQUVDLElBQUVDLElBQUU7QUFBQyxjQUFPLE1BQUlGLEtBQUUsTUFBSUMsS0FBRSxNQUFJQyxNQUFHLE1BQUksTUFBSTtBQUFBLElBQUcsRUFBRUYsR0FBRSxDQUFDLEdBQUVBLEdBQUUsQ0FBQyxHQUFFQSxHQUFFLENBQUMsQ0FBQztBQUFBLEVBQUMsR0FBRUUsR0FBRSxVQUFVLFNBQU8sU0FBU0YsSUFBRUMsSUFBRUMsSUFBRTtBQUFDLFdBQU8sV0FBU0QsT0FBSUEsS0FBRSxRQUFPLEdBQUcsTUFBS0QsSUFBRUMsSUFBRUMsRUFBQztBQUFBLEVBQUMsR0FBRUEsR0FBRSxVQUFVLGFBQVcsU0FBU0YsSUFBRUMsSUFBRTtBQUFDLFdBQU8sR0FBRyxNQUFLRCxJQUFFQyxFQUFDO0FBQUEsRUFBQyxHQUFFLEVBQUUsQ0FBQyxFQUFFLEdBQUUsR0FBRSxNQUFHLENBQUMsR0FBRSxFQUFFLFdBQVcsQ0FBQyxHQUFFQyxHQUFFLFdBQVUsT0FBTSxJQUFJLEdBQUUsRUFBRSxDQUFDLEVBQUUsR0FBRSxHQUFFLE1BQUcsQ0FBQyxDQUFDLEdBQUVBLEdBQUUsV0FBVSxRQUFPLElBQUksR0FBRSxFQUFFLENBQUMsRUFBRSxHQUFFLEdBQUUsTUFBRyxDQUFDLEdBQUUsRUFBRSxZQUFZLENBQUMsR0FBRUEsR0FBRSxXQUFVLFFBQU8sSUFBSSxHQUFFLEVBQUUsQ0FBQyxFQUFFLEdBQUUsR0FBRSxNQUFHLENBQUMsR0FBRSxFQUFFLFdBQVcsQ0FBQyxHQUFFQSxHQUFFLFdBQVUsT0FB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Y0FBRyxVQUFVO0FBQ1osbUJBQU8saUJBQWlCLFFBQVE7QUFDaEMsZ0JBQUkseUJBQU8saUNBQWlDO0FBQUEsVUFDN0M7QUFDSyxrQkFBTSxJQUFJLE1BQU0saURBQWlEO0FBQUEsUUFDdkUsU0FDTyxPQUFQO0FBQ0MsY0FBSSx5QkFBTyxLQUFLO0FBQUEsUUFDakI7QUFBQSxNQUNEO0FBQUEsSUFDRCxDQUFDO0FBRUQsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixnQkFBZ0IsQ0FBQyxXQUFtQjtBQUNuQyxZQUFJLGNBQWMsS0FBSyxLQUFLLFFBQVEsS0FBSyxRQUFRLEVBQUUsS0FBSztBQUFBLE1BQ3pEO0FBQUEsSUFDRCxDQUFDO0FBRUQsU0FBSyxjQUFjLElBQUksWUFBWSxLQUFLLEtBQUssSUFBSSxDQUFDO0FBQUEsRUFDbkQ7QUFBQSxFQUVBLE1BQU0sZUFBZTtBQUNwQixTQUFLLFdBQVcsT0FBTyxPQUFPLENBQUMsR0FBRyxpQkFBaUIsTUFBTSxLQUFLLFNBQVMsQ0FBQztBQUFBLEVBQ3pFO0FBQUEsRUFFQSxNQUFNLGVBQWU7QUFDcEIsVUFBTSxLQUFLLFNBQVMsS0FBSyxRQUFRO0FBQUEsRUFDbEM7QUFDRDsiLAogICJuYW1lcyI6IFsibW9kdWxlIiwgImUiLCAiciIsICJ0IiwgIm4iLCAiYSIsICJsIiwgImkiLCAidSIsICJnIiwgInkiLCAiTCIsICJTIiwgIm0iLCAiRyIsICJvIiwgImQiLCAicyIsICJjIiwgImYiLCAiaCIsICIkIiwgIm1vZHVsZSIsICJmIiwgIm8iLCAiZCIsICJpIiwgImEiLCAiYiIsICJwIiwgInIiLCAiZyIsICJqIiwgImsiLCAiZ3ZhbCIsICJidmFsIiwgInF1YW50aXplIiwgInZib3giLCAidmJveDIiLCAiQ29sb3JQYWxldHRlIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpIiwgImUiLCAidCIsICJyIiwgIm4iLCAiZSIsICJvIiwgImkiLCAiYSIsICJ1IiwgImgiLCAiYyIsICJsIiwgInAiLCAiZiIsICJzIiwgInYiLCAiYiIsICJ5IiwgImQiLCAiZyIsICJ3IiwgIm0iLCAiTSIsICJ4IiwgIl8iLCAiQyIsICJJIiwgImsiLCAiRSIsICJ6IiwgIk4iLCAiTyIsICJQIiwgImoiLCAiUyIsICJBIiwgIkwiLCAiaW1wb3J0X29ic2lkaWFuIiwgImUiLCAiZSIsICJ4IiwgImUiLCAiaSIsICJ2YWxpZGF0ZUNvbG9yIiwgIngiLCAieSIsICJyIiwgImciLCAiYiIsICJhIiwgImUiLCAiYSIsICJiIiwgImkiLCAiY29sb3JzIiwgInNldHRpbmdzIiwgIkNvbWJpbmF0aW9uIiwgImkiLCAiZSIsICJxdWFudGl6ZSIsICJpIiwgInIiLCAiZyIsICJiIiwgImEiLCAieCIsICJ5IiwgImUiLCAiYWRkQ29sb3JzQ29udGFpbmVyIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfdmFsaWRhdGVfY29sb3IiLCAidmFsaWRhdGVDb2xvciIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X3ZhbGlkYXRlX2NvbG9yIiwgImltcG9ydF9vYnNpZGlhbiIsICJSZW9yZGVyIiwgImEiLCAiYiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiZSIsICJjb2xvcnMiLCAic2V0dGluZ3MiLCAiY29sb3IiLCAidmFsaWRhdGVDb2xvciIsICJDb2xvclBhbGV0dGUiLCAiaSJdCn0K
